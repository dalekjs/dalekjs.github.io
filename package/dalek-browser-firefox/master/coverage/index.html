<!DOCTYPE html><html><head><title>Coverage</title><script>

headings = [];

onload = function(){
  headings = document.querySelectorAll('h2');
};

onscroll = function(e){
  var heading = find(window.scrollY);
  if (!heading) return;
  var links = document.querySelectorAll('#menu a')
    , link;

  for (var i = 0, len = links.length; i < len; ++i) {
    link = links[i];
    link.className = link.getAttribute('href') == '#' + heading.id
      ? 'active'
      : '';
  }
};

function find(y) {
  var i = headings.length
    , heading;

  while (i--) {
    heading = headings[i];
    if (y >= heading.offsetTop) {
      return heading;
    }
  }
}
</script>
<style>

body {
  font: 14px/1.6 "Helvetica Neue", Helvetica, Arial, sans-serif;
  margin: 0;
  color: #2C2C2C;
  border-top: 2px solid #ddd;
}

#coverage {
  padding: 60px;
}

h1 a {
  color: inherit;
  font-weight: inherit;
}

h1 a:hover {
  text-decoration: none;
}

.onload h1 {
  opacity: 1;
}

h2 {
  width: 80%;
  margin-top: 80px;
  margin-bottom: 0;
  font-weight: 100;
  letter-spacing: 1px;
  border-bottom: 1px solid #eee;
}

a {
  color: #8A6343;
  font-weight: bold;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

ul {
  margin-top: 20px;
  padding: 0 15px;
  width: 100%;
}

ul li {
  float: left;
  width: 40%;
  margin-top: 5px;
  margin-right: 60px;
  list-style: none;
  border-bottom: 1px solid #eee;
  padding: 5px 0;
  font-size: 12px;
}

ul::after {
  content: '.';
  height: 0;
  display: block;
  visibility: hidden;
  clear: both;
}

code {
  font: 12px monaco, monospace;
}

pre {
  margin: 30px;
  padding: 30px;
  border: 1px solid #eee;
  border-bottom-color: #ddd;
  -webkit-border-radius: 2px;
  -moz-border-radius: 2px;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 0 10px #eee;
  -moz-box-shadow: inset 0 0 10px #eee;
  box-shadow: inset 0 0 10px #eee;
  overflow-x: auto;
}

img {
  margin: 30px;
  padding: 1px;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  -webkit-box-shadow: 0 3px 10px #dedede, 0 1px 5px #888;
  -moz-box-shadow: 0 3px 10px #dedede, 0 1px 5px #888;
  box-shadow: 0 3px 10px #dedede, 0 1px 5px #888;
  max-width: 100%;
}

footer {
  background: #eee;
  width: 100%;
  padding: 50px 0;
  text-align: right;
  border-top: 1px solid #ddd;
}

footer span {
  display: block;
  margin-right: 30px;
  color: #888;
  font-size: 12px;
}

#menu {
  position: fixed;
  font-size: 12px;
  overflow-y: auto;
  top: 0;
  right: 0;
  margin: 0;
  height: 100%;
  padding: 15px 0;
  text-align: right;
  border-left: 1px solid #eee;
  -moz-box-shadow: 0 0 2px #888
     , inset 5px 0 20px rgba(0,0,0,.5)
     , inset 5px 0 3px rgba(0,0,0,.3);
  -webkit-box-shadow: 0 0 2px #888
     , inset 5px 0 20px rgba(0,0,0,.5)
     , inset 5px 0 3px rgba(0,0,0,.3);
  box-shadow: 0 0 2px #888
     , inset 5px 0 20px rgba(0,0,0,.5)
     , inset 5px 0 3px rgba(0,0,0,.3);
  -webkit-font-smoothing: antialiased;
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGYAAABmCAMAAAAOARRQAAABelBMVEUjJSU6OzshIyM5OjoqKy02NjgsLS01NTYjJCUzNTUgISMlJSc0NTUvMDA6PDwlJyg1NjYoKis2NjYrLS02ODkpKyw0NDYrLC04ODovLzA4Ojo0NDUtLy86OjwjIyU4OTosLS82ODgtLS8hIyQvMTEnKCooKSsrKy0qLCwkJSUnKCkrLCwpKiwwMjIxMzMqLC0tLS0pKissLC00NTYwMDIwMTQpKysoKSovMDEtLzA2OTkxMzUrKywvLy8qKyszNTY5OzsqKiw6OjswMDExNDUoKiozNDUvMDIyNDY1Njg2Njk5OTozMzU0NjY4ODkiIyUiIyQ4OTkuMDEmKCowMjQwMTErLS4qKywwMTMhIiMpKiopKy0tLjAkJScxNDQvLzExNDYyNDQmKCk5OTslJig5OjskJSYxMzQrLS8gISIwMTIoKCk1NTUlJSUnJygwMDA4ODgiIiMhISI8PDw6Ojo5OTkpKSojIyQ7OzsyMjIpKSssLCw6Ozw1NjlrfLakAAAg2UlEQVR42jR6i3ea6rYvPgANIAhVXh8WvkQlioUiFlFcBtAmoiRNdzxqu9p0J7vrdK29zuPeex77nnvO/35n1r1ndHRktI0jTOacv/l7lCBK5UqVpOha/YxmWK7BC4TQFKVXrbYsnimqxuuMVlOQ0XltWjUdCwRJ1M+tC1KudOs9q6+da2adUewG0SC0SwELfHtgDds93VEuydEbl3QMWeNoYkR7b/0x1ZRobGI3mLwzAhePqTAwhg6aogjNsGy7/jwQ4rkdqe7CWLxF8k9LfMVFyRS7VJqtkrW8Vt/bkR8FZJao16ipknbC3Yw2lM7laO6HBEOadEZ2tpf65c4v8e3u7FyU6qbiNNyCuzXZ6pawgnwgmrpTT/Q7w2EZmiIJ0dzWDI7mhQ80IfRnMu2kzA5r5r1pIFoia+/d93HRYp1GV8TbrkWoU/+jdI0Ff6yGwTjT1Hn8J+8m1rKpGiYPuNiHnMtNMIv+zpsk84MYTNW1/+DpwXLvckdOCMYowVNPREe0QlM8xRHXXFhcNDzupwsSmb5pH+0t0RP2Qk+QtI7F1Qm6JRC6ZPBtPq/dq/kH+jxtCljn9TIpW6rQIgmSVyj6lPICIw4N/taka41PFUInth0je9+jO6Kt1G4/a7V2LEgG02B0pHVuCZrgltSKMuIl5SyufUv9mYuQi+mFgzbBEtFo2g+Dh4sSTrLNu8JPh00sQydpb00tqXBvqRN7Q7kqzcnIxCGnvZt/WmJacoOEO6Dcn8Qre03pOCSQxbMOXUuDNx9SxuLz4W1I18gvjViQ67zV0rxdWL8Te/TQkuo8STS41DR48W7L6YP2uWIqiUV8rd6Gbf/rnegKZeG8TpAM6afhGze9JAOxbLjsnUXEbrZ9vLYd7MT32cPF5mKKxmjy7huaoD9n62GOxni3iIJwv0IzZAZjdZkUtolCNLVfYZNaquFjGszVVf+J0vrz4CawoKdHnOzb0NMH7CDBOybfYNJ4rfeMyFNjkFYVTzMFs87rnPGXLUOeNKRVc0LnU7/UIgelzsy3CMuth0YfvnY0wsD3vODUL3eJcKqHQpm8yM3XZQWJxO6Un9iYloyyLpOwN2obHy6W6gbpcb44XmyC+mg+itAcaprGcrwZCqMj/GmtKn0zPvpTz/Cv1dw21XwP3cRupg3H3MF/S71eTKj1YrdwKdc2Mw0fRmb2sFf8lW3aU6JbIZSEPqvXvjM7G/aApyXlXeqKfMq0g/Su3rUGJPSPrtGElgknrZM3xUXqsAP6zMCNVn5u8aJnSNpJv2uru7t2jfRziW2+GuhqfldUNbPk71olwo+46ePUo1U3WKk/e5YK07F/wGRgcpODmQnIlVeHCWBE4puBi2jq28UKpqiN1/4UOrGz59TNYrrQHtd+11sG40BGD+pXdelNqGOg4NXe8W4eacJV/NS9/2Umtym6WQqveqR9xdCMElpxnbkalM4Vf9uaEcWZaKdyibEIjWKxJZPN95niCL3GiaXyssIrHxoLkqkzLCXULN46/f2h3tQJgyip+Tk9EAjJ9aJshq7t8X45aowSKspMSvPf7r9R8yxNptIaHS5ozuEm6luPDApugyNP8OaqiQ4BjaequXA54SLC83eHIY2r+CZp4409Xqw8Aa2oI7XkCrQi+in0w5AqF/kLNrcUz+qkl/lAobY1jSnx5OJNhyXIz3qfNFlXc0TKaglNwdWkWYt9QQ1Kr6W8zue21iNrdJk+N5oCr2O9nEtWKC7IS5J/zdDEYrmnAYfg6agCy+qcgz7ZofeDc4PbUWSvkshWuAc7OjiUyLkj+RAtdlwXJcjxdpkTTHDhK8lBCi8+JtvDVL1W6elmOM++YS0LuSlaP1oUvAeiW3cFnvTr8EbTz1tsSMYdGeZe40sRWu5uAfj7q+ZoKv2FNQ0p5XY1lmlcigHZqTPpabufEVrNuNPi165w3uCVQJHyJqmSJ7ZHnguqwtCmwViIJijj04ba2JNYtB+yORf5gg1/9t9iw4vUpeqiunSAbf+IBdj/b+iG2qrHvuNP0Vd/+ThVZT/lrvHYjjgDbbyxaqgHNM2uhxa1GW3UedZYhMMwM4mQhltouK+IV4NdbIQNM+8Yv311RZk9kT4tiYR4LkyFcuPpdcjuhUuFqBAWRZa11lcZ3gEBlXywsNhrt+plISZP5DlsV9l4EgY6J3yZPTUcMrgaWAT3oI79eSbGEbcJpr6BD8kyDiVt+G0/hXosQN4NFXKlfWIfsIs0BHODVok1/IGnKFHJYIquh8Xo+2+bkQNTGgWmN/fZ0Y33LSj6lr1GyV7mWIKg7ZTRZPGuhF/zjRNcQ1UPtSYgnWQxSs0yrVhwNDcdGMNSNe2JT3WuzbAM3HykyAajS3Uphf6STKEqxLas9EnmnhA/lyj9Uj+JoY7SVgVmGLl46Rm2u98sbkap2lzAdKBG4r6LgulQOSSjQv1GWdQ0jtDUK/mAaqM1Uqjpu4k3Rvfvxv7YTxLSK+wN3E5jVIzmF23uZ7hiH/sVP49D7tvoKp4S8b1LuvRlivVB/algbhcFITYVXvDpLzpDfplR2uD5V4XJFxpjmIpLc9Y5sB2TpBRix7Bme6GZIq+06v3XzNeTcA4obQIKxrnT4C2JpOqD92dbmSX8MGazly5EsZVMvSU1f4RZwyu8iQXbVdeLlZrjuTT1jrY1uk5c7iZ7RsvhhluqAkq4JpVQAg7RJFtSu+xgJ8Pv6O1j5DkLxT8mkbfyRW5DrQmG7hiDIjCgBsADbjuof6YHLGeV6a5Q1Smx9joUXPpdaaDx97A/Wq00oJkdR7ZYuQRfS533JtxO1erduqWOYIt3wh0wpbLuCNIYkwxbswbikCUu2CDCS+Q+7rgVtfRcm+SOcdKPRlZ/rE7wNVUEE39KTS5uvUKN1PUnkloPkyzhyGQ8qkouEjJ3H/VXdqG6asSRiw3ecMlBvDDt8dDhBHXMwZ2Cajzjr7/76T+IavqPYvz6r7//E/3X3+N//h/0QozbjPgPiir69P/8X3/9F/yv8b/827/++98WItPu5/Hvwd8YPf5bp/2/lX/T/+Of/0MJ/lYTa+L/Ef+d9vN/3/2T6P/+jyTzu/evf6U7vxN7B6pJkRtAF6jUr8I+P8RsP/ptGhfqFk+pQ/DgAy6NJtRYJdXmp4gK7WLqLKJ+MaKhGjOojvL+SnIWrkpy0SLHDe4QuyNzaEA15mLMCcmE8Em+4HdOihW4/ZWuppJEmzeAwcDtv7MuLc9y2V5atvxXNe3S4DUMt5/Qy2LM9kSYKiVWBuKlfp4nxTntpuW03JbIlkiRvBXmT23g1I2OYe6IizUHPIq6zm6mbfsbteKmi/sg9J+ocQBMctGFO7iljo8TPN+z3jxw4do+ZwfqoR9dkNTKHyM305GpTkfhcHexVkPVGEbUOjuo9f0UMPHBFlGEx0SLvJvVRKTwW7PSew5oPme+E42+frJa9cGt2njS3dK5kIif2eYbhuSEQXEqMVfUjhGIuin0G0/W5ezJyJQy3SpMLai4M0JUWb5u1k9tny5bd1pPwYBpQuDCXZl62xg4CdVEAtflXHs6JKmP/pH6mOl796Lgopj0o8d5kKh00hxG3OSdEE/QBo9Hgr8JJqAeLDwJohG5j/DGh61Rc/+tf22/8kEnxHNCEjo0ElvvGfESZkqmz2BDcKV1H1buSkhkdg7p1IMGs2s17nYjpblrWuE2K9WEO/hcRp5e9oOF/QBmOaDtgil+oaU6szPrdwW65fOB0KUTsVUn7LFU7J8e6cxJIl9+FHw5MQMzuQJ+4oxMH3iW/5GK+hWuG0T+gTLs+fAjdtUd58TmIUq04EeyRCYCjkldow234aIgR5bqwrtZosZ+6YEqAmDqatJ9lWasz4IquKALPtd92hGI3Z2BdzzZue+REl1Om4DIWD+RrtUTOJLI+S0jHowXXdAxsGLSd40zYNuEUlOGhrwL6c7tcOtUOvpJCP7QBQS19H+GvZn05ewjlVLz+IGKoC9TyfQjLMBNmXCuqqtTdOSukZW48B0HqgSTCBrBnlFvF4CG2Su7yFzqmJFURK3UmTT3ru050r0ptUpMilYnBJWfl2Bv6kPlUuE1kxxpdzui9AubsR2N2boVSu81OulAwBqoSr1LZ0LLYOomyZHmjqnXlP72s8LnDouEJjtodBvdHaG1jMySYO7crWd90MpCRyCG14vb5IE7Arupw/y/RcCm/Tm3zK6zYj8PYNaGldiUfkB/LHWcmf2lVM+mwyU27a0qq2tscrQ/vzBjN26DnntIrOyGizzXK35yKQdYnUABkyN4saz3WD/viF+eCcsXnIajdWYJWaYHRstIis9CS+tqnFGmz2j5uzfr3Z4prqgK4XOT/PyftvjZqIm8lhkfxJ7Ol3CJF1piYBGAG8wtAk56Drw1YwmOpcz+NdfkSpSLplRXLXHL0Rquj6YW/gabqgK7Dgr6NwtH0B/AN7XrN+MVJ6AmXmUuqmQulrNNYPmH0RoDogydOKLo/QbfYNARSQQKISRCzRXU+q9WWJFL3LZW6u34CkeG97xC0NNGaJ0bvK6SnZS3zPskr5EtuCgjMWR5o2x5BqhKmDWJPRe7JMEOyRb5uUKlHaGVtq5ivSOaSliSXp9SQm2qk8MRJh10MAp9QQ2H5t59J8rjiwSZtoIfMGjlLPVNdYl/LBR0AO6WLGDmkLkIPRE45Y9MftdAK/yNu1Hn6tzOQTesgQ+8fSzB19wO91vCnO23vOWQdwJ63SJrYjdfKFW6W281PKs2k8iT9ai1cgJ4sa3xqdvmtxR8/+D1B8AKc2u+6JftryRhMWSQtoSBgIyyQGyxcnELuAasXN12oSriU4RMz1DD6RL0TSV+om7i1Yt+jEE/jnawM8cX/UhN4nkiv/w9eALrzNhXuQfOzFL0Fi6SjF7/4Qn8rLYBoa85cvgAnkCEBP+HPbEnquVXCZsMS/yzYw2Vru60P/+nJPYKkzZFjmbykzUoEqV836T5q3fP/L383dF82tx18/AZgZczMAgyeWYKmSZIqtHL+e+O4ZRcq9VI3g/qPeCoiK4pcgEqdbS0S/Be54sbVQOuJVPNBblIghzeasNu7h/g+Sz1IdhI5lCwq1nUb3Ji4OCIcqQZqtqJ5w7rXrg/DA9IgVmEGhDgGecEwnCTHffXcXs0V3OCEVzYDKS1vp/oX+ng+6XVU86UjA6FMO2RXOOOrqY1GgPvrAk9HV/BXtCu5RuwF8qgdGDLsBcui4E33ymdBip1X8uKyhIWT8qNRDsXz+gvO9UiEC0d8RG4Tf2x8H4slljgHtCBcxHLTWOYJm5H/fCPCzOgf9qgOUxTRZ0Pc6ha5yLuLVT9ntvIa6gacE99mCovdUumTQdRP4RPsS9129eEe2uSvvGh0bV4Y3QPPhPZMqhZWSMa5R0Hc1SGO4IVOQc0FrirlibTVfKRrYkD8kz3b+X65/QkUNaZdrdl3mCap0Hf3YcCw/LiouJYNbqz88UqeDYv93yO7vvXtgl4XCyAO4ODkY6W+83+LZU//p3/zXNGGrUKClCiOnL27iJZbNWDF02XXAOeFlB7IaADoMH1Yqr+UP9biyZDEa/iJt4MDeIz6GKTdLVBfWGVtRN4fdT2rgReX8UXwF2zOrradm4J0nyTgdPnai3RvzpZvCKDUqjOwD/QA6EDaMCLewX6QWYVnHY1sx1bd8ovYnPm1ZvPH+rE20lWjOCnZ66/xDt0QAl15FjfBcZp+i9OU0RNPQ0t3x2pSNWo8eiYudwsnuP1Hq6iH1LJCJynkYsfgJ0p3pF6SoQk2l+jqE8CPk+ziGJRSKjs+W5AO185umPdkYzlK4wl7TC9NxyyDP7ZoyYVoXiuS6SjnInlLWrwz1i8bGTKXX0AVQWkSfIlglW3zRJRJ8bg5VgE6ZEnqNu9B++0GNQvDQJvFize4ESNKBJP+8vA3LM4AX5SIBq08Mob+7QMTCZx4nwP/64+4BnlZC+8WtlP/CXw6t1PwMwkJ3jhP1FiXLhDF/3I6FGUzO2DSi9ABxKyyL9paZxSEz40ZCPQToDAJu1959k7QdbVxgB4icsu2s4zsTPJhcEDo+N1GX4zSk/wriRh8AqwL62972i9HJHd1ydaLXVzvKvOfGGw5RVcUVMiKXFH4APdkQU/dc5BX0YfKTNZYXCW9mb8bc8mufoQP6BbdQmT99ZjoYfr/go4TgQX9IDgztim7wyFeGMfbNaeqj8Dzs38pgcqwSv2hbqB3oSGKWKy+sesY7p57wAHldqE6NDudk/W7s/zjrK4rZFlFvaGxnSZdHbc1y47qDN6xkoK8O3bfr2j41dlJZ71rB4dlDqapPFa8N6xBrprUdtenUCHwxKNhw1uuTBh+9uU45k4REpQABN2bAO9DSLqoIL26gNroWgup5pUMxHUNSq4Gyz47vBPvilpo5f9OYI2ddAqTqmnxXERxQJ3UK8fHbVE9HagHi3+tqNRoNsArdmAxHA5LwtQo9ZAaNKUTljnokljo2x8scqVpEEIPc01fPCdHOCg0DeWBz8D5TVAAfx8aRH5X2ZYNI3ebKDZdeJ+oBDAxmRqJ30Eh2/DaeAy5diVNMpEDmXiPDsGTzBLXy8eVDdJoIafgx/gxMyQi454QrW56nCyeELgSuNNEmYkflF+t3CZQOVRWjKhIuCclmQSlAXT3+4JGG75B4t/5hQ+ldMP4LsAW6z3XmU6IJJwpnGVnsgUZhoY1fZlwTR8wSU7xRejf2uCx9Z5trVTRRJP9KnEb134dEieil6eCOGWgboI7xsqsqM99jfJLTePjygKlH2CVxxsse9QRzTBFjD/Kjqitr/CCTBt/SJ6nLxz7cKP9pFqBpp0lN5y+adKNsZjrPuroemZauH9aTTFD3EKHW8S55XBLFQAt1jgxTQCTwxmx/JyfsZDN1RroN3VaxpSenpIX7K+ZbL8VdlQDcI4Cbzg3QJLa9yVqNxUelu+EtxLVqeekaAvSJkO6sSVqbUajxqhKshNpvZqoeApF0k/0P0ikkwUcbdwc4A1ejN7Oo0O15kG7hTMoK3hZRBCX7YYeLW0wvcXx/18n/u37yLgzBYVBUvORGli+sfRcX/74uD6P4hq+7xu54TlWJLFzT63uwUDwuEDdOjJQqx7JV+ZjaEAPi7t0MMrR4Q8Rkf18uxD6RK0RKh0hL8YU+DeL97i4pa5ZSyAfXKwZRS/8gXcxdZXm62RBDj8U3sN8x95b5PpPs/mCBKYvpaA50pN5Ct/499AFTtwQ5vgeSh+NHrKIi4NVpwM/XzRaNfJD856lPE6M21zWPguFsH7jbLVyEDfRmt4VwrhCJ5VTYmcSPfGgO5clfN+vbaDZ7sakU5+2vZ2WCDY031NxJarVytfDDVtiafcTGO2rJ/taoL3zChN2qmjxofczTOYQPPVQPh0JVtYgdUQINcSiNEEy58UdYXX1MpWUCEBx7LbcGtAm8XWRQTVOaoV3ySri4RShhs/B/0m4jX6OAwXOvcA09bNSG4czEGv/Wey6V/jbTCNTW6awXdNTcA1GsPe1E9fZdGl7R0vyoVpIdJtfC6d32NNErrvq/R+d65VG+YOwRXppXxOCYyGNSf1K3x6VxAW/vtz4EC1SgCOSPdN62sLsoIzuDfg8GwZAbquVO8HIuFP/ToVoeUB7nnwMF35a1wK1tI6fkrqFKhQdeJpwyls0pIy8AZde3/6LUUbFaYJthyUJSU/kqDXTLQElnn0Jr4B2RVghNrmNmoEn7pXIeshPguXVsvwoTdmClq49JJU3LWhHyWTrJL9bRP6VKv3tZoA/th77p5Jw++OEENvyvWy/pNeExiDUVQaXIRGh8xySZTI36yueFaSXo1uJY0RnXYgEOoWWOJHeaVuX/bGNhHsh2yinznl/++NJcE9j6fBPRcBdq9hb8awNw8U7Bl6GM7x69EDOIIbX/npZ++amlHR9L/35mE/2Ss4gb0xCcY4VyTFLRE796vHysLAamqcyO+aFQyJIDBNslbH2/MrAvZiSEIedc/cqjmv4fbda2pXbv+F5a2szSsdkm9noiNURXt8edUhGUF6fSZWd1IJaXKFwD+49R6eCXD4Bkef7j9tRtNMVgW8BhRz/Qpy1TmeYk0doyjZoJSbePOReVHgkFsCFuQJ+Lgc4BxeAsK/cOiNDRmdNw0ctYhn/nQ498dYI5znzGLoJi1rav7Cn88rL3wLePVtDK5gl77Tki3gHEsIAQ2+IKgarj7Y8W1IQzV5V9N+0TjLqbg68WfKcOmBCOj3JkwJhVIkwDhc+JorXuZEPMEh0vvH3x7iqf+VAwXgd4diZiaJD1zHL9Snx6Wfg4IugreyhabQkcir+y5XgDtdx3Avs7lkeeCBwDvZoTUCXx5QrZkcEqWfYEiEYRs/EphmRALSNGR1Iclgdr5VFoELpzF4++f35w3/j0t5ucW3n2ch4PQCLuUXupsPRR7UA5FjSKrMtPcKAZJfagO4lGE7FH3YKMjorpK0ZxAv+i2JkJhtAMWWWFej4RhPR/cJ3DxwocCvXDi4SGZU4cu+K32XndiFWgopAl+0GApcwf1XvymJcFs39jExIBO4yUjU9MExBLQYc9H+W7+IgdESPRpciT+rKZPebVtaVq+1GYO/5xTAL3HASjNTGIgMvdjWbgc7JvdE1zIFpuC0U9ESiZyzBixzxWxj4Kwh8My34q+FK3KNLtmsA1qyrmKSNQOXCPUZd+ONelBTvFoUI/CYsqa/RhtKiyMf2CgSFqEPk59Y3uqnlZ8gFpswfSYyko23yVZYxzKGxGm49Zqxg1l8oz5Ra9XaRwHkuxepmgyhm0SoNy2KlbcEqK+9QqS9PNx9Ihm9U7gsR55SSJ1FBDNnkuWKxIZ0SDpXuOGwZdoUbOMDPHP4vBAgz2VlSEJAHZGJVbYIg7l/FO5KfIVvxC8pPPxMGcNMoevFDeStt2iqztE10n2TA4dgJH76YS9HDhKHD3iCx6ieFX84BAI3QQnngh76f5ruPQVbr5qZmck/5UjDc26lfrOvUBWy0Ogl8bCoOkMOns81TnC3cuUS9KW8+9A+fe3XYZOFUPG1u5epSSmDLw0s5s2F0W30ANeo+zJkJQz9SPZgzwYpEoktofhGVfmLOAB20boCbW1QWq/NpET/hnMecw/uSyAH4NJc3ECOU4nnkK1fj3S/i5dwb3R7k00AqQQUwt7Ie1qV0aY/VQX0J8hLPy7eBNXMHYZYDNxHZ2Qh6AuXJxq+AeRec/Q+JLhZV6hpXwQEzw7bf5v9uUf2vpq3qlhmy0IIGTkwYdCfSAFmqbdo+3XvDTDjFJde0mbeQLcn2n31xaAqJ0ixO/CLsT4I4G4DoncVTgRGNBtsCcjISWT+oeXZ4Iedw/8OsJI1aPnNKLX/60VvcZb94uasRxCkqlPQ11u1Sa2hHvB80WQENxVyzjns0/PiEByyil21Te6oisk3mNCEMrhouCFO3yEZTHHOCMy9eb/4Tmi8cVf3Lf7P53SY2hX3PSN033As3ETIMLHWumWEO9JXHA2y2SIBlIPpLGG2qvNsCIlIr+B1SWAqRKm2w6Blf7U+zCSBwJrfHG5i8J5Gax/cVonMlon7aHJX/gSvucIncRP93XCqkv7D8IFKFsLiBgHqUpXhE3pYjEcV1dk/JD9zFVCfEaQIVX8Jmfz7IIofcBKQ4OaG+C3xC2veX9CD+iAFXDNaGg9eTVxvkbJRJlW4Nk9Wk13kn696jWppRDe/8pDrYMO9ZyxZ98ReKSz9kWKLLyk2zCZgAniCkLJVX3n1M9DYbomyahWiv/KixRIV9hj/oFz87I+HLznbPTjpa+D+bZQnMuRsljTpv90vQUt/pK7jCFnA30B/jtroSF2/m/gpWn1aQs5WeA6ghzF8SdqWI20fghdSeDOCSCmLgTkfaGgGDmw7nHFkRzGtag57IHS2na06I+gzEphXo1w/Zx2BM/jKL2nZoFjHggtFQjYi8nSVRSXIE58RPbBObXk7uuIL9+rs/5Zo7suJInEUxgsiZZAWS25iBtpEiZeBgDtghEoAE0sjcayNq85M4tbu/LF5h51335PsGzQ09O875+vUS89lkWMyNOFoip2PuyWyMP/iU2XIZdfCCJNDjebDoBLQdpy7QQZC7s9c0wjHJervQNDu2jWzBW5MSAJMr7bP+Iv92BkS/GGgzjEn7MF1IRKFwwzbjbS4/slGOmhx9cZrFu7HSEefojNv3r0UaKfKOWzXsq1zEugbzlMDFsacRJJI/iJlK3vtkZ+PLZIVMFlKA32wbq2Kd5T0uCLZ1CPkAfCdzkz2EYscjDcZq2AWfziN2covN4kXE1lQXPPLTNM1xx3tbiepcO/t3SWm4w87qfh99SL0ZnY+LKFPLPeXVM2mIIoVWt+9Nk0I7nY4O79iGYqxZ8RVz289an6NVdJWnSKZvJQCAuHNiVaDxPAFoH392t9wot5t0/qmU95eEWNbU2udUW5sN9JVqcYlvAIfLeYC33oUzzxZgSktsv21mA7Uly1FA5VnoJFh6N244Wmv3YJGFv/TCPryaw+ZORlpZjQdq/2DYXr3EZskfed0G61P09ipTKmlTQ1067Rg5+PAk5FlQ9e0SWbGf2B/08kqymOTMVOznsALHHNFH4LFRKl2F/NOiYFl9khNHnSu9Ak5sq26Ynl/i2fdTle29Y1ugqmR5Yj4YT9pvslFyYCbw0mNFr5rVQm1LvkG27QMq9ph3t8fmn6r6SQ4oSbr5tz+J1kIawGzDxb6VYOvvWhobDTXfBeNv3b4aNm5XUinsCGqG2q/45m3+LoCOsddFceYhRx1Tsss9PLdPfJdErFMjYd3gddjiP0+XQjcRadZP6bwNLySvunFf20Czy6JqdEW2a96KxdYdOryBv1BjbuUq2yCHeh+6sk7fGmmPi50pe/1l5TyPe5oHW9oPnhPswLyf2TFDdCyYlhwBCstv5C1HwlW7xWoGT9XZt4qVj5WryLPLLD6h/5cMLEjWzgCeAIKNsLak92aBqBsHl4AJwl2N4jfvbSkBExGimv0nFvv09uDScQbjx+w4kPQjgjlW+g9ws9VEJvI2k8N6XxVu0uIwovgTFdunG24gBtaDi+y1YLQwZ8mwbip5fVlO3k0n0AEr/ETbtu8Vjkm+nNSiEb7X/3fMjBL5A8PdgG+/FnbexbFFExmEfetXAnisEKy5z44WVPpQZjSy/jzeGn4yDRsFGqhh87QPaDBWhlo37IFbe/C0xynS91d2tP/AJoJS0sVF6iwAAAAAElFTkSuQmCC");
}

#menu::after {
  display: block;
  content: '';
  padding-top: 80px;
}

#logo {
  position: fixed;
  bottom: 10px;
  right: 10px;
  background: rgba(255,255,255,.1);
  font-size: 11px;
  display: block;
  width: 20px;
  height: 20px;
  line-height: 20px;
  text-align: center;
  -webkit-border-radius: 20px;
  -moz-border-radius: 20px;
  border-radius: 20px;
  -webkit-box-shadow: 0 0 3px rgba(0,0,0,.2);
  -moz-box-shadow: 0 0 3px rgba(0,0,0,.2);
  box-shadow: 0 0 3px rgba(0,0,0,.2);
  color: inherit;
}

#menu li a {
  display: block;
  color: white;
  padding: 0 35px 0 25px;
  -webkit-transition: background 300ms;
  -moz-transition: background 300ms;
}

#menu li {
  position: relative;
  list-style: none;
}

#menu a:hover,
#menu a.active {
  text-decoration: none;
  background: rgba(255,255,255,.1);
}

#menu li:hover .cov {
  opacity: 1;
}

#menu li .dirname {
  opacity: .60;
  padding-right: 2px;
}

#menu li .basename {
  opacity: 1;
}

#menu .cov {
  background: rgba(0,0,0,.4);
  position: absolute;
  top: 0;
  right: 8px;
  font-size: 9px;
  opacity: .6;
  text-align: left;
  width: 17px;
  -webkit-border-radius: 10px;
  -moz-border-radius: 10px;
  border-radius: 10px;
  padding: 2px 3px;
  text-align: center;
}

#stats:nth-child(2n) {
  display: inline-block;
  margin-top: 15px;
  border: 1px solid #eee;
  padding: 10px;
  -webkit-box-shadow: inset 0 0 2px #eee;
  -moz-box-shadow: inset 0 0 2px #eee;
  box-shadow: inset 0 0 2px #eee;
  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
  border-radius: 5px;
}

#stats div {
  float: left;
  padding: 0 5px;
}

#stats::after {
  display: block;
  content: '';
  clear: both;
}

#stats .sloc::after {
  content: ' SLOC';
  color: #b6b6b6;
}

#stats .percentage::after {
  content: ' coverage';
  color: #b6b6b6;
}

#stats .hits,
#stats .misses {
  display: none;
}

.high {
  color: #00d4b4;
}
.medium {
  color: #e87d0d;
}
.low {
  color: #d4081a;
}
.terrible {
  color: #d4081a;
  font-weight: bold;
}

table {
  width: 80%;
  margin-top: 10px;
  border-collapse: collapse;
  border: 1px solid #cbcbcb;
  color: #363636;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
}

table thead {
  display: none;
}

table td.line,
table td.hits {
  width: 20px;
  background: #eaeaea;
  text-align: center;
  font-size: 11px;
  padding: 0 10px;
  color: #949494;
}

table td.hits {
  width: 10px;
  padding: 2px 5px;
  color: rgba(0,0,0,.2);
  background: #f0f0f0;
}

tr.miss td.line,
tr.miss td.hits {
  background: #e6c3c7;
}

tr.miss td {
  background: #f8d5d8;
}

td.source {
  padding-left: 15px;
  line-height: 15px;
  white-space: pre;
  font: 12px monaco, monospace;
}

code .comment { color: #ddd }
code .init { color: #2F6FAD }
code .string { color: #5890AD }
code .keyword { color: #8A6343 }
code .number { color: #2F6FAD }
</style></head><body><div id="coverage"><h1 id="overview">Coverage</h1><div id="menu"><li><a href="#overview">overview</a></li><li><span class="cov terrible">10</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/index.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/</span><span class="basename">index.js</span></a></li><li><span class="cov low">33</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/cookie.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/</span><span class="basename">cookie.js</span></a></li><li><span class="cov terrible">13</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/element.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/</span><span class="basename">element.js</span></a></li><li><span class="cov medium">50</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/execute.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/</span><span class="basename">execute.js</span></a></li><li><span class="cov medium">66</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/frame.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/</span><span class="basename">frame.js</span></a></li><li><span class="cov medium">66</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/ime.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/</span><span class="basename">ime.js</span></a></li><li><span class="cov high">100</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/interaction.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/</span><span class="basename">interaction.js</span></a></li><li><span class="cov low">33</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/page.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/</span><span class="basename">page.js</span></a></li><li><span class="cov medium">66</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/screenshot.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/</span><span class="basename">screenshot.js</span></a></li><li><span class="cov low">40</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/session.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/</span><span class="basename">session.js</span></a></li><li><span class="cov high">100</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/storage.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/</span><span class="basename">storage.js</span></a></li><li><span class="cov medium">66</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/timeout.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/</span><span class="basename">timeout.js</span></a></li><li><span class="cov low">28</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/url.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/</span><span class="basename">url.js</span></a></li><li><span class="cov low">40</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/window.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/</span><span class="basename">window.js</span></a></li><li><span class="cov terrible">16</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/cookie.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/</span><span class="basename">cookie.js</span></a></li><li><span class="cov terrible">3</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/element.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/</span><span class="basename">element.js</span></a></li><li><span class="cov terrible">20</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/execute.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/</span><span class="basename">execute.js</span></a></li><li><span class="cov medium">66</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/frame.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/</span><span class="basename">frame.js</span></a></li><li><span class="cov terrible">16</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/ime.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/</span><span class="basename">ime.js</span></a></li><li><span class="cov terrible">13</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/interaction.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/</span><span class="basename">interaction.js</span></a></li><li><span class="cov low">33</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/page.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/</span><span class="basename">page.js</span></a></li><li><span class="cov medium">66</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/screenshot.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/</span><span class="basename">screenshot.js</span></a></li><li><span class="cov terrible">13</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/session.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/</span><span class="basename">session.js</span></a></li><li><span class="cov terrible">13</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/storage.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/</span><span class="basename">storage.js</span></a></li><li><span class="cov low">40</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/timeout.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/</span><span class="basename">timeout.js</span></a></li><li><span class="cov low">28</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/url.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/</span><span class="basename">url.js</span></a></li><li><span class="cov terrible">9</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/window.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/</span><span class="basename">window.js</span></a></li><li><span class="cov terrible">14</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/marionette.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/</span><span class="basename">marionette.js</span></a></li><li><span class="cov terrible">22</span><a href="#/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/webdriver.js"><span class="dirname">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/</span><span class="basename">webdriver.js</span></a></li><a id="logo" href="http://visionmedia.github.io/mocha/">m</a></div><div id="stats" class="terrible"><div class="percentage">17%</div><div class="sloc">545</div><div class="hits">95</div><div class="misses">450</div></div><div id="files"><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/index.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/index.js</h2><div id="stats" class="terrible"><div class="percentage">10%</div><div class="sloc">146</div><div class="hits">16</div><div class="misses">130</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">// ext. libs</td></tr><tr class="hit"><td class="line">28</td><td class="hits">1</td><td class="source">var Q = require('q');</td></tr><tr class="hit"><td class="line">29</td><td class="hits">1</td><td class="source">var fs = require('fs');</td></tr><tr class="hit"><td class="line">30</td><td class="hits">1</td><td class="source">var path = require('path');</td></tr><tr class="hit"><td class="line">31</td><td class="hits">1</td><td class="source">var rimraf = require('rimraf');</td></tr><tr class="hit"><td class="line">32</td><td class="hits">1</td><td class="source">var which = require('which').sync;</td></tr><tr class="hit"><td class="line">33</td><td class="hits">1</td><td class="source">var portscanner = require('portscanner');</td></tr><tr class="hit"><td class="line">34</td><td class="hits">1</td><td class="source">var spawn = require('child_process').spawn;</td></tr><tr class="hit"><td class="line">35</td><td class="hits">1</td><td class="source">var Events = require('events').EventEmitter;</td></tr><tr><td class="line">36</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source">// int. libs</td></tr><tr class="hit"><td class="line">38</td><td class="hits">1</td><td class="source">var Marionette = require('./lib/marionette');</td></tr><tr class="hit"><td class="line">39</td><td class="hits">1</td><td class="source">var WebDriverServer = require('./lib/webdriver');</td></tr><tr><td class="line">40</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">41</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">42</td><td class="hits"></td><td class="source"> * This module is a browser plugin for [DalekJS](//github.com/dalekjs/dalek).</td></tr><tr><td class="line">43</td><td class="hits"></td><td class="source"> * It provides all a WebDriverServer &amp; browser launcher for Mozilla Firefox &amp; Firefox OS.</td></tr><tr><td class="line">44</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">45</td><td class="hits"></td><td class="source"> * The browser plugin can be installed with the following command:</td></tr><tr><td class="line">46</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">47</td><td class="hits"></td><td class="source"> * ```bash</td></tr><tr><td class="line">48</td><td class="hits"></td><td class="source"> * $ npm install dalek-browser-firefox --save-dev</td></tr><tr><td class="line">49</td><td class="hits"></td><td class="source"> * ```</td></tr><tr><td class="line">50</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">51</td><td class="hits"></td><td class="source"> * You can use the browser plugin by adding a config option to the your Dalekfile</td></tr><tr><td class="line">52</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">53</td><td class="hits"></td><td class="source"> * ```javascript</td></tr><tr><td class="line">54</td><td class="hits"></td><td class="source"> * &quot;browser&quot;: [&quot;firefox&quot;]</td></tr><tr><td class="line">55</td><td class="hits"></td><td class="source"> * ```</td></tr><tr><td class="line">56</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">57</td><td class="hits"></td><td class="source"> * Or you can tell Dalek that it should test in this browser via the command line:</td></tr><tr><td class="line">58</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">59</td><td class="hits"></td><td class="source"> * ```bash</td></tr><tr><td class="line">60</td><td class="hits"></td><td class="source"> * $ dalek mytest.js -b firefox</td></tr><tr><td class="line">61</td><td class="hits"></td><td class="source"> * ```</td></tr><tr><td class="line">62</td><td class="hits"></td><td class="source"> * </td></tr><tr><td class="line">63</td><td class="hits"></td><td class="source"> * Dalek looks for the browser in the std. installation directory, if you installed the</td></tr><tr><td class="line">64</td><td class="hits"></td><td class="source"> * browser in a different place, you can add the location of the browser executable to you Dalekfile,</td></tr><tr><td class="line">65</td><td class="hits"></td><td class="source"> * because Dalek isnʼt capable of finding the executable yet on its own.</td></tr><tr><td class="line">66</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">67</td><td class="hits"></td><td class="source"> * ```javascript</td></tr><tr><td class="line">68</td><td class="hits"></td><td class="source"> * &quot;browsers&quot;: [{</td></tr><tr><td class="line">69</td><td class="hits"></td><td class="source"> *   &quot;firefox&quot;: {</td></tr><tr><td class="line">70</td><td class="hits"></td><td class="source"> *     &quot;path&quot;: &quot;~/Apps/FirefoxNightlyDebug.app/Contents/MacOS/firefox-bin&quot;</td></tr><tr><td class="line">71</td><td class="hits"></td><td class="source"> *   }</td></tr><tr><td class="line">72</td><td class="hits"></td><td class="source"> * }]</td></tr><tr><td class="line">73</td><td class="hits"></td><td class="source"> * ```</td></tr><tr><td class="line">74</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">75</td><td class="hits"></td><td class="source"> * The Firefox plugin only implements a subset of Dalekʼs assertions &amp; actions,</td></tr><tr><td class="line">76</td><td class="hits"></td><td class="source"> * so if you run into any bugs, the issue is most probably related to missing commands.</td></tr><tr><td class="line">77</td><td class="hits"></td><td class="source"> * Please report any issues you find, Thank you :)</td></tr><tr><td class="line">78</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">79</td><td class="hits"></td><td class="source"> * The Webdriver Server tries to open Port 9006 by default,</td></tr><tr><td class="line">80</td><td class="hits"></td><td class="source"> * if this port is blocked, it tries to use a port between 9007 &amp; 9096</td></tr><tr><td class="line">81</td><td class="hits"></td><td class="source"> * You can specifiy a different port from within your [Dalekfile](/pages/config.html) like so:</td></tr><tr><td class="line">82</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">83</td><td class="hits"></td><td class="source"> * ```javascript</td></tr><tr><td class="line">84</td><td class="hits"></td><td class="source"> * &quot;browsers&quot;: {</td></tr><tr><td class="line">85</td><td class="hits"></td><td class="source"> *   &quot;firefox&quot;: {</td></tr><tr><td class="line">86</td><td class="hits"></td><td class="source"> *     &quot;port&quot;: 5555 </td></tr><tr><td class="line">87</td><td class="hits"></td><td class="source"> *   }</td></tr><tr><td class="line">88</td><td class="hits"></td><td class="source"> * }</td></tr><tr><td class="line">89</td><td class="hits"></td><td class="source"> * ```</td></tr><tr><td class="line">90</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">91</td><td class="hits"></td><td class="source"> * It is also possible to specify a range of ports:</td></tr><tr><td class="line">92</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">93</td><td class="hits"></td><td class="source"> * ```javascript</td></tr><tr><td class="line">94</td><td class="hits"></td><td class="source"> * &quot;browsers&quot;: {</td></tr><tr><td class="line">95</td><td class="hits"></td><td class="source"> *   &quot;firefox&quot;: {</td></tr><tr><td class="line">96</td><td class="hits"></td><td class="source"> *     &quot;portRange&quot;: [6100, 6120] </td></tr><tr><td class="line">97</td><td class="hits"></td><td class="source"> *   }</td></tr><tr><td class="line">98</td><td class="hits"></td><td class="source"> * }</td></tr><tr><td class="line">99</td><td class="hits"></td><td class="source"> * ```</td></tr><tr><td class="line">100</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">101</td><td class="hits"></td><td class="source"> * If you would like to test Nightly, Aurora oder Firefox OS releases, you can simply apply a snd. argument,</td></tr><tr><td class="line">102</td><td class="hits"></td><td class="source"> * which defines the browser type:</td></tr><tr><td class="line">103</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">104</td><td class="hits"></td><td class="source"> * ```bash</td></tr><tr><td class="line">105</td><td class="hits"></td><td class="source"> * $ dalek mytest.js -b firefox:aurora</td></tr><tr><td class="line">106</td><td class="hits"></td><td class="source"> * ```</td></tr><tr><td class="line">107</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">108</td><td class="hits"></td><td class="source"> * for Firefox Aurora, and if you would like to use the Firefox OS, just append `:os`:</td></tr><tr><td class="line">109</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">110</td><td class="hits"></td><td class="source"> * ```bash</td></tr><tr><td class="line">111</td><td class="hits"></td><td class="source"> * $ dalek mytest.js -b firefox:os</td></tr><tr><td class="line">112</td><td class="hits"></td><td class="source"> * ```</td></tr><tr><td class="line">113</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">114</td><td class="hits"></td><td class="source"> * This will only work if you installed your browser in the default locations,</td></tr><tr><td class="line">115</td><td class="hits"></td><td class="source"> * if the browsers binary is located in a non default location, you are able to specify</td></tr><tr><td class="line">116</td><td class="hits"></td><td class="source"> * its location in your [Dalekfile](/pages/config.html):</td></tr><tr><td class="line">117</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">118</td><td class="hits"></td><td class="source"> * ```javascript</td></tr><tr><td class="line">119</td><td class="hits"></td><td class="source"> * &quot;browsers&quot;: {</td></tr><tr><td class="line">120</td><td class="hits"></td><td class="source"> *   &quot;firefox&quot;: {</td></tr><tr><td class="line">121</td><td class="hits"></td><td class="source"> *     &quot;binary&quot;: &quot;/Applications/Custom Located Firefox.app/MacOS/Contents/firefox-bin&quot; </td></tr><tr><td class="line">122</td><td class="hits"></td><td class="source"> *   }</td></tr><tr><td class="line">123</td><td class="hits"></td><td class="source"> * }</td></tr><tr><td class="line">124</td><td class="hits"></td><td class="source"> * ```</td></tr><tr><td class="line">125</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">126</td><td class="hits"></td><td class="source"> * This also works for the aurora &amp; Firefox OS builds</td></tr><tr><td class="line">127</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">128</td><td class="hits"></td><td class="source"> * ```javascript</td></tr><tr><td class="line">129</td><td class="hits"></td><td class="source"> * &quot;browsers&quot;: {</td></tr><tr><td class="line">130</td><td class="hits"></td><td class="source"> *   &quot;firefox:aurora&quot;: {</td></tr><tr><td class="line">131</td><td class="hits"></td><td class="source"> *     &quot;binary&quot;: &quot;/Applications/Custom Located Firefox Aurora.app/MacOS/Contents/firefox-bin&quot; </td></tr><tr><td class="line">132</td><td class="hits"></td><td class="source"> *   }</td></tr><tr><td class="line">133</td><td class="hits"></td><td class="source"> * }</td></tr><tr><td class="line">134</td><td class="hits"></td><td class="source"> * ```</td></tr><tr><td class="line">135</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">136</td><td class="hits"></td><td class="source"> * @module DalekJS</td></tr><tr><td class="line">137</td><td class="hits"></td><td class="source"> * @class FirefoxDriver</td></tr><tr><td class="line">138</td><td class="hits"></td><td class="source"> * @namespace Browser</td></tr><tr><td class="line">139</td><td class="hits"></td><td class="source"> * @part Firefox</td></tr><tr><td class="line">140</td><td class="hits"></td><td class="source"> * @api</td></tr><tr><td class="line">141</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">142</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">143</td><td class="hits">1</td><td class="source">var FirefoxDriver = {</td></tr><tr><td class="line">144</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">145</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">146</td><td class="hits"></td><td class="source">   * Verbose version of the browser name</td></tr><tr><td class="line">147</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">148</td><td class="hits"></td><td class="source">   * @property longName</td></tr><tr><td class="line">149</td><td class="hits"></td><td class="source">   * @type string</td></tr><tr><td class="line">150</td><td class="hits"></td><td class="source">   * @default Mozilla Firefox</td></tr><tr><td class="line">151</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">152</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">153</td><td class="hits"></td><td class="source">  longName: 'Mozilla Firefox',</td></tr><tr><td class="line">154</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">155</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">156</td><td class="hits"></td><td class="source">   * Default port of the FirefoxWebDriverServer</td></tr><tr><td class="line">157</td><td class="hits"></td><td class="source">   * The port may change, cause the port conflict resolution</td></tr><tr><td class="line">158</td><td class="hits"></td><td class="source">   * tool might pick another one, if the default one is blocked</td></tr><tr><td class="line">159</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">160</td><td class="hits"></td><td class="source">   * @property port</td></tr><tr><td class="line">161</td><td class="hits"></td><td class="source">   * @type integer</td></tr><tr><td class="line">162</td><td class="hits"></td><td class="source">   * @default 9006</td></tr><tr><td class="line">163</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">164</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">165</td><td class="hits"></td><td class="source">  port: 9006,</td></tr><tr><td class="line">166</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">167</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">168</td><td class="hits"></td><td class="source">   * Default maximum port of the WebDriverServer</td></tr><tr><td class="line">169</td><td class="hits"></td><td class="source">   * The port is the highest port in the range that can be allocated</td></tr><tr><td class="line">170</td><td class="hits"></td><td class="source">   * by the WebDriverServer</td></tr><tr><td class="line">171</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">172</td><td class="hits"></td><td class="source">   * @property maxPort</td></tr><tr><td class="line">173</td><td class="hits"></td><td class="source">   * @type integer</td></tr><tr><td class="line">174</td><td class="hits"></td><td class="source">   * @default 9096</td></tr><tr><td class="line">175</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">176</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">177</td><td class="hits"></td><td class="source">  maxPort: 9096,</td></tr><tr><td class="line">178</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">179</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">180</td><td class="hits"></td><td class="source">   * Default port of the Marionette TCP service</td></tr><tr><td class="line">181</td><td class="hits"></td><td class="source">   * The port may change, cause the port conflict resolution</td></tr><tr><td class="line">182</td><td class="hits"></td><td class="source">   * tool might pick another one, if the default one is blocked</td></tr><tr><td class="line">183</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">184</td><td class="hits"></td><td class="source">   * @property marionettePort</td></tr><tr><td class="line">185</td><td class="hits"></td><td class="source">   * @type integer</td></tr><tr><td class="line">186</td><td class="hits"></td><td class="source">   * @default 2828</td></tr><tr><td class="line">187</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">188</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">189</td><td class="hits"></td><td class="source">  marionettePort: 2828,</td></tr><tr><td class="line">190</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">191</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">192</td><td class="hits"></td><td class="source">   * Default host of the FirefoxWebDriverServer</td></tr><tr><td class="line">193</td><td class="hits"></td><td class="source">   * The host may be overridden with</td></tr><tr><td class="line">194</td><td class="hits"></td><td class="source">   * a user configured value</td></tr><tr><td class="line">195</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">196</td><td class="hits"></td><td class="source">   * @property host</td></tr><tr><td class="line">197</td><td class="hits"></td><td class="source">   * @type string</td></tr><tr><td class="line">198</td><td class="hits"></td><td class="source">   * @default localhost</td></tr><tr><td class="line">199</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">200</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">201</td><td class="hits"></td><td class="source">  host: 'localhost',</td></tr><tr><td class="line">202</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">203</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">204</td><td class="hits"></td><td class="source">   * Default desired capabilities that should be</td></tr><tr><td class="line">205</td><td class="hits"></td><td class="source">   * transferred when the browser session gets requested</td></tr><tr><td class="line">206</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">207</td><td class="hits"></td><td class="source">   * @property desiredCapabilities</td></tr><tr><td class="line">208</td><td class="hits"></td><td class="source">   * @type object</td></tr><tr><td class="line">209</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">210</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">211</td><td class="hits"></td><td class="source">  desiredCapabilities: {</td></tr><tr><td class="line">212</td><td class="hits"></td><td class="source">    browserName: 'firefox'</td></tr><tr><td class="line">213</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">214</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">215</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">216</td><td class="hits"></td><td class="source">   * Driver defaults, what should the driver be able to access.</td></tr><tr><td class="line">217</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">218</td><td class="hits"></td><td class="source">   * @property driverDefaults</td></tr><tr><td class="line">219</td><td class="hits"></td><td class="source">   * @type object</td></tr><tr><td class="line">220</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">221</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">222</td><td class="hits"></td><td class="source">  driverDefaults: {</td></tr><tr><td class="line">223</td><td class="hits"></td><td class="source">    viewport: true,</td></tr><tr><td class="line">224</td><td class="hits"></td><td class="source">    status: true,</td></tr><tr><td class="line">225</td><td class="hits"></td><td class="source">    sessionInfo: true</td></tr><tr><td class="line">226</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">227</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">228</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">229</td><td class="hits"></td><td class="source">   * Root path of the FirefoxWebDriverServer</td></tr><tr><td class="line">230</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">231</td><td class="hits"></td><td class="source">   * @property path</td></tr><tr><td class="line">232</td><td class="hits"></td><td class="source">   * @type string</td></tr><tr><td class="line">233</td><td class="hits"></td><td class="source">   * @default ''</td></tr><tr><td class="line">234</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">235</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">236</td><td class="hits"></td><td class="source">  path: '',</td></tr><tr><td class="line">237</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">238</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">239</td><td class="hits"></td><td class="source">   * Path to the Firefox binary file</td></tr><tr><td class="line">240</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">241</td><td class="hits"></td><td class="source">   * @property binary</td></tr><tr><td class="line">242</td><td class="hits"></td><td class="source">   * @type string</td></tr><tr><td class="line">243</td><td class="hits"></td><td class="source">   * @default null</td></tr><tr><td class="line">244</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">245</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">246</td><td class="hits"></td><td class="source">  binary: null,</td></tr><tr><td class="line">247</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">248</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">249</td><td class="hits"></td><td class="source">   * Paths to the default Firefox binary files</td></tr><tr><td class="line">250</td><td class="hits"></td><td class="source">   * </td></tr><tr><td class="line">251</td><td class="hits"></td><td class="source">   * @property defaultBinaries</td></tr><tr><td class="line">252</td><td class="hits"></td><td class="source">   * @type object</td></tr><tr><td class="line">253</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">254</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">255</td><td class="hits"></td><td class="source">  defaultBinaries: {</td></tr><tr><td class="line">256</td><td class="hits"></td><td class="source">    default: 'firefox',</td></tr><tr><td class="line">257</td><td class="hits"></td><td class="source">    darwin: '/Applications/Firefox.app/Contents/MacOS/firefox-bin',</td></tr><tr><td class="line">258</td><td class="hits"></td><td class="source">    win32: process.env.ProgramFiles + '\\Mozilla Firefox\\firefox.exe',</td></tr><tr><td class="line">259</td><td class="hits"></td><td class="source">    win64: process.env['ProgramFiles(x86)'] + '\\Mozilla Firefox\\firefox.exe'</td></tr><tr><td class="line">260</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">261</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">262</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">263</td><td class="hits"></td><td class="source">   * Different browser types (Aurora / firefox OS) that can be controlled</td></tr><tr><td class="line">264</td><td class="hits"></td><td class="source">   * via the Firefox driver</td></tr><tr><td class="line">265</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">266</td><td class="hits"></td><td class="source">   * @property browserTypes</td></tr><tr><td class="line">267</td><td class="hits"></td><td class="source">   * @type object</td></tr><tr><td class="line">268</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">269</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">270</td><td class="hits"></td><td class="source">  browserTypes: {</td></tr><tr><td class="line">271</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">272</td><td class="hits"></td><td class="source">    /**</td></tr><tr><td class="line">273</td><td class="hits"></td><td class="source">     * Nightly Firefox</td></tr><tr><td class="line">274</td><td class="hits"></td><td class="source">     *</td></tr><tr><td class="line">275</td><td class="hits"></td><td class="source">     * @property nightly</td></tr><tr><td class="line">276</td><td class="hits"></td><td class="source">     * @type object</td></tr><tr><td class="line">277</td><td class="hits"></td><td class="source">     */</td></tr><tr><td class="line">278</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">279</td><td class="hits"></td><td class="source">    nightly: {</td></tr><tr><td class="line">280</td><td class="hits"></td><td class="source">      name: 'Firefox Nightly',</td></tr><tr><td class="line">281</td><td class="hits"></td><td class="source">      linux: 'firefox',</td></tr><tr><td class="line">282</td><td class="hits"></td><td class="source">      darwin: '/Applications/FirefoxNightlyDebug.app/Contents/MacOS/firefox-bin',</td></tr><tr><td class="line">283</td><td class="hits"></td><td class="source">      win32: process.env.ProgramFiles + '\\Nightly\\firefox.exe',</td></tr><tr><td class="line">284</td><td class="hits"></td><td class="source">      win64: process.env['ProgramFiles(x86)'] + '\\Mozilla Firefox Nightly\\firefox.exe'</td></tr><tr><td class="line">285</td><td class="hits"></td><td class="source">    },</td></tr><tr><td class="line">286</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">287</td><td class="hits"></td><td class="source">    /**</td></tr><tr><td class="line">288</td><td class="hits"></td><td class="source">     * Firefox Aurora</td></tr><tr><td class="line">289</td><td class="hits"></td><td class="source">     *</td></tr><tr><td class="line">290</td><td class="hits"></td><td class="source">     * @property aurora</td></tr><tr><td class="line">291</td><td class="hits"></td><td class="source">     * @type object</td></tr><tr><td class="line">292</td><td class="hits"></td><td class="source">     */</td></tr><tr><td class="line">293</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">294</td><td class="hits"></td><td class="source">    aurora: {</td></tr><tr><td class="line">295</td><td class="hits"></td><td class="source">      name: 'Firefox Aurora',</td></tr><tr><td class="line">296</td><td class="hits"></td><td class="source">      linux: 'firefox',</td></tr><tr><td class="line">297</td><td class="hits"></td><td class="source">      darwin: '/Applications/FirefoxAuroraDebug.app/Contents/MacOS/firefox-bin',</td></tr><tr><td class="line">298</td><td class="hits"></td><td class="source">      win32: process.env.ProgramFiles + '\\AuroraDebug\\firefox.exe',</td></tr><tr><td class="line">299</td><td class="hits"></td><td class="source">      win64: process.env['ProgramFiles(x86)'] + '\\Mozilla AuroraDebug\\firefox.exe'</td></tr><tr><td class="line">300</td><td class="hits"></td><td class="source">    },</td></tr><tr><td class="line">301</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">302</td><td class="hits"></td><td class="source">    /**</td></tr><tr><td class="line">303</td><td class="hits"></td><td class="source">     * Firefox OS</td></tr><tr><td class="line">304</td><td class="hits"></td><td class="source">     *</td></tr><tr><td class="line">305</td><td class="hits"></td><td class="source">     * @property os</td></tr><tr><td class="line">306</td><td class="hits"></td><td class="source">     * @type object</td></tr><tr><td class="line">307</td><td class="hits"></td><td class="source">     */</td></tr><tr><td class="line">308</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">309</td><td class="hits"></td><td class="source">    os: {</td></tr><tr><td class="line">310</td><td class="hits"></td><td class="source">      name: 'Firefox OS',</td></tr><tr><td class="line">311</td><td class="hits"></td><td class="source">      linux: 'b2g',</td></tr><tr><td class="line">312</td><td class="hits"></td><td class="source">      darwin: '/Applications/B2G.app/Contents/MacOS/b2g',</td></tr><tr><td class="line">313</td><td class="hits"></td><td class="source">      win32: process.env.ProgramFiles + '\\B2G\\b2g.exe',</td></tr><tr><td class="line">314</td><td class="hits"></td><td class="source">      win64: process.env.ProgramFiles + '\\B2G\\b2g.exe'</td></tr><tr><td class="line">315</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">316</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">317</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">318</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">319</td><td class="hits"></td><td class="source">   * Child process instance of the Firefox browser</td></tr><tr><td class="line">320</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">321</td><td class="hits"></td><td class="source">   * @property spawned</td></tr><tr><td class="line">322</td><td class="hits"></td><td class="source">   * @type null|Object</td></tr><tr><td class="line">323</td><td class="hits"></td><td class="source">   * @default null</td></tr><tr><td class="line">324</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">325</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">326</td><td class="hits"></td><td class="source">  spawned: null,</td></tr><tr><td class="line">327</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">328</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">329</td><td class="hits"></td><td class="source">   * Collected data about the created profile,</td></tr><tr><td class="line">330</td><td class="hits"></td><td class="source">   * path, name, etc.</td></tr><tr><td class="line">331</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">332</td><td class="hits"></td><td class="source">   * @property profile</td></tr><tr><td class="line">333</td><td class="hits"></td><td class="source">   * @type null|object</td></tr><tr><td class="line">334</td><td class="hits"></td><td class="source">   * @default null</td></tr><tr><td class="line">335</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">336</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">337</td><td class="hits"></td><td class="source">  profile: null,</td></tr><tr><td class="line">338</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">339</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">340</td><td class="hits"></td><td class="source">   * Resolves the driver port</td></tr><tr><td class="line">341</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">342</td><td class="hits"></td><td class="source">   * @method getPort</td></tr><tr><td class="line">343</td><td class="hits"></td><td class="source">   * @return {integer} port WebDriver server port</td></tr><tr><td class="line">344</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">345</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">346</td><td class="hits"></td><td class="source">  getPort: function () {</td></tr><tr class="hit"><td class="line">347</td><td class="hits">1</td><td class="source">    return this.port;</td></tr><tr><td class="line">348</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">349</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">350</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">351</td><td class="hits"></td><td class="source">   * Resolves the maximum range for the driver port</td></tr><tr><td class="line">352</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">353</td><td class="hits"></td><td class="source">   * @method getMaxPort</td></tr><tr><td class="line">354</td><td class="hits"></td><td class="source">   * @return {integer} port Max WebDriver server port range</td></tr><tr><td class="line">355</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">356</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">357</td><td class="hits"></td><td class="source">  getMaxPort: function () {</td></tr><tr class="miss"><td class="line">358</td><td class="hits">0</td><td class="source">    return this.maxPort;</td></tr><tr><td class="line">359</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">360</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">361</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">362</td><td class="hits"></td><td class="source">   * Resolves the marionette port</td></tr><tr><td class="line">363</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">364</td><td class="hits"></td><td class="source">   * @method getMarionettePort</td></tr><tr><td class="line">365</td><td class="hits"></td><td class="source">   * @return {integer} port Marionette server port</td></tr><tr><td class="line">366</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">367</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">368</td><td class="hits"></td><td class="source">  getMarionettePort: function () {</td></tr><tr class="hit"><td class="line">369</td><td class="hits">1</td><td class="source">    return this.marionettePort;</td></tr><tr><td class="line">370</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">371</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">372</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">373</td><td class="hits"></td><td class="source">   * Returns the driver host</td></tr><tr><td class="line">374</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">375</td><td class="hits"></td><td class="source">   * @method getHost</td></tr><tr><td class="line">376</td><td class="hits"></td><td class="source">   * @return {string} host WebDriver server hostname</td></tr><tr><td class="line">377</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">378</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">379</td><td class="hits"></td><td class="source">  getHost: function () {</td></tr><tr class="hit"><td class="line">380</td><td class="hits">1</td><td class="source">    return this.host;</td></tr><tr><td class="line">381</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">382</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">383</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">384</td><td class="hits"></td><td class="source">   * Launches the FirefoxWebDriverServer, </td></tr><tr><td class="line">385</td><td class="hits"></td><td class="source">   * the marionette client, &amp; the browser.</td></tr><tr><td class="line">386</td><td class="hits"></td><td class="source">   * Creates a user profile for the browser </td></tr><tr><td class="line">387</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">388</td><td class="hits"></td><td class="source">   * @method launch</td></tr><tr><td class="line">389</td><td class="hits"></td><td class="source">   * @param {object} configuration Browser configuration</td></tr><tr><td class="line">390</td><td class="hits"></td><td class="source">   * @param {EventEmitter2} events EventEmitter (Reporter Emitter instance)</td></tr><tr><td class="line">391</td><td class="hits"></td><td class="source">   * @param {Dalek.Internal.Config} config Dalek configuration class</td></tr><tr><td class="line">392</td><td class="hits"></td><td class="source">   * @return {object} promise Browser promise</td></tr><tr><td class="line">393</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">394</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">395</td><td class="hits"></td><td class="source">  launch: function (configuration, events, config) {</td></tr><tr class="miss"><td class="line">396</td><td class="hits">0</td><td class="source">    var deferred = Q.defer();</td></tr><tr><td class="line">397</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">398</td><td class="hits"></td><td class="source">    // init the webdriver server, </td></tr><tr><td class="line">399</td><td class="hits"></td><td class="source">    // marionette client, event glue</td></tr><tr><td class="line">400</td><td class="hits"></td><td class="source">    // and configuration settings</td></tr><tr class="miss"><td class="line">401</td><td class="hits">0</td><td class="source">    configuration = this._initialize({</td></tr><tr><td class="line">402</td><td class="hits"></td><td class="source">      userconfig: configuration,</td></tr><tr><td class="line">403</td><td class="hits"></td><td class="source">      reporterEvents: events,</td></tr><tr><td class="line">404</td><td class="hits"></td><td class="source">      config: config,</td></tr><tr><td class="line">405</td><td class="hits"></td><td class="source">      events: new Events()</td></tr><tr><td class="line">406</td><td class="hits"></td><td class="source">    });</td></tr><tr><td class="line">407</td><td class="hits"></td><td class="source">    </td></tr><tr><td class="line">408</td><td class="hits"></td><td class="source">    // check for a user set port</td></tr><tr class="miss"><td class="line">409</td><td class="hits">0</td><td class="source">    var browsers = this.config.get('browsers');</td></tr><tr class="miss"><td class="line">410</td><td class="hits">0</td><td class="source">    if (browsers &amp;&amp; Array.isArray(browsers)) {</td></tr><tr class="miss"><td class="line">411</td><td class="hits">0</td><td class="source">      browsers.forEach(this._checkUserDefinedPorts.bind(this));</td></tr><tr><td class="line">412</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">413</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">414</td><td class="hits"></td><td class="source">    // check the path of the browser binary</td></tr><tr class="miss"><td class="line">415</td><td class="hits">0</td><td class="source">    Q.when(this.findBrowserBinary(configuration))</td></tr><tr><td class="line">416</td><td class="hits"></td><td class="source">     .then(this._afterBinaryFound.bind(this, configuration, deferred));</td></tr><tr><td class="line">417</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">418</td><td class="hits">0</td><td class="source">    return deferred.promise;</td></tr><tr><td class="line">419</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">420</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">421</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">422</td><td class="hits"></td><td class="source">   * Shuts down the TCP (Marionette) &amp; HTTP connection (Webdriver),</td></tr><tr><td class="line">423</td><td class="hits"></td><td class="source">   * then kills the browser process &amp; cleans up the profiles</td></tr><tr><td class="line">424</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">425</td><td class="hits"></td><td class="source">   * @method kill</td></tr><tr><td class="line">426</td><td class="hits"></td><td class="source">   * @chainable</td></tr><tr><td class="line">427</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">428</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">429</td><td class="hits"></td><td class="source">  kill: function () {</td></tr><tr class="miss"><td class="line">430</td><td class="hits">0</td><td class="source">    Q.all([</td></tr><tr><td class="line">431</td><td class="hits"></td><td class="source">      // shutdown Marionette client</td></tr><tr><td class="line">432</td><td class="hits"></td><td class="source">      this.marionette.kill(),</td></tr><tr><td class="line">433</td><td class="hits"></td><td class="source">      // shutdown webdriver server</td></tr><tr><td class="line">434</td><td class="hits"></td><td class="source">      this.webDriverServer.kill()</td></tr><tr><td class="line">435</td><td class="hits"></td><td class="source">    ]).then(this._killProcess.bind(this));</td></tr><tr><td class="line">436</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">437</td><td class="hits">0</td><td class="source">    return this;</td></tr><tr><td class="line">438</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">439</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">440</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">441</td><td class="hits"></td><td class="source">   * Locates the browser binary</td></tr><tr><td class="line">442</td><td class="hits"></td><td class="source">   * </td></tr><tr><td class="line">443</td><td class="hits"></td><td class="source">   * @method findBrowserBinary</td></tr><tr><td class="line">444</td><td class="hits"></td><td class="source">   * @param {object} options Config options</td></tr><tr><td class="line">445</td><td class="hits"></td><td class="source">   * @return {object} Promise </td></tr><tr><td class="line">446</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">447</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">448</td><td class="hits"></td><td class="source">  findBrowserBinary: function (options) {</td></tr><tr class="miss"><td class="line">449</td><td class="hits">0</td><td class="source">    var deferred = Q.defer();</td></tr><tr><td class="line">450</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">451</td><td class="hits"></td><td class="source">    // check if the user has set a custom binary</td></tr><tr class="miss"><td class="line">452</td><td class="hits">0</td><td class="source">    if (options &amp;&amp; options.binary) {</td></tr><tr class="miss"><td class="line">453</td><td class="hits">0</td><td class="source">      this._checkUserSetBinary(options.binary, deferred);</td></tr><tr class="miss"><td class="line">454</td><td class="hits">0</td><td class="source">      return deferred.promise;</td></tr><tr><td class="line">455</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">456</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">457</td><td class="hits"></td><td class="source">    // get the defaukt binary for this OS</td></tr><tr class="miss"><td class="line">458</td><td class="hits">0</td><td class="source">    var defaultBinary = this._getDefaultBinary();</td></tr><tr><td class="line">459</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">460</td><td class="hits"></td><td class="source">    // check if the binary exists</td></tr><tr class="miss"><td class="line">461</td><td class="hits">0</td><td class="source">    if (fs.existsSync(defaultBinary)) {</td></tr><tr class="miss"><td class="line">462</td><td class="hits">0</td><td class="source">      this.binary = defaultBinary;</td></tr><tr class="miss"><td class="line">463</td><td class="hits">0</td><td class="source">      deferred.resolve(defaultBinary);</td></tr><tr><td class="line">464</td><td class="hits"></td><td class="source">    } else {</td></tr><tr class="miss"><td class="line">465</td><td class="hits">0</td><td class="source">      var msg = 'dalek-driver-firefox: Binary not found: ' + defaultBinary;</td></tr><tr class="miss"><td class="line">466</td><td class="hits">0</td><td class="source">      this.reporterEvents.emit('error', msg);</td></tr><tr class="miss"><td class="line">467</td><td class="hits">0</td><td class="source">      deferred.reject({error: true, msg: msg});</td></tr><tr><td class="line">468</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">469</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">470</td><td class="hits">0</td><td class="source">    return deferred.promise;</td></tr><tr><td class="line">471</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">472</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">473</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">474</td><td class="hits"></td><td class="source">   * Makes all needed modifications after we are sure if the</td></tr><tr><td class="line">475</td><td class="hits"></td><td class="source">   * browser binary has been found</td></tr><tr><td class="line">476</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">477</td><td class="hits"></td><td class="source">   * @method _afterBinaryFound</td></tr><tr><td class="line">478</td><td class="hits"></td><td class="source">   * @param {object} configuration User configuration</td></tr><tr><td class="line">479</td><td class="hits"></td><td class="source">   * @param {object} deferred Promise</td></tr><tr><td class="line">480</td><td class="hits"></td><td class="source">   * @chainable</td></tr><tr><td class="line">481</td><td class="hits"></td><td class="source">   * @private</td></tr><tr><td class="line">482</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">483</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">484</td><td class="hits"></td><td class="source">  _afterBinaryFound: function (configuration, deferred) {</td></tr><tr><td class="line">485</td><td class="hits"></td><td class="source">    // generate the verbose browser name</td></tr><tr class="miss"><td class="line">486</td><td class="hits">0</td><td class="source">    this.longName = this._modifyVerboseBrowserName(configuration);</td></tr><tr><td class="line">487</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">488</td><td class="hits"></td><td class="source">    // check if we are driving a desktop browser</td></tr><tr><td class="line">489</td><td class="hits"></td><td class="source">    // when, create a profile, else, not</td></tr><tr class="miss"><td class="line">490</td><td class="hits">0</td><td class="source">    if (configuration.type !== 'os') {</td></tr><tr class="miss"><td class="line">491</td><td class="hits">0</td><td class="source">      Q.when(this._createProfile())</td></tr><tr><td class="line">492</td><td class="hits"></td><td class="source">       .then(this._afterDesktopBinaryFound.bind(this, deferred, configuration));</td></tr><tr><td class="line">493</td><td class="hits"></td><td class="source">    } else {</td></tr><tr class="miss"><td class="line">494</td><td class="hits">0</td><td class="source">      this._startBrowser(null, 'os', deferred);</td></tr><tr><td class="line">495</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">496</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">497</td><td class="hits">0</td><td class="source">    return this;</td></tr><tr><td class="line">498</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">499</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">500</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">501</td><td class="hits"></td><td class="source">   * Modifies the verbose browser name</td></tr><tr><td class="line">502</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">503</td><td class="hits"></td><td class="source">   * @method _modifyVerboseBrowserName</td></tr><tr><td class="line">504</td><td class="hits"></td><td class="source">   * @param {object} configuration User configuration</td></tr><tr><td class="line">505</td><td class="hits"></td><td class="source">   * @return {string} Verbose browser name</td></tr><tr><td class="line">506</td><td class="hits"></td><td class="source">   * @private</td></tr><tr><td class="line">507</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">508</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">509</td><td class="hits"></td><td class="source">  _modifyVerboseBrowserName: function (configuration) {</td></tr><tr class="miss"><td class="line">510</td><td class="hits">0</td><td class="source">    if (configuration.type &amp;&amp; this.browserTypes[configuration.type]) {</td></tr><tr class="miss"><td class="line">511</td><td class="hits">0</td><td class="source">      return this.browserTypes[configuration.type].name + ' (' + this.longName + ')';</td></tr><tr><td class="line">512</td><td class="hits"></td><td class="source">    } else {</td></tr><tr class="miss"><td class="line">513</td><td class="hits">0</td><td class="source">      return this.longName;</td></tr><tr><td class="line">514</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">515</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">516</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">517</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">518</td><td class="hits"></td><td class="source">   * Initiates the browser startup after the desktop binary has been found</td></tr><tr><td class="line">519</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">520</td><td class="hits"></td><td class="source">   * @method _afterDesktopBinaryFound</td></tr><tr><td class="line">521</td><td class="hits"></td><td class="source">   * @param {object} deferred Promise</td></tr><tr><td class="line">522</td><td class="hits"></td><td class="source">   * @param {object} profile Profile data</td></tr><tr><td class="line">523</td><td class="hits"></td><td class="source">   * @chainable</td></tr><tr><td class="line">524</td><td class="hits"></td><td class="source">   * @private</td></tr><tr><td class="line">525</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">526</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">527</td><td class="hits"></td><td class="source">  _afterDesktopBinaryFound: function (deferred, configuration) {</td></tr><tr class="miss"><td class="line">528</td><td class="hits">0</td><td class="source">    this._startBrowser(this.profile.path, this.profile.name, deferred, configuration);</td></tr><tr class="miss"><td class="line">529</td><td class="hits">0</td><td class="source">    return this;</td></tr><tr><td class="line">530</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">531</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">532</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">533</td><td class="hits"></td><td class="source">   * Kills the currently running browser process</td></tr><tr><td class="line">534</td><td class="hits"></td><td class="source">   * </td></tr><tr><td class="line">535</td><td class="hits"></td><td class="source">   * @method _killProcess</td></tr><tr><td class="line">536</td><td class="hits"></td><td class="source">   * @chainable</td></tr><tr><td class="line">537</td><td class="hits"></td><td class="source">   * @priavte</td></tr><tr><td class="line">538</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">539</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">540</td><td class="hits"></td><td class="source">  _killProcess: function () {</td></tr><tr><td class="line">541</td><td class="hits"></td><td class="source">    // kill the browser process itself</td></tr><tr class="miss"><td class="line">542</td><td class="hits">0</td><td class="source">    this.spawned.kill('SIGTERM');</td></tr><tr><td class="line">543</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">544</td><td class="hits"></td><td class="source">    // check if we need to clean up some created profiles</td></tr><tr><td class="line">545</td><td class="hits"></td><td class="source">    // should always be the case except for Firefox OS</td></tr><tr class="miss"><td class="line">546</td><td class="hits">0</td><td class="source">    if (this.profile &amp;&amp; this.profile.path) {</td></tr><tr class="miss"><td class="line">547</td><td class="hits">0</td><td class="source">      rimraf.sync(this.profile.path);</td></tr><tr><td class="line">548</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">549</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">550</td><td class="hits">0</td><td class="source">    return this;</td></tr><tr><td class="line">551</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">552</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">553</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">554</td><td class="hits"></td><td class="source">   * Initializes config &amp; properties</td></tr><tr><td class="line">555</td><td class="hits"></td><td class="source">   * </td></tr><tr><td class="line">556</td><td class="hits"></td><td class="source">   * @method  _initiaize</td></tr><tr><td class="line">557</td><td class="hits"></td><td class="source">   * @param {object} opts Config options</td></tr><tr><td class="line">558</td><td class="hits"></td><td class="source">   * @return {object} Processed userr config</td></tr><tr><td class="line">559</td><td class="hits"></td><td class="source">   * @private</td></tr><tr><td class="line">560</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">561</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">562</td><td class="hits"></td><td class="source">  _initialize: function (opts) {</td></tr><tr><td class="line">563</td><td class="hits"></td><td class="source">    // store config class</td></tr><tr class="miss"><td class="line">564</td><td class="hits">0</td><td class="source">    this.config = opts.config;</td></tr><tr><td class="line">565</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">566</td><td class="hits"></td><td class="source">    // glue events</td></tr><tr class="miss"><td class="line">567</td><td class="hits">0</td><td class="source">    this.events = opts.events;</td></tr><tr class="miss"><td class="line">568</td><td class="hits">0</td><td class="source">    this.events.setMaxListeners(0);</td></tr><tr class="miss"><td class="line">569</td><td class="hits">0</td><td class="source">    this.reporterEvents = opts.reporterEvents;</td></tr><tr><td class="line">570</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">571</td><td class="hits"></td><td class="source">    // setup Marionette client &amp; Webdriver server</td></tr><tr class="miss"><td class="line">572</td><td class="hits">0</td><td class="source">    this.marionette = new Marionette(this.events);</td></tr><tr class="miss"><td class="line">573</td><td class="hits">0</td><td class="source">    this.webDriverServer = new WebDriverServer(this.events);</td></tr><tr><td class="line">574</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">575</td><td class="hits">0</td><td class="source">    return opts.userconfig === null ? {} : opts.userconfig;</td></tr><tr><td class="line">576</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">577</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">578</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">579</td><td class="hits"></td><td class="source">   * Get the default binary location</td></tr><tr><td class="line">580</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">581</td><td class="hits"></td><td class="source">   * @method _getDefaultBinary</td></tr><tr><td class="line">582</td><td class="hits"></td><td class="source">   * @return {string} Path to binary</td></tr><tr><td class="line">583</td><td class="hits"></td><td class="source">   * @private</td></tr><tr><td class="line">584</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">585</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">586</td><td class="hits"></td><td class="source">  _getDefaultBinary: function () {</td></tr><tr class="miss"><td class="line">587</td><td class="hits">0</td><td class="source">    var platform = process.platform;</td></tr><tr><td class="line">588</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">589</td><td class="hits"></td><td class="source">    // check default binary for linuy</td></tr><tr class="miss"><td class="line">590</td><td class="hits">0</td><td class="source">    if (platform !== 'darwin' &amp;&amp; platform !== 'win32' &amp;&amp; this.defaultBinaries[platform]) {</td></tr><tr class="miss"><td class="line">591</td><td class="hits">0</td><td class="source">      return which(this.defaultBinaries.linux);</td></tr><tr><td class="line">592</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">593</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">594</td><td class="hits"></td><td class="source">    // check to see if we are on Windows x64</td></tr><tr class="miss"><td class="line">595</td><td class="hits">0</td><td class="source">    if (platform === 'win32' &amp;&amp; process.arch === 'x64') {</td></tr><tr class="miss"><td class="line">596</td><td class="hits">0</td><td class="source">      platform = 'win64';</td></tr><tr><td class="line">597</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">598</td><td class="hits"></td><td class="source">	</td></tr><tr class="miss"><td class="line">599</td><td class="hits">0</td><td class="source">    return this.defaultBinaries[platform] ?</td></tr><tr><td class="line">600</td><td class="hits"></td><td class="source">      this.defaultBinaries[platform] :</td></tr><tr><td class="line">601</td><td class="hits"></td><td class="source">      which(this.defaultBinaries.default);</td></tr><tr><td class="line">602</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">603</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">604</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">605</td><td class="hits"></td><td class="source">   * Launches the browser</td></tr><tr><td class="line">606</td><td class="hits"></td><td class="source">   * </td></tr><tr><td class="line">607</td><td class="hits"></td><td class="source">   * @method _startBrowser</td></tr><tr><td class="line">608</td><td class="hits"></td><td class="source">   * @param {string} profilePath Directory that contains the profile</td></tr><tr><td class="line">609</td><td class="hits"></td><td class="source">   * @param {string} profileName Name of the profile to use</td></tr><tr><td class="line">610</td><td class="hits"></td><td class="source">   * @param {object} deferred Promise</td></tr><tr><td class="line">611</td><td class="hits"></td><td class="source">   * @private</td></tr><tr><td class="line">612</td><td class="hits"></td><td class="source">   * @chainable</td></tr><tr><td class="line">613</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">614</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">615</td><td class="hits"></td><td class="source">  _startBrowser: function (profilePath, profileName, deferred, configuration) {</td></tr><tr class="miss"><td class="line">616</td><td class="hits">0</td><td class="source">    var df = Q.defer();</td></tr><tr class="miss"><td class="line">617</td><td class="hits">0</td><td class="source">    var args = [];</td></tr><tr><td class="line">618</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">619</td><td class="hits"></td><td class="source">    // set args based on environment</td></tr><tr class="miss"><td class="line">620</td><td class="hits">0</td><td class="source">    if (profileName !== 'os') {</td></tr><tr class="miss"><td class="line">621</td><td class="hits">0</td><td class="source">      args = ['-marionette', '-turbo', '-profile', profilePath, '-no-remote', '-url', 'about:blank'];</td></tr><tr><td class="line">622</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">623</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">624</td><td class="hits"></td><td class="source">    // start the browser</td></tr><tr class="miss"><td class="line">625</td><td class="hits">0</td><td class="source">    this.spawned = spawn(this.binary, args);</td></tr><tr><td class="line">626</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">627</td><td class="hits"></td><td class="source">    // kind of an ugly hack, but I have no other idea to</td></tr><tr><td class="line">628</td><td class="hits"></td><td class="source">    // than to wait for 2 secs to ensure Firefox runs on windows</td></tr><tr class="miss"><td class="line">629</td><td class="hits">0</td><td class="source">    if (process.platform === 'win32' || (configuration &amp;&amp; !configuration.type)) {</td></tr><tr class="miss"><td class="line">630</td><td class="hits">0</td><td class="source">      this.interval = setInterval(this._scanMarionettePort.bind(this, df), 50);</td></tr><tr><td class="line">631</td><td class="hits"></td><td class="source">    } else {</td></tr><tr class="miss"><td class="line">632</td><td class="hits">0</td><td class="source">      this.spawned.stdout.on('data', this._onBrowserStartup.bind(this, df));</td></tr><tr><td class="line">633</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">634</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">635</td><td class="hits"></td><td class="source">    // connect to the marionette socket server</td></tr><tr><td class="line">636</td><td class="hits"></td><td class="source">    // and the webdriver server &amp; resolve the promise when done</td></tr><tr class="miss"><td class="line">637</td><td class="hits">0</td><td class="source">    df.promise.then(this._resolvePort.bind(this, deferred, profileName));</td></tr><tr class="miss"><td class="line">638</td><td class="hits">0</td><td class="source">    return this;</td></tr><tr><td class="line">639</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">640</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">641</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">642</td><td class="hits"></td><td class="source">   * Repeatadly checks the status of the marionette port</td></tr><tr><td class="line">643</td><td class="hits"></td><td class="source">   * </td></tr><tr><td class="line">644</td><td class="hits"></td><td class="source">   * @method _scanMarionettePort</td></tr><tr><td class="line">645</td><td class="hits"></td><td class="source">   * @param {object} df Promise</td></tr><tr><td class="line">646</td><td class="hits"></td><td class="source">   * @private</td></tr><tr><td class="line">647</td><td class="hits"></td><td class="source">   * @chainable</td></tr><tr><td class="line">648</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">649</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">650</td><td class="hits"></td><td class="source">  _scanMarionettePort: function (df) {</td></tr><tr class="miss"><td class="line">651</td><td class="hits">0</td><td class="source">    portscanner.checkPortStatus(this.getMarionettePort(), this.getHost(), this._startByInterval.bind(this, df));</td></tr><tr class="miss"><td class="line">652</td><td class="hits">0</td><td class="source">    return this;</td></tr><tr><td class="line">653</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">654</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">655</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">656</td><td class="hits"></td><td class="source">   * Checks if the browser is available by listening on the marionette socket</td></tr><tr><td class="line">657</td><td class="hits"></td><td class="source">   * </td></tr><tr><td class="line">658</td><td class="hits"></td><td class="source">   * @method _startByInterval</td></tr><tr><td class="line">659</td><td class="hits"></td><td class="source">   * @param {object} df Promise</td></tr><tr><td class="line">660</td><td class="hits"></td><td class="source">   * @param {object} interval Reference to the portchecker interval</td></tr><tr><td class="line">661</td><td class="hits"></td><td class="source">   * @param {object|null} err Error or null</td></tr><tr><td class="line">662</td><td class="hits"></td><td class="source">   * @param {string} status Status of the marionette port</td></tr><tr><td class="line">663</td><td class="hits"></td><td class="source">   * @private</td></tr><tr><td class="line">664</td><td class="hits"></td><td class="source">   * @chainable</td></tr><tr><td class="line">665</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">666</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">667</td><td class="hits"></td><td class="source">  _startByInterval: function (df, err, status) {</td></tr><tr class="miss"><td class="line">668</td><td class="hits">0</td><td class="source">    if (status === 'open') {</td></tr><tr class="miss"><td class="line">669</td><td class="hits">0</td><td class="source">      clearInterval(this.interval);</td></tr><tr class="miss"><td class="line">670</td><td class="hits">0</td><td class="source">      df.resolve();</td></tr><tr><td class="line">671</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">672</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">673</td><td class="hits">0</td><td class="source">    return this;</td></tr><tr><td class="line">674</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">675</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">676</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">677</td><td class="hits"></td><td class="source">   * Process user defined ports</td></tr><tr><td class="line">678</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">679</td><td class="hits"></td><td class="source">   * @method _checkUserDefinedPorts</td></tr><tr><td class="line">680</td><td class="hits"></td><td class="source">   * @param {object} browser Browser configuration</td></tr><tr><td class="line">681</td><td class="hits"></td><td class="source">   * @chainable</td></tr><tr><td class="line">682</td><td class="hits"></td><td class="source">   * @private</td></tr><tr><td class="line">683</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">684</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">685</td><td class="hits"></td><td class="source">  _checkUserDefinedPorts: function (browser) {</td></tr><tr><td class="line">686</td><td class="hits"></td><td class="source">    // check for a single defined port</td></tr><tr class="miss"><td class="line">687</td><td class="hits">0</td><td class="source">    if (browser.firefox &amp;&amp; browser.firefox.port) {</td></tr><tr class="miss"><td class="line">688</td><td class="hits">0</td><td class="source">      this.port = parseInt(browser.firefox.port, 10);</td></tr><tr class="miss"><td class="line">689</td><td class="hits">0</td><td class="source">      this.maxPort = this.port + 90;</td></tr><tr class="miss"><td class="line">690</td><td class="hits">0</td><td class="source">      this.reporterEvents.emit('report:log:system', 'dalek-browser-firefox: Switching to user defined port: ' + this.port);</td></tr><tr><td class="line">691</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">692</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">693</td><td class="hits"></td><td class="source">    // check for a port range</td></tr><tr class="miss"><td class="line">694</td><td class="hits">0</td><td class="source">    if (browser.firefox &amp;&amp; browser.firefox.portRange &amp;&amp; browser.firefox.portRange.length === 2) {</td></tr><tr class="miss"><td class="line">695</td><td class="hits">0</td><td class="source">      this.port = parseInt(browser.firefox.portRange[0], 10);</td></tr><tr class="miss"><td class="line">696</td><td class="hits">0</td><td class="source">      this.maxPort = parseInt(browser.firefox.portRange[1], 10);</td></tr><tr class="miss"><td class="line">697</td><td class="hits">0</td><td class="source">      this.reporterEvents.emit('report:log:system', 'dalek-browser-firefox: Switching to user defined port(s): ' + this.port + ' -&gt; ' + this.maxPort);</td></tr><tr><td class="line">698</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">699</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">700</td><td class="hits">0</td><td class="source">    return this;</td></tr><tr><td class="line">701</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">702</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">703</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">704</td><td class="hits"></td><td class="source">   * Resolve the WebDriverServer port</td></tr><tr><td class="line">705</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">706</td><td class="hits"></td><td class="source">   * @method _resolvePort</td></tr><tr><td class="line">707</td><td class="hits"></td><td class="source">   * @param {object} deferred Promise</td></tr><tr><td class="line">708</td><td class="hits"></td><td class="source">   * @param {string} profileName Name of the profile</td></tr><tr><td class="line">709</td><td class="hits"></td><td class="source">   * @chainable</td></tr><tr><td class="line">710</td><td class="hits"></td><td class="source">   * @private</td></tr><tr><td class="line">711</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">712</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">713</td><td class="hits"></td><td class="source">  _resolvePort: function (deferred, profileName) {</td></tr><tr><td class="line">714</td><td class="hits"></td><td class="source">    // check if the current port is in use, if so, scan for free ports</td></tr><tr class="miss"><td class="line">715</td><td class="hits">0</td><td class="source">    portscanner.findAPortNotInUse(</td></tr><tr><td class="line">716</td><td class="hits"></td><td class="source">      this.getPort(),</td></tr><tr><td class="line">717</td><td class="hits"></td><td class="source">      this.getMaxPort(),</td></tr><tr><td class="line">718</td><td class="hits"></td><td class="source">      this.getHost(),</td></tr><tr><td class="line">719</td><td class="hits"></td><td class="source">      this._afterPortResolved.bind(this, deferred, profileName)</td></tr><tr><td class="line">720</td><td class="hits"></td><td class="source">    );</td></tr><tr><td class="line">721</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">722</td><td class="hits">0</td><td class="source">    return this;</td></tr><tr><td class="line">723</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">724</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">725</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">726</td><td class="hits"></td><td class="source">   * Resolve the WebDriverServer port</td></tr><tr><td class="line">727</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">728</td><td class="hits"></td><td class="source">   * @method _resolvePort</td></tr><tr><td class="line">729</td><td class="hits"></td><td class="source">   * @param {object} deferred Promise</td></tr><tr><td class="line">730</td><td class="hits"></td><td class="source">   * @param {string} profileName Name of the profile</td></tr><tr><td class="line">731</td><td class="hits"></td><td class="source">   * @param {object|null} error Error object if there is one</td></tr><tr><td class="line">732</td><td class="hits"></td><td class="source">   * @param {integer} port Resolved port</td></tr><tr><td class="line">733</td><td class="hits"></td><td class="source">   * @chainable</td></tr><tr><td class="line">734</td><td class="hits"></td><td class="source">   * @private</td></tr><tr><td class="line">735</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">736</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">737</td><td class="hits"></td><td class="source">  _afterPortResolved: function (deferred, profileName, error, port) {</td></tr><tr><td class="line">738</td><td class="hits"></td><td class="source">    // check for errors</td></tr><tr class="miss"><td class="line">739</td><td class="hits">0</td><td class="source">    if (error !== null &amp;&amp; error.code !== 'ECONNREFUSED') {</td></tr><tr class="miss"><td class="line">740</td><td class="hits">0</td><td class="source">      this.reporterEvents.emit('error', 'dalek-browser-firefox: Error starting WebDriverServer, port ' + port + ' in use');</td></tr><tr class="miss"><td class="line">741</td><td class="hits">0</td><td class="source">      deferred.reject(error);</td></tr><tr class="miss"><td class="line">742</td><td class="hits">0</td><td class="source">      process.exit();</td></tr><tr><td class="line">743</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">744</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">745</td><td class="hits"></td><td class="source">    // check if the port was blocked &amp; if we need to switch to another port</td></tr><tr class="miss"><td class="line">746</td><td class="hits">0</td><td class="source">    if (this.port !== port) {</td></tr><tr class="miss"><td class="line">747</td><td class="hits">0</td><td class="source">      this.reporterEvents.emit('report:log:system', 'dalek-browser-firefox: Switching to port: ' + port);</td></tr><tr class="miss"><td class="line">748</td><td class="hits">0</td><td class="source">      this.port = port;</td></tr><tr><td class="line">749</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">750</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">751</td><td class="hits"></td><td class="source">    // kickstart marionette client &amp; webdriver server</td></tr><tr class="miss"><td class="line">752</td><td class="hits">0</td><td class="source">    Q.all([</td></tr><tr><td class="line">753</td><td class="hits"></td><td class="source">      this.webDriverServer.connect(this.getPort(), this.getHost()),</td></tr><tr><td class="line">754</td><td class="hits"></td><td class="source">      this.marionette.connect(this.getMarionettePort())</td></tr><tr><td class="line">755</td><td class="hits"></td><td class="source">    ]).then(this._afterConnectionHasBeenEstablished.bind(this, profileName, deferred));</td></tr><tr class="miss"><td class="line">756</td><td class="hits">0</td><td class="source">    return this;</td></tr><tr><td class="line">757</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">758</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">759</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">760</td><td class="hits"></td><td class="source">   * Callback that will be invoked after the marionette client has </td></tr><tr><td class="line">761</td><td class="hits"></td><td class="source">   * established a connection to the browser &amp; after the webdriver server</td></tr><tr><td class="line">762</td><td class="hits"></td><td class="source">   * has been launched correctly</td></tr><tr><td class="line">763</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">764</td><td class="hits"></td><td class="source">   * @method _afterConnectionHasBeenEstablished</td></tr><tr><td class="line">765</td><td class="hits"></td><td class="source">   * @param {string} profileName Name of the user profile</td></tr><tr><td class="line">766</td><td class="hits"></td><td class="source">   * @param {object} deferred Promise</td></tr><tr><td class="line">767</td><td class="hits"></td><td class="source">   * @chainable</td></tr><tr><td class="line">768</td><td class="hits"></td><td class="source">   * @private</td></tr><tr><td class="line">769</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">770</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">771</td><td class="hits"></td><td class="source">  _afterConnectionHasBeenEstablished: function (profileName, deferred) {</td></tr><tr><td class="line">772</td><td class="hits"></td><td class="source">    // Due to the lack of firefox os readiness events, </td></tr><tr><td class="line">773</td><td class="hits"></td><td class="source">    // we need to wait an additional second before reporting</td></tr><tr><td class="line">774</td><td class="hits"></td><td class="source">    // test readiness</td></tr><tr class="miss"><td class="line">775</td><td class="hits">0</td><td class="source">    if (profileName === 'os') {</td></tr><tr class="miss"><td class="line">776</td><td class="hits">0</td><td class="source">      setTimeout(deferred.resolve, 1000);</td></tr><tr><td class="line">777</td><td class="hits"></td><td class="source">    } else {</td></tr><tr class="miss"><td class="line">778</td><td class="hits">0</td><td class="source">      deferred.resolve();</td></tr><tr><td class="line">779</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">780</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">781</td><td class="hits">0</td><td class="source">    return this;</td></tr><tr><td class="line">782</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">783</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">784</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">785</td><td class="hits"></td><td class="source">   * Consumes the console output when the browser is started</td></tr><tr><td class="line">786</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">787</td><td class="hits"></td><td class="source">   * @method _onBrowserStartup</td></tr><tr><td class="line">788</td><td class="hits"></td><td class="source">   * @param {object} deferred Promise</td></tr><tr><td class="line">789</td><td class="hits"></td><td class="source">   * @param {string} data Output from the spawned binary</td></tr><tr><td class="line">790</td><td class="hits"></td><td class="source">   * @private</td></tr><tr><td class="line">791</td><td class="hits"></td><td class="source">   * @chainable</td></tr><tr><td class="line">792</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">793</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">794</td><td class="hits"></td><td class="source">  _onBrowserStartup: function (deferred, data) {</td></tr><tr class="miss"><td class="line">795</td><td class="hits">0</td><td class="source">    if (this._browserIsReady(data)) {</td></tr><tr class="miss"><td class="line">796</td><td class="hits">0</td><td class="source">      deferred.resolve();</td></tr><tr><td class="line">797</td><td class="hits"></td><td class="source">    }</td></tr><tr class="miss"><td class="line">798</td><td class="hits">0</td><td class="source">    return this;</td></tr><tr><td class="line">799</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">800</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">801</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">802</td><td class="hits"></td><td class="source">   * Checks if the browser is ready for communication</td></tr><tr><td class="line">803</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">804</td><td class="hits"></td><td class="source">   * @method _browserIsReady</td></tr><tr><td class="line">805</td><td class="hits"></td><td class="source">   * @param {string} data Output from the spawned binary</td></tr><tr><td class="line">806</td><td class="hits"></td><td class="source">   * @return {bool} true when ready, false when not</td></tr><tr><td class="line">807</td><td class="hits"></td><td class="source">   * @private</td></tr><tr><td class="line">808</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">809</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">810</td><td class="hits"></td><td class="source">  _browserIsReady: function (data) {</td></tr><tr><td class="line">811</td><td class="hits"></td><td class="source">    // convert buffer to string</td></tr><tr class="miss"><td class="line">812</td><td class="hits">0</td><td class="source">    data = data+'';</td></tr><tr><td class="line">813</td><td class="hits"></td><td class="source">    // check for the ready signal on desktop firefox</td></tr><tr class="miss"><td class="line">814</td><td class="hits">0</td><td class="source">    var desktopReady = data.search('DOMWINDOW == 12') !== -1;</td></tr><tr><td class="line">815</td><td class="hits"></td><td class="source">    // check for the ready signal of the firefoxos emulator</td></tr><tr class="miss"><td class="line">816</td><td class="hits">0</td><td class="source">    var b2gReady = data.search('BrowserElementChildPreload.js loaded') !== -1;</td></tr><tr class="miss"><td class="line">817</td><td class="hits">0</td><td class="source">    return desktopReady || b2gReady;</td></tr><tr><td class="line">818</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">819</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">820</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">821</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">822</td><td class="hits"></td><td class="source">   * Creates a new Firefox profile</td></tr><tr><td class="line">823</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">824</td><td class="hits"></td><td class="source">   * @method _createProfile</td></tr><tr><td class="line">825</td><td class="hits"></td><td class="source">   * @return {Q.promise}</td></tr><tr><td class="line">826</td><td class="hits"></td><td class="source">   * @private</td></tr><tr><td class="line">827</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">828</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">829</td><td class="hits"></td><td class="source">  _createProfile: function () {</td></tr><tr class="miss"><td class="line">830</td><td class="hits">0</td><td class="source">    var deferred = Q.defer();</td></tr><tr class="miss"><td class="line">831</td><td class="hits">0</td><td class="source">    var profileName = 'dalekjs-' + Math.random().toString(16).slice(2);</td></tr><tr class="miss"><td class="line">832</td><td class="hits">0</td><td class="source">    this._createUserPreferences(deferred, profileName);</td></tr><tr><td class="line">833</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">834</td><td class="hits">0</td><td class="source">    return deferred.promise;</td></tr><tr><td class="line">835</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">836</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">837</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">838</td><td class="hits"></td><td class="source">   * Creates user preferences for the profile</td></tr><tr><td class="line">839</td><td class="hits"></td><td class="source">   * Saves them in `user.js` in the newly created profile</td></tr><tr><td class="line">840</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">841</td><td class="hits"></td><td class="source">   * @method _createProfile</td></tr><tr><td class="line">842</td><td class="hits"></td><td class="source">   * @param {string} profilePath User profile directory</td></tr><tr><td class="line">843</td><td class="hits"></td><td class="source">   * @return {Q.promise}</td></tr><tr><td class="line">844</td><td class="hits"></td><td class="source">   * @private</td></tr><tr><td class="line">845</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">846</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">847</td><td class="hits"></td><td class="source">  _createUserPreferences: function (deferred, profileName) {</td></tr><tr><td class="line">848</td><td class="hits"></td><td class="source">    // create marionette specific user preferences</td></tr><tr class="miss"><td class="line">849</td><td class="hits">0</td><td class="source">    var prefs = 'user_pref(&quot;browser.shell.checkDefaultBrowser&quot;, false);\n';</td></tr><tr class="miss"><td class="line">850</td><td class="hits">0</td><td class="source">    prefs += 'user_pref(&quot;marionette.contentListener&quot;, false);\n';</td></tr><tr class="miss"><td class="line">851</td><td class="hits">0</td><td class="source">    prefs += 'user_pref(&quot;marionette.defaultPrefs.enabled&quot;, true);\n';</td></tr><tr class="miss"><td class="line">852</td><td class="hits">0</td><td class="source">    prefs += 'user_pref(&quot;browser.shell.checkDefaultBrowser&quot;, false);\n';</td></tr><tr class="miss"><td class="line">853</td><td class="hits">0</td><td class="source">    prefs += 'user_pref(&quot;browser.sessionstore.resume_from_crash&quot;, false);\n';</td></tr><tr class="miss"><td class="line">854</td><td class="hits">0</td><td class="source">    prefs += 'user_pref(&quot;browser.bookmarks.restore_default_bookmarks&quot;, false);\n';</td></tr><tr class="miss"><td class="line">855</td><td class="hits">0</td><td class="source">    prefs += 'user_pref(&quot;marionette.defaultPrefs.port&quot;, &quot;' + this.getMarionettePort() + '&quot;);\n';</td></tr><tr><td class="line">856</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">857</td><td class="hits"></td><td class="source">    // store the user preferences</td></tr><tr class="miss"><td class="line">858</td><td class="hits">0</td><td class="source">    this.profile = {};</td></tr><tr class="miss"><td class="line">859</td><td class="hits">0</td><td class="source">    this.profile.path = path.join(process.cwd(), 'temp');</td></tr><tr class="miss"><td class="line">860</td><td class="hits">0</td><td class="source">    this.profile.name = profileName;</td></tr><tr><td class="line">861</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">862</td><td class="hits"></td><td class="source">    // check if the temp dir exists, else create</td></tr><tr class="miss"><td class="line">863</td><td class="hits">0</td><td class="source">    if (!fs.existsSync(this.profile.path)) {</td></tr><tr class="miss"><td class="line">864</td><td class="hits">0</td><td class="source">      fs.mkdirSync(this.profile.path);</td></tr><tr><td class="line">865</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">866</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">867</td><td class="hits"></td><td class="source">    // create the preference file</td></tr><tr class="miss"><td class="line">868</td><td class="hits">0</td><td class="source">    fs.writeFile(path.join(this.profile.path, 'prefs.js'), prefs, this._afterCreatingUserPreferences.bind(this, deferred));</td></tr><tr class="miss"><td class="line">869</td><td class="hits">0</td><td class="source">    return deferred.promise;</td></tr><tr><td class="line">870</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">871</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">872</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">873</td><td class="hits"></td><td class="source">   * Callback that will be executed after the user preferences</td></tr><tr><td class="line">874</td><td class="hits"></td><td class="source">   * have been created</td></tr><tr><td class="line">875</td><td class="hits"></td><td class="source">   * </td></tr><tr><td class="line">876</td><td class="hits"></td><td class="source">   * @method _afterCreatingUserPreferences</td></tr><tr><td class="line">877</td><td class="hits"></td><td class="source">   * @param {object} deferred Promise</td></tr><tr><td class="line">878</td><td class="hits"></td><td class="source">   * @param {object|null} err Error or null</td></tr><tr><td class="line">879</td><td class="hits"></td><td class="source">   * @private</td></tr><tr><td class="line">880</td><td class="hits"></td><td class="source">   * @chainable</td></tr><tr><td class="line">881</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">882</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">883</td><td class="hits"></td><td class="source">  _afterCreatingUserPreferences: function (deferred, err) {</td></tr><tr><td class="line">884</td><td class="hits"></td><td class="source">    // reject the deferred when an error occurrs</td></tr><tr class="miss"><td class="line">885</td><td class="hits">0</td><td class="source">    if (err !== null) {</td></tr><tr class="miss"><td class="line">886</td><td class="hits">0</td><td class="source">      this.reporterEvents.emit('error', 'dalek-browser-firefox: Error creating profile');</td></tr><tr class="miss"><td class="line">887</td><td class="hits">0</td><td class="source">      deferred.reject(err);</td></tr><tr class="miss"><td class="line">888</td><td class="hits">0</td><td class="source">      process.exit();</td></tr><tr><td class="line">889</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">890</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">891</td><td class="hits">0</td><td class="source">    deferred.resolve();</td></tr><tr class="miss"><td class="line">892</td><td class="hits">0</td><td class="source">    return this;</td></tr><tr><td class="line">893</td><td class="hits"></td><td class="source">  },</td></tr><tr><td class="line">894</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">895</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">896</td><td class="hits"></td><td class="source">   * Checks if the binary exists,</td></tr><tr><td class="line">897</td><td class="hits"></td><td class="source">   * when set manually by the user</td></tr><tr><td class="line">898</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">899</td><td class="hits"></td><td class="source">   * @method _checkUserSetBinary</td></tr><tr><td class="line">900</td><td class="hits"></td><td class="source">   * @param {string} userPath Path to the browser binary</td></tr><tr><td class="line">901</td><td class="hits"></td><td class="source">   * @param {object} deferred Promise</td></tr><tr><td class="line">902</td><td class="hits"></td><td class="source">   * @private</td></tr><tr><td class="line">903</td><td class="hits"></td><td class="source">   * @chainable</td></tr><tr><td class="line">904</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">905</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">906</td><td class="hits"></td><td class="source">  _checkUserSetBinary: function (userPath, deferred) {</td></tr><tr><td class="line">907</td><td class="hits"></td><td class="source">    // check if we need to replace the users home directory</td></tr><tr class="miss"><td class="line">908</td><td class="hits">0</td><td class="source">    if (process.platform === 'darwin' &amp;&amp; userPath.trim()[0] === '~') {</td></tr><tr class="miss"><td class="line">909</td><td class="hits">0</td><td class="source">      userPath = userPath.replace('~', process.env.HOME);</td></tr><tr><td class="line">910</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">911</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">912</td><td class="hits"></td><td class="source">    // check if the binary exists</td></tr><tr class="miss"><td class="line">913</td><td class="hits">0</td><td class="source">    if (fs.existsSync(userPath)) {</td></tr><tr class="miss"><td class="line">914</td><td class="hits">0</td><td class="source">      this.binary = userPath;</td></tr><tr class="miss"><td class="line">915</td><td class="hits">0</td><td class="source">      deferred.resolve(userPath);</td></tr><tr><td class="line">916</td><td class="hits"></td><td class="source">    } else {</td></tr><tr class="miss"><td class="line">917</td><td class="hits">0</td><td class="source">      var msg = 'dalek-driver-firefox: Binary not found: ' + userPath;</td></tr><tr class="miss"><td class="line">918</td><td class="hits">0</td><td class="source">      this.reporterEvents.emit('error', msg);</td></tr><tr class="miss"><td class="line">919</td><td class="hits">0</td><td class="source">      process.exit(); // MAYBE switch to Daleks 'killAll' Event </td></tr><tr class="miss"><td class="line">920</td><td class="hits">0</td><td class="source">      deferred.reject({error: true, msg: msg});</td></tr><tr><td class="line">921</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">922</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">923</td><td class="hits">0</td><td class="source">    return this;</td></tr><tr><td class="line">924</td><td class="hits"></td><td class="source">  }</td></tr><tr><td class="line">925</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">926</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">927</td><td class="hits">1</td><td class="source">module.exports = FirefoxDriver;</td></tr><tr><td class="line">928</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/cookie.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/cookie.js</h2><div id="stats" class="low"><div class="percentage">33%</div><div class="sloc">6</div><div class="hits">2</div><div class="misses">4</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">28</td><td class="hits"></td><td class="source"> * Cookie related Marionette commands</td></tr><tr><td class="line">29</td><td class="hits"></td><td class="source"> * see [JsonProtocol](https://wiki.mozilla.org/Auto-tools/Projects/Marionette/JSON_Protocol)</td></tr><tr><td class="line">30</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">31</td><td class="hits"></td><td class="source"> * @module FirefoxDriver</td></tr><tr><td class="line">32</td><td class="hits"></td><td class="source"> * @class Cookie</td></tr><tr><td class="line">33</td><td class="hits"></td><td class="source"> * @namespace FirefoxDriver.Commands.Marionette</td></tr><tr><td class="line">34</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">35</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">36</td><td class="hits">1</td><td class="source">module.exports = function (Marionette) {</td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">38</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">39</td><td class="hits"></td><td class="source">   * Retrieve all cookies visible to the current page.</td></tr><tr><td class="line">40</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">41</td><td class="hits"></td><td class="source">   * @method getCookies</td></tr><tr><td class="line">42</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">43</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">44</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">45</td><td class="hits"></td><td class="source">    name: 'getCookies',</td></tr><tr><td class="line">46</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">47</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">48</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">49</td><td class="hits"></td><td class="source">      name: 'getAllCookies'</td></tr><tr><td class="line">50</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">51</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">52</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">53</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">54</td><td class="hits"></td><td class="source">   * Delete all cookies visible to the current page.</td></tr><tr><td class="line">55</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">56</td><td class="hits"></td><td class="source">   * @method deleteCookies</td></tr><tr><td class="line">57</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">58</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">59</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">60</td><td class="hits"></td><td class="source">    name: 'deleteCookies',</td></tr><tr><td class="line">61</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">62</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">63</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">64</td><td class="hits"></td><td class="source">      name: 'deleteAllCookies'</td></tr><tr><td class="line">65</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">66</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">67</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">68</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">69</td><td class="hits"></td><td class="source">   * Delete the cookie with the given name.</td></tr><tr><td class="line">70</td><td class="hits"></td><td class="source">   * This command should be a no-op if there is no such cookie visible to the current page.</td></tr><tr><td class="line">71</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">72</td><td class="hits"></td><td class="source">   * @method deleteCookie</td></tr><tr><td class="line">73</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">74</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">75</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">76</td><td class="hits"></td><td class="source">    name: 'deleteCookie',</td></tr><tr><td class="line">77</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">78</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">79</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">80</td><td class="hits"></td><td class="source">      name: 'deleteCookie',</td></tr><tr><td class="line">81</td><td class="hits"></td><td class="source">      parameters: {</td></tr><tr><td class="line">82</td><td class="hits"></td><td class="source">        name: ':name',</td></tr><tr><td class="line">83</td><td class="hits"></td><td class="source">      }</td></tr><tr><td class="line">84</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">85</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">86</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">87</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">88</td><td class="hits"></td><td class="source">   * Set a cookie. If the cookie path is not specified, it should be set to &quot;/&quot;.</td></tr><tr><td class="line">89</td><td class="hits"></td><td class="source">   * Likewise, if the domain is omitted, it should default to the current page's domain.</td></tr><tr><td class="line">90</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">91</td><td class="hits"></td><td class="source">   * @method addCookie</td></tr><tr><td class="line">92</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">93</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">94</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">95</td><td class="hits"></td><td class="source">    name: 'cookies',</td></tr><tr><td class="line">96</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">97</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">98</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">99</td><td class="hits"></td><td class="source">      cookie: ':cookie',</td></tr><tr><td class="line">100</td><td class="hits"></td><td class="source">      name: 'addCookie'</td></tr><tr><td class="line">101</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">102</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">103</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">104</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">105</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/element.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/element.js</h2><div id="stats" class="terrible"><div class="percentage">13%</div><div class="sloc">15</div><div class="hits">2</div><div class="misses">13</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">28</td><td class="hits"></td><td class="source"> * Element related Marionette commands</td></tr><tr><td class="line">29</td><td class="hits"></td><td class="source"> * see [JsonProtocol](https://wiki.mozilla.org/Auto-tools/Projects/Marionette/JSON_Protocol)</td></tr><tr><td class="line">30</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">31</td><td class="hits"></td><td class="source"> * @module FirefoxDriver</td></tr><tr><td class="line">32</td><td class="hits"></td><td class="source"> * @class Element</td></tr><tr><td class="line">33</td><td class="hits"></td><td class="source"> * @namespace FirefoxDriver.Commands.Marionette</td></tr><tr><td class="line">34</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">35</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">36</td><td class="hits">1</td><td class="source">module.exports = function (Marionette) {</td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">38</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">39</td><td class="hits"></td><td class="source">   * Selects an element</td></tr><tr><td class="line">40</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">41</td><td class="hits"></td><td class="source">   * @method element</td></tr><tr><td class="line">42</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">43</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">44</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">45</td><td class="hits"></td><td class="source">    name: 'element',</td></tr><tr><td class="line">46</td><td class="hits"></td><td class="source">    params: ['selector'],</td></tr><tr><td class="line">47</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">48</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">49</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">50</td><td class="hits"></td><td class="source">      name: 'findElement',</td></tr><tr><td class="line">51</td><td class="hits"></td><td class="source">      parameters: {</td></tr><tr><td class="line">52</td><td class="hits"></td><td class="source">        value: ':selector',</td></tr><tr><td class="line">53</td><td class="hits"></td><td class="source">        using: 'css selector'</td></tr><tr><td class="line">54</td><td class="hits"></td><td class="source">      }</td></tr><tr><td class="line">55</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">56</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">57</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">58</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">59</td><td class="hits"></td><td class="source">   * Selects multiple elements</td></tr><tr><td class="line">60</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">61</td><td class="hits"></td><td class="source">   * @method elements</td></tr><tr><td class="line">62</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">63</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">64</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">65</td><td class="hits"></td><td class="source">    name: 'elements',</td></tr><tr><td class="line">66</td><td class="hits"></td><td class="source">    params: ['selector'],</td></tr><tr><td class="line">67</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">68</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">69</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">70</td><td class="hits"></td><td class="source">      name: 'findElements',</td></tr><tr><td class="line">71</td><td class="hits"></td><td class="source">      parameters: {</td></tr><tr><td class="line">72</td><td class="hits"></td><td class="source">        value: ':selector',</td></tr><tr><td class="line">73</td><td class="hits"></td><td class="source">        using: 'css selector'</td></tr><tr><td class="line">74</td><td class="hits"></td><td class="source">      }</td></tr><tr><td class="line">75</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">76</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">77</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">78</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">79</td><td class="hits"></td><td class="source">   * Clicks an element</td></tr><tr><td class="line">80</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">81</td><td class="hits"></td><td class="source">   * @method click</td></tr><tr><td class="line">82</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">83</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">84</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">85</td><td class="hits"></td><td class="source">    name: 'click',</td></tr><tr><td class="line">86</td><td class="hits"></td><td class="source">    params: ['elementId'],</td></tr><tr><td class="line">87</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">88</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">89</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">90</td><td class="hits"></td><td class="source">      element: ':elementId',</td></tr><tr><td class="line">91</td><td class="hits"></td><td class="source">      name: 'clickElement'</td></tr><tr><td class="line">92</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">93</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">94</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">95</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">96</td><td class="hits"></td><td class="source">   * Gets the width &amp; height of an element</td></tr><tr><td class="line">97</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">98</td><td class="hits"></td><td class="source">   * @method size</td></tr><tr><td class="line">99</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">100</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">101</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">102</td><td class="hits"></td><td class="source">    name: 'size',</td></tr><tr><td class="line">103</td><td class="hits"></td><td class="source">    params: ['elementId'],</td></tr><tr><td class="line">104</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">105</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">106</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">107</td><td class="hits"></td><td class="source">      element: ':elementId',</td></tr><tr><td class="line">108</td><td class="hits"></td><td class="source">      name: 'getElementSize'</td></tr><tr><td class="line">109</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">110</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">111</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">112</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">113</td><td class="hits"></td><td class="source">   * Checks if an element is displayed</td></tr><tr><td class="line">114</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">115</td><td class="hits"></td><td class="source">   * @method displayed</td></tr><tr><td class="line">116</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">117</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">118</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">119</td><td class="hits"></td><td class="source">    name: 'displayed',</td></tr><tr><td class="line">120</td><td class="hits"></td><td class="source">    params: ['elementId'],</td></tr><tr><td class="line">121</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">122</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">123</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">124</td><td class="hits"></td><td class="source">      element: ':elementId',</td></tr><tr><td class="line">125</td><td class="hits"></td><td class="source">      name: 'isElementDisplayed'</td></tr><tr><td class="line">126</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">127</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">128</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">129</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">130</td><td class="hits"></td><td class="source">   * Gets the inner text of an element</td></tr><tr><td class="line">131</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">132</td><td class="hits"></td><td class="source">   * @method text</td></tr><tr><td class="line">133</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">134</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">135</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">136</td><td class="hits"></td><td class="source">    name: 'text',</td></tr><tr><td class="line">137</td><td class="hits"></td><td class="source">    params: ['elementId'],</td></tr><tr><td class="line">138</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">139</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">140</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">141</td><td class="hits"></td><td class="source">      name: 'getElementText',</td></tr><tr><td class="line">142</td><td class="hits"></td><td class="source">      parameters: {</td></tr><tr><td class="line">143</td><td class="hits"></td><td class="source">        id: ':elementId'</td></tr><tr><td class="line">144</td><td class="hits"></td><td class="source">      }</td></tr><tr><td class="line">145</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">146</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">147</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">148</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">149</td><td class="hits"></td><td class="source">   * Gets the value of an element</td></tr><tr><td class="line">150</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">151</td><td class="hits"></td><td class="source">   * @method val</td></tr><tr><td class="line">152</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">153</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">154</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">155</td><td class="hits"></td><td class="source">    name: 'val',</td></tr><tr><td class="line">156</td><td class="hits"></td><td class="source">    params: ['elementId', 'value'],</td></tr><tr><td class="line">157</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">158</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">159</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">160</td><td class="hits"></td><td class="source">      parameters: {</td></tr><tr><td class="line">161</td><td class="hits"></td><td class="source">        id: ':elementId',</td></tr><tr><td class="line">162</td><td class="hits"></td><td class="source">        value: ':value'</td></tr><tr><td class="line">163</td><td class="hits"></td><td class="source">      },</td></tr><tr><td class="line">164</td><td class="hits"></td><td class="source">      name: 'sendKeysToElement'</td></tr><tr><td class="line">165</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">166</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">167</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">168</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">169</td><td class="hits"></td><td class="source">   * Clears the contents of an input/text field</td></tr><tr><td class="line">170</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">171</td><td class="hits"></td><td class="source">   * @method clear</td></tr><tr><td class="line">172</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">173</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">174</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">175</td><td class="hits"></td><td class="source">    name: 'clear',</td></tr><tr><td class="line">176</td><td class="hits"></td><td class="source">    params: ['elementId'],</td></tr><tr><td class="line">177</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">178</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">179</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">180</td><td class="hits"></td><td class="source">      parameters: {</td></tr><tr><td class="line">181</td><td class="hits"></td><td class="source">        id: ':elementId'</td></tr><tr><td class="line">182</td><td class="hits"></td><td class="source">      },</td></tr><tr><td class="line">183</td><td class="hits"></td><td class="source">      name: 'clearElement'</td></tr><tr><td class="line">184</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">185</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">186</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">187</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">188</td><td class="hits"></td><td class="source">   * Gets the value of an css property</td></tr><tr><td class="line">189</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">190</td><td class="hits"></td><td class="source">   * @method cssProperty</td></tr><tr><td class="line">191</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">192</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">193</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">194</td><td class="hits"></td><td class="source">    name: 'cssProperty',</td></tr><tr><td class="line">195</td><td class="hits"></td><td class="source">    params: ['elementId'],</td></tr><tr><td class="line">196</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">197</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">198</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">199</td><td class="hits"></td><td class="source">      parameters: {</td></tr><tr><td class="line">200</td><td class="hits"></td><td class="source">        id: ':elementId',</td></tr><tr><td class="line">201</td><td class="hits"></td><td class="source">        propertyName: ':propertyName'</td></tr><tr><td class="line">202</td><td class="hits"></td><td class="source">      },</td></tr><tr><td class="line">203</td><td class="hits"></td><td class="source">      name: 'getElementValueOfCssProperty'</td></tr><tr><td class="line">204</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">205</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">206</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">207</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">208</td><td class="hits"></td><td class="source">   * Checks if an element is enabled</td></tr><tr><td class="line">209</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">210</td><td class="hits"></td><td class="source">   * @method enabled</td></tr><tr><td class="line">211</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">212</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">213</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">214</td><td class="hits"></td><td class="source">    name: 'enabled',</td></tr><tr><td class="line">215</td><td class="hits"></td><td class="source">    params: ['elementId'],</td></tr><tr><td class="line">216</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">217</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">218</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">219</td><td class="hits"></td><td class="source">      parameters: {</td></tr><tr><td class="line">220</td><td class="hits"></td><td class="source">        id: ':elementId'</td></tr><tr><td class="line">221</td><td class="hits"></td><td class="source">      },</td></tr><tr><td class="line">222</td><td class="hits"></td><td class="source">      name: 'isElementEnabled'</td></tr><tr><td class="line">223</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">224</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">225</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">226</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">227</td><td class="hits"></td><td class="source">   * Checks if an element is selected</td></tr><tr><td class="line">228</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">229</td><td class="hits"></td><td class="source">   * @method selected</td></tr><tr><td class="line">230</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">231</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">232</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">233</td><td class="hits"></td><td class="source">    name: 'selected',</td></tr><tr><td class="line">234</td><td class="hits"></td><td class="source">    params: ['elementId'],</td></tr><tr><td class="line">235</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">236</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">237</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">238</td><td class="hits"></td><td class="source">      parameters: {</td></tr><tr><td class="line">239</td><td class="hits"></td><td class="source">        id: ':elementId'</td></tr><tr><td class="line">240</td><td class="hits"></td><td class="source">      },</td></tr><tr><td class="line">241</td><td class="hits"></td><td class="source">      name: 'isElementSelected'</td></tr><tr><td class="line">242</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">243</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">244</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">245</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">246</td><td class="hits"></td><td class="source">   * TODO: Find JS workaround (Marionette doesn't has a submit handler yet)</td></tr><tr><td class="line">247</td><td class="hits"></td><td class="source">   * DOES NOT WORK YET!</td></tr><tr><td class="line">248</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">249</td><td class="hits"></td><td class="source">   * @method submit</td></tr><tr><td class="line">250</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">251</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">252</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">253</td><td class="hits"></td><td class="source">    name: 'submit',</td></tr><tr><td class="line">254</td><td class="hits"></td><td class="source">    params: ['elementId'],</td></tr><tr><td class="line">255</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">256</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">257</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">258</td><td class="hits"></td><td class="source">      name: 'executeScript',</td></tr><tr><td class="line">259</td><td class="hits"></td><td class="source">      value: 'document.form[0].submit()',</td></tr><tr><td class="line">260</td><td class="hits"></td><td class="source">      newSandbox: true,</td></tr><tr><td class="line">261</td><td class="hits"></td><td class="source">      specialPowers: true</td></tr><tr><td class="line">262</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">263</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">264</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">265</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">266</td><td class="hits"></td><td class="source">   * Gets the value of an specific attribute</td></tr><tr><td class="line">267</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">268</td><td class="hits"></td><td class="source">   * @method attribute</td></tr><tr><td class="line">269</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">270</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">271</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">272</td><td class="hits"></td><td class="source">    name: 'attribute',</td></tr><tr><td class="line">273</td><td class="hits"></td><td class="source">    params: ['elementId', 'attr'],</td></tr><tr><td class="line">274</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">275</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">276</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">277</td><td class="hits"></td><td class="source">      parameters: {</td></tr><tr><td class="line">278</td><td class="hits"></td><td class="source">        id: ':elementId',</td></tr><tr><td class="line">279</td><td class="hits"></td><td class="source">        name: ':attr'</td></tr><tr><td class="line">280</td><td class="hits"></td><td class="source">      },</td></tr><tr><td class="line">281</td><td class="hits"></td><td class="source">      name: 'getElementAttribute'</td></tr><tr><td class="line">282</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">283</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">284</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">285</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">286</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/execute.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/execute.js</h2><div id="stats" class="medium"><div class="percentage">50%</div><div class="sloc">4</div><div class="hits">2</div><div class="misses">2</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">28</td><td class="hits"></td><td class="source"> * Script execute related Marionette commands</td></tr><tr><td class="line">29</td><td class="hits"></td><td class="source"> * see [JsonProtocol](https://wiki.mozilla.org/Auto-tools/Projects/Marionette/JSON_Protocol)</td></tr><tr><td class="line">30</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">31</td><td class="hits"></td><td class="source"> * @module FirefoxDriver</td></tr><tr><td class="line">32</td><td class="hits"></td><td class="source"> * @class Execute</td></tr><tr><td class="line">33</td><td class="hits"></td><td class="source"> * @namespace FirefoxDriver.Commands.Marionette</td></tr><tr><td class="line">34</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">35</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">36</td><td class="hits">1</td><td class="source">module.exports = function (Marionette) {</td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">38</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">39</td><td class="hits"></td><td class="source">   * Inject a snippet of JavaScript into the page for execution in the context of the currently selected frame.</td></tr><tr><td class="line">40</td><td class="hits"></td><td class="source">   * The executed script is assumed to be synchronous and the result of evaluating the script is returned to the client.</td></tr><tr><td class="line">41</td><td class="hits"></td><td class="source">   * The script argument defines the script to execute in the form of a function body.</td></tr><tr><td class="line">42</td><td class="hits"></td><td class="source">   * The value returned by that function will be returned to the client.</td></tr><tr><td class="line">43</td><td class="hits"></td><td class="source">   * The function will be invoked with the provided args array and the values may be accessed</td></tr><tr><td class="line">44</td><td class="hits"></td><td class="source">   * via the arguments object in the order specified.</td></tr><tr><td class="line">45</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">46</td><td class="hits"></td><td class="source">   * @method execute</td></tr><tr><td class="line">47</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">48</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">49</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">50</td><td class="hits"></td><td class="source">    name: 'execute',</td></tr><tr><td class="line">51</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">52</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">53</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">54</td><td class="hits"></td><td class="source">      name: 'executeScript',</td></tr><tr><td class="line">55</td><td class="hits"></td><td class="source">      parameters: {</td></tr><tr><td class="line">56</td><td class="hits"></td><td class="source">        script: ':value',</td></tr><tr><td class="line">57</td><td class="hits"></td><td class="source">        args: ':args',</td></tr><tr><td class="line">58</td><td class="hits"></td><td class="source">        newSandbox: true,</td></tr><tr><td class="line">59</td><td class="hits"></td><td class="source">        specialPowers: true</td></tr><tr><td class="line">60</td><td class="hits"></td><td class="source">      }</td></tr><tr><td class="line">61</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">62</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">63</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">64</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">65</td><td class="hits"></td><td class="source">   * Inject a snippet of JavaScript into the page for execution in the context of the currently selected frame.</td></tr><tr><td class="line">66</td><td class="hits"></td><td class="source">   * The executed script is assumed to be asynchronous and must signal that is done by invoking the provided callback,</td></tr><tr><td class="line">67</td><td class="hits"></td><td class="source">   * which is always provided as the final argument to the function. The value to this callback will be returned to the client.</td></tr><tr><td class="line">68</td><td class="hits"></td><td class="source">   * Asynchronous script commands may not span page loads.</td></tr><tr><td class="line">69</td><td class="hits"></td><td class="source">   * If an unload event is fired while waiting for a script result, an error should be returned to the client.</td></tr><tr><td class="line">70</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">71</td><td class="hits"></td><td class="source">   * The script argument defines the script to execute in teh form of a function body.</td></tr><tr><td class="line">72</td><td class="hits"></td><td class="source">   * The function will be invoked with the provided args array and the values may be accessed</td></tr><tr><td class="line">73</td><td class="hits"></td><td class="source">   * via the arguments object in the order specified.</td></tr><tr><td class="line">74</td><td class="hits"></td><td class="source">   * The final argument will always be a callback function that must be invoked to signal that the script has finished.</td></tr><tr><td class="line">75</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">76</td><td class="hits"></td><td class="source">   * @method executeAsync</td></tr><tr><td class="line">77</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">78</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">79</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">80</td><td class="hits"></td><td class="source">    name: 'executeAsync',</td></tr><tr><td class="line">81</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">82</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">83</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">84</td><td class="hits"></td><td class="source">      name: 'executeAsyncScript',</td></tr><tr><td class="line">85</td><td class="hits"></td><td class="source">      parameters: {</td></tr><tr><td class="line">86</td><td class="hits"></td><td class="source">        script: ':value',</td></tr><tr><td class="line">87</td><td class="hits"></td><td class="source">        args: ':args',</td></tr><tr><td class="line">88</td><td class="hits"></td><td class="source">        newSandbox: true,</td></tr><tr><td class="line">89</td><td class="hits"></td><td class="source">        specialPowers: true</td></tr><tr><td class="line">90</td><td class="hits"></td><td class="source">      }</td></tr><tr><td class="line">91</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">92</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">93</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">94</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">95</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/frame.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/frame.js</h2><div id="stats" class="medium"><div class="percentage">66%</div><div class="sloc">3</div><div class="hits">2</div><div class="misses">1</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">28</td><td class="hits"></td><td class="source"> * Frame related Marionette commands</td></tr><tr><td class="line">29</td><td class="hits"></td><td class="source"> * see [JsonProtocol](https://wiki.mozilla.org/Auto-tools/Projects/Marionette/JSON_Protocol)</td></tr><tr><td class="line">30</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">31</td><td class="hits"></td><td class="source"> * @module FirefoxDriver</td></tr><tr><td class="line">32</td><td class="hits"></td><td class="source"> * @class Frame</td></tr><tr><td class="line">33</td><td class="hits"></td><td class="source"> * @namespace FirefoxDriver.Commands.Marionette</td></tr><tr><td class="line">34</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">35</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">36</td><td class="hits">1</td><td class="source">module.exports = function (Marionette) {</td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">38</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">39</td><td class="hits"></td><td class="source">   * Change focus to another frame on the page.</td></tr><tr><td class="line">40</td><td class="hits"></td><td class="source">   * If the frame id is null, the server should switch to the page's default content.</td></tr><tr><td class="line">41</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">42</td><td class="hits"></td><td class="source">   * @method frame</td></tr><tr><td class="line">43</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">44</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">45</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">46</td><td class="hits"></td><td class="source">    name: 'frame',</td></tr><tr><td class="line">47</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">48</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">49</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">50</td><td class="hits"></td><td class="source">      name: 'switchToFrame',</td></tr><tr><td class="line">51</td><td class="hits"></td><td class="source">      parameters: {</td></tr><tr><td class="line">52</td><td class="hits"></td><td class="source">        element: ':elementId',</td></tr><tr><td class="line">53</td><td class="hits"></td><td class="source">        focus: true</td></tr><tr><td class="line">54</td><td class="hits"></td><td class="source">      }</td></tr><tr><td class="line">55</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">56</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">57</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">58</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">59</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/ime.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/ime.js</h2><div id="stats" class="medium"><div class="percentage">66%</div><div class="sloc">3</div><div class="hits">2</div><div class="misses">1</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">28</td><td class="hits"></td><td class="source"> * IME related Marionette commands</td></tr><tr><td class="line">29</td><td class="hits"></td><td class="source"> * see [JsonProtocol](https://wiki.mozilla.org/Auto-tools/Projects/Marionette/JSON_Protocol)</td></tr><tr><td class="line">30</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">31</td><td class="hits"></td><td class="source"> * @module FirefoxDriver</td></tr><tr><td class="line">32</td><td class="hits"></td><td class="source"> * @class IME</td></tr><tr><td class="line">33</td><td class="hits"></td><td class="source"> * @namespace FirefoxDriver.Commands.Marionette</td></tr><tr><td class="line">34</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">35</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">36</td><td class="hits">1</td><td class="source">module.exports = function (Marionette) {</td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">38</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">39</td><td class="hits"></td><td class="source">   * Query the server's current status.</td></tr><tr><td class="line">40</td><td class="hits"></td><td class="source">   * The server should respond with a general &quot;HTTP 200 OK&quot; response if it is alive and accepting commands.</td></tr><tr><td class="line">41</td><td class="hits"></td><td class="source">   * The response body should be a JSON object describing the state of the server.</td></tr><tr><td class="line">42</td><td class="hits"></td><td class="source">   * All server implementations should return two basic objects describing the server's current platform</td></tr><tr><td class="line">43</td><td class="hits"></td><td class="source">   * and when the server was built. All fields are optional; if omitted, the client should assume the value is uknown.</td></tr><tr><td class="line">44</td><td class="hits"></td><td class="source">   * Furthermore, server implementations may include additional fields not listed here.</td></tr><tr><td class="line">45</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">46</td><td class="hits"></td><td class="source">   * @method status</td></tr><tr><td class="line">47</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">48</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">49</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">50</td><td class="hits"></td><td class="source">    name: 'status',</td></tr><tr><td class="line">51</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">52</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">53</td><td class="hits"></td><td class="source">      name: 'getStatus'</td></tr><tr><td class="line">54</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">55</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">56</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">57</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">58</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/interaction.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/interaction.js</h2><div id="stats" class="high"><div class="percentage">100%</div><div class="sloc">2</div><div class="hits">2</div><div class="misses">0</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">28</td><td class="hits"></td><td class="source"> * Interaction related Marionette commands</td></tr><tr><td class="line">29</td><td class="hits"></td><td class="source"> * see [JsonProtocol](https://wiki.mozilla.org/Auto-tools/Projects/Marionette/JSON_Protocol)</td></tr><tr><td class="line">30</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">31</td><td class="hits"></td><td class="source"> * @module FirefoxDriver</td></tr><tr><td class="line">32</td><td class="hits"></td><td class="source"> * @class Interaction</td></tr><tr><td class="line">33</td><td class="hits"></td><td class="source"> * @namespace FirefoxDriver.Commands.Marionette</td></tr><tr><td class="line">34</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">35</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">36</td><td class="hits">1</td><td class="source">module.exports = function () {</td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">38</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">39</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/page.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/page.js</h2><div id="stats" class="low"><div class="percentage">33%</div><div class="sloc">6</div><div class="hits">2</div><div class="misses">4</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">28</td><td class="hits"></td><td class="source"> * Page related Marionette commands</td></tr><tr><td class="line">29</td><td class="hits"></td><td class="source"> * see [JsonProtocol](https://wiki.mozilla.org/Auto-tools/Projects/Marionette/JSON_Protocol)</td></tr><tr><td class="line">30</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">31</td><td class="hits"></td><td class="source"> * @module FirefoxDriver</td></tr><tr><td class="line">32</td><td class="hits"></td><td class="source"> * @class Page</td></tr><tr><td class="line">33</td><td class="hits"></td><td class="source"> * @namespace FirefoxDriver.Commands.Marionette</td></tr><tr><td class="line">34</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">35</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">36</td><td class="hits">1</td><td class="source">module.exports = function (Marionette) {</td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">38</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">39</td><td class="hits"></td><td class="source">   * Get the current page source</td></tr><tr><td class="line">40</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">41</td><td class="hits"></td><td class="source">   * @method source</td></tr><tr><td class="line">42</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">43</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">44</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">45</td><td class="hits"></td><td class="source">    name: 'source',</td></tr><tr><td class="line">46</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">47</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">48</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">49</td><td class="hits"></td><td class="source">      type: 'getPageSource'</td></tr><tr><td class="line">50</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">51</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">52</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">53</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">54</td><td class="hits"></td><td class="source">   * Get the current page title</td></tr><tr><td class="line">55</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">56</td><td class="hits"></td><td class="source">   * @method title</td></tr><tr><td class="line">57</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">58</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">59</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">60</td><td class="hits"></td><td class="source">    name: 'title',</td></tr><tr><td class="line">61</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">62</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">63</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">64</td><td class="hits"></td><td class="source">      type: 'getTitle'</td></tr><tr><td class="line">65</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">66</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">67</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">68</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">69</td><td class="hits"></td><td class="source">   * Get the current geo location</td></tr><tr><td class="line">70</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">71</td><td class="hits"></td><td class="source">   * @method geoLocation</td></tr><tr><td class="line">72</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">73</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">74</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">75</td><td class="hits"></td><td class="source">    name: 'geoLocation',</td></tr><tr><td class="line">76</td><td class="hits"></td><td class="source">    implemented: false</td></tr><tr><td class="line">77</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">78</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">79</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">80</td><td class="hits"></td><td class="source">   * Set the geo location</td></tr><tr><td class="line">81</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">82</td><td class="hits"></td><td class="source">   * @method setGeoLocation</td></tr><tr><td class="line">83</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">84</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">85</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">86</td><td class="hits"></td><td class="source">    name: 'setGeoLocation',</td></tr><tr><td class="line">87</td><td class="hits"></td><td class="source">    implemented: false</td></tr><tr><td class="line">88</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">89</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">90</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">91</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/screenshot.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/screenshot.js</h2><div id="stats" class="medium"><div class="percentage">66%</div><div class="sloc">3</div><div class="hits">2</div><div class="misses">1</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">28</td><td class="hits"></td><td class="source"> * Screenshot related Marionette commands</td></tr><tr><td class="line">29</td><td class="hits"></td><td class="source"> * see [JsonProtocol](https://wiki.mozilla.org/Auto-tools/Projects/Marionette/JSON_Protocol)</td></tr><tr><td class="line">30</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">31</td><td class="hits"></td><td class="source"> * @module FirefoxDriver</td></tr><tr><td class="line">32</td><td class="hits"></td><td class="source"> * @class Screenshot</td></tr><tr><td class="line">33</td><td class="hits"></td><td class="source"> * @namespace FirefoxDriver.Commands.Marionette</td></tr><tr><td class="line">34</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">35</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">36</td><td class="hits">1</td><td class="source">module.exports = function (Marionette) {</td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">38</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">39</td><td class="hits"></td><td class="source">   * Returns the current visible screen as a base64 png</td></tr><tr><td class="line">40</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">41</td><td class="hits"></td><td class="source">   * @method screenshot</td></tr><tr><td class="line">42</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">43</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">44</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">45</td><td class="hits"></td><td class="source">    name: 'screenshot',</td></tr><tr><td class="line">46</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">47</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">48</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">49</td><td class="hits"></td><td class="source">      name: 'screenShot',</td></tr><tr><td class="line">50</td><td class="hits"></td><td class="source">      parameters: {}</td></tr><tr><td class="line">51</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">52</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">53</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">54</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">55</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/session.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/session.js</h2><div id="stats" class="low"><div class="percentage">40%</div><div class="sloc">5</div><div class="hits">2</div><div class="misses">3</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">28</td><td class="hits"></td><td class="source"> * Session related Marionette commands</td></tr><tr><td class="line">29</td><td class="hits"></td><td class="source"> * see [JsonProtocol](https://wiki.mozilla.org/Auto-tools/Projects/Marionette/JSON_Protocol)</td></tr><tr><td class="line">30</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">31</td><td class="hits"></td><td class="source"> * @module FirefoxDriver</td></tr><tr><td class="line">32</td><td class="hits"></td><td class="source"> * @class Session</td></tr><tr><td class="line">33</td><td class="hits"></td><td class="source"> * @namespace FirefoxDriver.Commands.Marionette</td></tr><tr><td class="line">34</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">35</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">36</td><td class="hits">1</td><td class="source">module.exports = function (Marionette) {</td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">38</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">39</td><td class="hits"></td><td class="source">   * Gets the marionette id for the current testing session</td></tr><tr><td class="line">40</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">41</td><td class="hits"></td><td class="source">   * @method getMarionetteID</td></tr><tr><td class="line">42</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">43</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">44</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">45</td><td class="hits"></td><td class="source">    name: 'getMarionetteID',</td></tr><tr><td class="line">46</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">47</td><td class="hits"></td><td class="source">      to: 'root',</td></tr><tr><td class="line">48</td><td class="hits"></td><td class="source">      name: 'getMarionetteID'</td></tr><tr><td class="line">49</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">50</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">51</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">52</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">53</td><td class="hits"></td><td class="source">   * Gets the session id for the current testing session</td></tr><tr><td class="line">54</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">55</td><td class="hits"></td><td class="source">   * @method getSession</td></tr><tr><td class="line">56</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">57</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">58</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">59</td><td class="hits"></td><td class="source">    name: 'getSession',</td></tr><tr><td class="line">60</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">61</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">62</td><td class="hits"></td><td class="source">      name: 'newSession'</td></tr><tr><td class="line">63</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">64</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">65</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">66</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">67</td><td class="hits"></td><td class="source">   * Retrieve the capabilities of the specified session.</td></tr><tr><td class="line">68</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">69</td><td class="hits"></td><td class="source">   * @method session</td></tr><tr><td class="line">70</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">71</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">72</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">73</td><td class="hits"></td><td class="source">    name: 'session',</td></tr><tr><td class="line">74</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">75</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">76</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">77</td><td class="hits"></td><td class="source">      name: 'getSessionCapabilities'</td></tr><tr><td class="line">78</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">79</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">80</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">81</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">82</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/storage.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/storage.js</h2><div id="stats" class="high"><div class="percentage">100%</div><div class="sloc">2</div><div class="hits">2</div><div class="misses">0</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">28</td><td class="hits"></td><td class="source"> * Storage related Marionette commands</td></tr><tr><td class="line">29</td><td class="hits"></td><td class="source"> * see [JsonProtocol](https://wiki.mozilla.org/Auto-tools/Projects/Marionette/JSON_Protocol)</td></tr><tr><td class="line">30</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">31</td><td class="hits"></td><td class="source"> * @module FirefoxDriver</td></tr><tr><td class="line">32</td><td class="hits"></td><td class="source"> * @class Storage</td></tr><tr><td class="line">33</td><td class="hits"></td><td class="source"> * @namespace FirefoxDriver.Commands.Marionette</td></tr><tr><td class="line">34</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">35</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">36</td><td class="hits">1</td><td class="source">module.exports = function () {</td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">38</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">39</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/timeout.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/timeout.js</h2><div id="stats" class="medium"><div class="percentage">66%</div><div class="sloc">3</div><div class="hits">2</div><div class="misses">1</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">28</td><td class="hits"></td><td class="source"> * Timeout related Marionette commands</td></tr><tr><td class="line">29</td><td class="hits"></td><td class="source"> * see [JsonProtocol](https://wiki.mozilla.org/Auto-tools/Projects/Marionette/JSON_Protocol)</td></tr><tr><td class="line">30</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">31</td><td class="hits"></td><td class="source"> * @module FirefoxDriver</td></tr><tr><td class="line">32</td><td class="hits"></td><td class="source"> * @class Timeout</td></tr><tr><td class="line">33</td><td class="hits"></td><td class="source"> * @namespace FirefoxDriver.Commands.Marionette</td></tr><tr><td class="line">34</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">35</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">36</td><td class="hits">1</td><td class="source">module.exports = function (Marionette) {</td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">38</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">39</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">40</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">41</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">42</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">43</td><td class="hits"></td><td class="source">    name: 'implicitWait',</td></tr><tr><td class="line">44</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">45</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">46</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">47</td><td class="hits"></td><td class="source">      value: ':timeout',</td></tr><tr><td class="line">48</td><td class="hits"></td><td class="source">      name: 'setSearchTimeout'</td></tr><tr><td class="line">49</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">50</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">51</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">52</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">53</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/url.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/url.js</h2><div id="stats" class="low"><div class="percentage">28%</div><div class="sloc">7</div><div class="hits">2</div><div class="misses">5</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">28</td><td class="hits"></td><td class="source"> * Url related Marionette commands</td></tr><tr><td class="line">29</td><td class="hits"></td><td class="source"> * see [JsonProtocol](https://wiki.mozilla.org/Auto-tools/Projects/Marionette/JSON_Protocol)</td></tr><tr><td class="line">30</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">31</td><td class="hits"></td><td class="source"> * @module FirefoxDriver</td></tr><tr><td class="line">32</td><td class="hits"></td><td class="source"> * @class Url</td></tr><tr><td class="line">33</td><td class="hits"></td><td class="source"> * @namespace FirefoxDriver.Commands.Marionette</td></tr><tr><td class="line">34</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">35</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">36</td><td class="hits">1</td><td class="source">module.exports = function (Marionette) {</td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">38</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">39</td><td class="hits"></td><td class="source">   * Navigate to a new URL</td></tr><tr><td class="line">40</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">41</td><td class="hits"></td><td class="source">   * @method open</td></tr><tr><td class="line">42</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">43</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">44</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">45</td><td class="hits"></td><td class="source">    name: 'open',</td></tr><tr><td class="line">46</td><td class="hits"></td><td class="source">    params: ['url'],</td></tr><tr><td class="line">47</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">48</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">49</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">50</td><td class="hits"></td><td class="source">      name: 'goUrl',</td></tr><tr><td class="line">51</td><td class="hits"></td><td class="source">      parameters: {</td></tr><tr><td class="line">52</td><td class="hits"></td><td class="source">        url: ':url'</td></tr><tr><td class="line">53</td><td class="hits"></td><td class="source">      }</td></tr><tr><td class="line">54</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">55</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">56</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">57</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">58</td><td class="hits"></td><td class="source">   * Retrieve the URL of the current page</td></tr><tr><td class="line">59</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">60</td><td class="hits"></td><td class="source">   * @method url</td></tr><tr><td class="line">61</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">62</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">63</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">64</td><td class="hits"></td><td class="source">    name: 'url',</td></tr><tr><td class="line">65</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">66</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">67</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">68</td><td class="hits"></td><td class="source">      name: 'getUrl'</td></tr><tr><td class="line">69</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">70</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">71</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">72</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">73</td><td class="hits"></td><td class="source">   * Navigate backwards in the browser history, if possible</td></tr><tr><td class="line">74</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">75</td><td class="hits"></td><td class="source">   * @method back</td></tr><tr><td class="line">76</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">77</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">78</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">79</td><td class="hits"></td><td class="source">    name: 'back',</td></tr><tr><td class="line">80</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">81</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">82</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">83</td><td class="hits"></td><td class="source">      name: 'goBack'</td></tr><tr><td class="line">84</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">85</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">86</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">87</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">88</td><td class="hits"></td><td class="source">   * Navigate forwards in the browser history, if possible.</td></tr><tr><td class="line">89</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">90</td><td class="hits"></td><td class="source">   * @method forward</td></tr><tr><td class="line">91</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">92</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">93</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">94</td><td class="hits"></td><td class="source">    name: 'forward',</td></tr><tr><td class="line">95</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">96</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">97</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">98</td><td class="hits"></td><td class="source">      name: 'goForward'</td></tr><tr><td class="line">99</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">100</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">101</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">102</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">103</td><td class="hits"></td><td class="source">   * Refresh the current page</td></tr><tr><td class="line">104</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">105</td><td class="hits"></td><td class="source">   * @method refresh</td></tr><tr><td class="line">106</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">107</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">108</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">109</td><td class="hits"></td><td class="source">    name: 'refresh',</td></tr><tr><td class="line">110</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">111</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">112</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">113</td><td class="hits"></td><td class="source">      name: 'refresh'</td></tr><tr><td class="line">114</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">115</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">116</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">117</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">118</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/window.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/marionette/window.js</h2><div id="stats" class="low"><div class="percentage">40%</div><div class="sloc">5</div><div class="hits">2</div><div class="misses">3</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">28</td><td class="hits"></td><td class="source"> * Window related Marionette commands</td></tr><tr><td class="line">29</td><td class="hits"></td><td class="source"> * see [JsonProtocol](https://wiki.mozilla.org/Auto-tools/Projects/Marionette/JSON_Protocol)</td></tr><tr><td class="line">30</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">31</td><td class="hits"></td><td class="source"> * @module FirefoxDriver</td></tr><tr><td class="line">32</td><td class="hits"></td><td class="source"> * @class Window</td></tr><tr><td class="line">33</td><td class="hits"></td><td class="source"> * @namespace FirefoxDriver.Commands.Marionette</td></tr><tr><td class="line">34</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">35</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">36</td><td class="hits">1</td><td class="source">module.exports = function (Marionette) {</td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">38</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">39</td><td class="hits"></td><td class="source">   * Gets the current window size</td></tr><tr><td class="line">40</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">41</td><td class="hits"></td><td class="source">   * @method windowSize</td></tr><tr><td class="line">42</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">43</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">44</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">45</td><td class="hits"></td><td class="source">    name: 'windowSize',</td></tr><tr><td class="line">46</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">47</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">48</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">49</td><td class="hits"></td><td class="source">      name: 'executeScript',</td></tr><tr><td class="line">50</td><td class="hits"></td><td class="source">      value: ':value',</td></tr><tr><td class="line">51</td><td class="hits"></td><td class="source">      newSandbox: false</td></tr><tr><td class="line">52</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">53</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">54</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">55</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">56</td><td class="hits"></td><td class="source">   * Returns the current window handle</td></tr><tr><td class="line">57</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">58</td><td class="hits"></td><td class="source">   * @method windowHandles</td></tr><tr><td class="line">59</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">60</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">61</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">62</td><td class="hits"></td><td class="source">    name: 'windowHandles',</td></tr><tr><td class="line">63</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">64</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">65</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">66</td><td class="hits"></td><td class="source">      name: 'getWindows'</td></tr><tr><td class="line">67</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">68</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">69</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">70</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">71</td><td class="hits"></td><td class="source">   * Switches the active window</td></tr><tr><td class="line">72</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">73</td><td class="hits"></td><td class="source">   * @method changeWindow</td></tr><tr><td class="line">74</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">75</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">76</td><td class="hits">0</td><td class="source">  Marionette.addCommand({</td></tr><tr><td class="line">77</td><td class="hits"></td><td class="source">    name: 'changeWindow',</td></tr><tr><td class="line">78</td><td class="hits"></td><td class="source">    request: {</td></tr><tr><td class="line">79</td><td class="hits"></td><td class="source">      to: ':marionetteId',</td></tr><tr><td class="line">80</td><td class="hits"></td><td class="source">      session: ':sessionId',</td></tr><tr><td class="line">81</td><td class="hits"></td><td class="source">      name: 'switchToWindow',</td></tr><tr><td class="line">82</td><td class="hits"></td><td class="source">      parameters: {</td></tr><tr><td class="line">83</td><td class="hits"></td><td class="source">        value: ':value'</td></tr><tr><td class="line">84</td><td class="hits"></td><td class="source">      }</td></tr><tr><td class="line">85</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">86</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">87</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">88</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">89</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/cookie.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/cookie.js</h2><div id="stats" class="terrible"><div class="percentage">16%</div><div class="sloc">12</div><div class="hits">2</div><div class="misses">10</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">28</td><td class="hits"></td><td class="source"> * Cookie related WebDriver endpoints</td></tr><tr><td class="line">29</td><td class="hits"></td><td class="source"> * see [JsonWireProtocol](https://code.google.com/p/selenium/wiki/JsonWireProtocol)</td></tr><tr><td class="line">30</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">31</td><td class="hits"></td><td class="source"> * @module FirefoxDriver</td></tr><tr><td class="line">32</td><td class="hits"></td><td class="source"> * @class Cookie</td></tr><tr><td class="line">33</td><td class="hits"></td><td class="source"> * @namespace FirefoxDriver.Commands.WebDriver</td></tr><tr><td class="line">34</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">35</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">36</td><td class="hits">1</td><td class="source">module.exports = function (Driver) {</td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">38</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">39</td><td class="hits"></td><td class="source">   * Set a cookie. If the cookie path is not specified, it should be set to &quot;/&quot;.</td></tr><tr><td class="line">40</td><td class="hits"></td><td class="source">   * Likewise, if the domain is omitted, it should default to the current page's domain.</td></tr><tr><td class="line">41</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">42</td><td class="hits"></td><td class="source">   * @method cookies</td></tr><tr><td class="line">43</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/cookie</td></tr><tr><td class="line">44</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">45</td><td class="hits"></td><td class="source">   * @param {POST} cookie A JSON object defining the cookie to add.</td></tr><tr><td class="line">46</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">47</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">48</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">49</td><td class="hits"></td><td class="source">    name: 'cookies',</td></tr><tr><td class="line">50</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/cookie',</td></tr><tr><td class="line">51</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">52</td><td class="hits"></td><td class="source">    params: {cookie: 'cookie'},</td></tr><tr><td class="line">53</td><td class="hits"></td><td class="source">    onRequest: function (req, res) {</td></tr><tr><td class="line">54</td><td class="hits"></td><td class="source">      // load the marionette connection id &amp; then request the session id</td></tr><tr class="miss"><td class="line">55</td><td class="hits">0</td><td class="source">      this.events.emit('marionette:cmd:cookies', {'sessionId': req.params.sessionId, 'cookie': {'name': req.body.cookie.name, 'value': req.body.cookie.value}});</td></tr><tr class="miss"><td class="line">56</td><td class="hits">0</td><td class="source">      this.events.on('marionette:cmd:cookies:response', function (data) {</td></tr><tr class="miss"><td class="line">57</td><td class="hits">0</td><td class="source">        data = JSON.parse(data);</td></tr><tr class="miss"><td class="line">58</td><td class="hits">0</td><td class="source">        var answer = {</td></tr><tr><td class="line">59</td><td class="hits"></td><td class="source">          sessionId: req.params.sessionId,</td></tr><tr><td class="line">60</td><td class="hits"></td><td class="source">          status: 0,</td></tr><tr><td class="line">61</td><td class="hits"></td><td class="source">          value: data.value</td></tr><tr><td class="line">62</td><td class="hits"></td><td class="source">        };</td></tr><tr><td class="line">63</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">64</td><td class="hits">0</td><td class="source">        res.status(200);</td></tr><tr class="miss"><td class="line">65</td><td class="hits">0</td><td class="source">        res.send(JSON.stringify(answer));</td></tr><tr><td class="line">66</td><td class="hits"></td><td class="source">      }.bind(this));</td></tr><tr><td class="line">67</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">68</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">69</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">70</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">71</td><td class="hits"></td><td class="source">   * Retrieve all cookies visible to the current page.</td></tr><tr><td class="line">72</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">73</td><td class="hits"></td><td class="source">   * @method getCookies</td></tr><tr><td class="line">74</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/cookie</td></tr><tr><td class="line">75</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">76</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">77</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">78</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">79</td><td class="hits"></td><td class="source">    name: 'getCookies',</td></tr><tr><td class="line">80</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/cookie',</td></tr><tr><td class="line">81</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">82</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">83</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">84</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">85</td><td class="hits"></td><td class="source">   * Delete all cookies visible to the current page.</td></tr><tr><td class="line">86</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">87</td><td class="hits"></td><td class="source">   * @method deleteCookies</td></tr><tr><td class="line">88</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#DELETE_/session/:sessionId/cookie</td></tr><tr><td class="line">89</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">90</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">91</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">92</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">93</td><td class="hits"></td><td class="source">    name: 'deleteCookies',</td></tr><tr><td class="line">94</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/cookie',</td></tr><tr><td class="line">95</td><td class="hits"></td><td class="source">    method: 'del'</td></tr><tr><td class="line">96</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">97</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">98</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">99</td><td class="hits"></td><td class="source">   * Delete the cookie with the given name.</td></tr><tr><td class="line">100</td><td class="hits"></td><td class="source">   * This command should be a no-op if there is no such cookie visible to the current page.</td></tr><tr><td class="line">101</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">102</td><td class="hits"></td><td class="source">   * @method deleteCookie</td></tr><tr><td class="line">103</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#DELETE_/session/:sessionId/cookie</td></tr><tr><td class="line">104</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">105</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">106</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">107</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">108</td><td class="hits"></td><td class="source">    name: 'deleteCookie',</td></tr><tr><td class="line">109</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/cookie/:name',</td></tr><tr><td class="line">110</td><td class="hits"></td><td class="source">    method: 'del'</td></tr><tr><td class="line">111</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">112</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">113</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">114</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/element.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/element.js</h2><div id="stats" class="terrible"><div class="percentage">3%</div><div class="sloc">55</div><div class="hits">2</div><div class="misses">53</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">28</td><td class="hits"></td><td class="source"> * Element related WebDriver endpoints</td></tr><tr><td class="line">29</td><td class="hits"></td><td class="source"> * see [JsonWireProtocol](https://code.google.com/p/selenium/wiki/JsonWireProtocol)</td></tr><tr><td class="line">30</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">31</td><td class="hits"></td><td class="source"> * @module FirefoxDriver</td></tr><tr><td class="line">32</td><td class="hits"></td><td class="source"> * @class Element</td></tr><tr><td class="line">33</td><td class="hits"></td><td class="source"> * @namespace FirefoxDriver.Commands.WebDriver</td></tr><tr><td class="line">34</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">35</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">36</td><td class="hits">1</td><td class="source">module.exports = function (Driver) {</td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">38</td><td class="hits"></td><td class="source">  // check if the driver helper literal has been created yet</td></tr><tr class="miss"><td class="line">39</td><td class="hits">0</td><td class="source">  if (!Driver._helper) {</td></tr><tr class="miss"><td class="line">40</td><td class="hits">0</td><td class="source">    Driver._helper = {};</td></tr><tr><td class="line">41</td><td class="hits"></td><td class="source">  }</td></tr><tr><td class="line">42</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">43</td><td class="hits"></td><td class="source">  // Helper</td></tr><tr><td class="line">44</td><td class="hits"></td><td class="source">  // ------</td></tr><tr><td class="line">45</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">46</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">47</td><td class="hits"></td><td class="source">   * Parses an element return value</td></tr><tr><td class="line">48</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">49</td><td class="hits"></td><td class="source">   * @method parseElement</td></tr><tr><td class="line">50</td><td class="hits"></td><td class="source">   * @param {object} element Marionette return value of an element call</td></tr><tr><td class="line">51</td><td class="hits"></td><td class="source">   * @return {object|number} Webdriver compatible element response</td></tr><tr><td class="line">52</td><td class="hits"></td><td class="source">   * @private</td></tr><tr><td class="line">53</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">54</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">55</td><td class="hits">0</td><td class="source">  Driver._helper.parseElement = function (element) {</td></tr><tr class="miss"><td class="line">56</td><td class="hits">0</td><td class="source">    element = JSON.parse(element);</td></tr><tr class="miss"><td class="line">57</td><td class="hits">0</td><td class="source">    return (!element.value) ? -1 : {ELEMENT: element.value.ELEMENT};</td></tr><tr><td class="line">58</td><td class="hits"></td><td class="source">  };</td></tr><tr><td class="line">59</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">60</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">61</td><td class="hits"></td><td class="source">   * Parses multi elements return value</td></tr><tr><td class="line">62</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">63</td><td class="hits"></td><td class="source">   * @method parseElements</td></tr><tr><td class="line">64</td><td class="hits"></td><td class="source">   * @param {object} element Marionette return value of an elements call</td></tr><tr><td class="line">65</td><td class="hits"></td><td class="source">   * @return {object|number} Webdriver compatible elements response</td></tr><tr><td class="line">66</td><td class="hits"></td><td class="source">   * @private</td></tr><tr><td class="line">67</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">68</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">69</td><td class="hits">0</td><td class="source">  Driver._helper.parseElements = function (elements) {</td></tr><tr class="miss"><td class="line">70</td><td class="hits">0</td><td class="source">    elements = JSON.parse(elements);</td></tr><tr class="miss"><td class="line">71</td><td class="hits">0</td><td class="source">    if (!elements.value) {</td></tr><tr class="miss"><td class="line">72</td><td class="hits">0</td><td class="source">      return -1;</td></tr><tr><td class="line">73</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">74</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">75</td><td class="hits">0</td><td class="source">    var dt = [];</td></tr><tr class="miss"><td class="line">76</td><td class="hits">0</td><td class="source">    elements.value.forEach(function (el) {</td></tr><tr class="miss"><td class="line">77</td><td class="hits">0</td><td class="source">      dt.push({ELEMENT: el});</td></tr><tr><td class="line">78</td><td class="hits"></td><td class="source">    });</td></tr><tr><td class="line">79</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">80</td><td class="hits">0</td><td class="source">    return dt;</td></tr><tr><td class="line">81</td><td class="hits"></td><td class="source">  };</td></tr><tr><td class="line">82</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">83</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">84</td><td class="hits"></td><td class="source">   * Generic multi elements response handler</td></tr><tr><td class="line">85</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">86</td><td class="hits"></td><td class="source">   * @method multiElementResponse</td></tr><tr><td class="line">87</td><td class="hits"></td><td class="source">   * @param {object} req Original request</td></tr><tr><td class="line">88</td><td class="hits"></td><td class="source">   * @param {object} res Original response</td></tr><tr><td class="line">89</td><td class="hits"></td><td class="source">   * @private</td></tr><tr><td class="line">90</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">91</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">92</td><td class="hits">0</td><td class="source">  Driver._helper.multiElementResponse = function (req, res, elements) {</td></tr><tr class="miss"><td class="line">93</td><td class="hits">0</td><td class="source">    var answer = {</td></tr><tr><td class="line">94</td><td class="hits"></td><td class="source">      sessionId: req.params.sessionId,</td></tr><tr><td class="line">95</td><td class="hits"></td><td class="source">      status: 0,</td></tr><tr><td class="line">96</td><td class="hits"></td><td class="source">      value: Driver._helper.parseElements(elements)</td></tr><tr><td class="line">97</td><td class="hits"></td><td class="source">    };</td></tr><tr><td class="line">98</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">99</td><td class="hits">0</td><td class="source">    res.status(200);</td></tr><tr class="miss"><td class="line">100</td><td class="hits">0</td><td class="source">    res.send(JSON.stringify(answer));</td></tr><tr><td class="line">101</td><td class="hits"></td><td class="source">  };</td></tr><tr><td class="line">102</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">103</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">104</td><td class="hits"></td><td class="source">   * Generic single element response handler</td></tr><tr><td class="line">105</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">106</td><td class="hits"></td><td class="source">   * @method singleElementResponse</td></tr><tr><td class="line">107</td><td class="hits"></td><td class="source">   * @param {object} req Original request</td></tr><tr><td class="line">108</td><td class="hits"></td><td class="source">   * @param {object} res Original response</td></tr><tr><td class="line">109</td><td class="hits"></td><td class="source">   * @private</td></tr><tr><td class="line">110</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">111</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">112</td><td class="hits">0</td><td class="source">  Driver._helper.singleElementResponse = function (req, res, element) {</td></tr><tr class="miss"><td class="line">113</td><td class="hits">0</td><td class="source">    var answer = {</td></tr><tr><td class="line">114</td><td class="hits"></td><td class="source">      sessionId: req.params.sessionId,</td></tr><tr><td class="line">115</td><td class="hits"></td><td class="source">      status: 0,</td></tr><tr><td class="line">116</td><td class="hits"></td><td class="source">      value: Driver._helper.parseElement(element)</td></tr><tr><td class="line">117</td><td class="hits"></td><td class="source">    };</td></tr><tr><td class="line">118</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">119</td><td class="hits">0</td><td class="source">    res.status(200);</td></tr><tr class="miss"><td class="line">120</td><td class="hits">0</td><td class="source">    res.send(JSON.stringify(answer));</td></tr><tr><td class="line">121</td><td class="hits"></td><td class="source">  };</td></tr><tr><td class="line">122</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">123</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">124</td><td class="hits"></td><td class="source">   * Search for an element on the page, starting from the document root.</td></tr><tr><td class="line">125</td><td class="hits"></td><td class="source">   * The located element will be returned as a WebElement JSON object.</td></tr><tr><td class="line">126</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">127</td><td class="hits"></td><td class="source">   * @method element</td></tr><tr><td class="line">128</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#/session/:sessionId/element</td></tr><tr><td class="line">129</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">130</td><td class="hits"></td><td class="source">   * @param {POST} using The locator strategy to use. // Not yet supported</td></tr><tr><td class="line">131</td><td class="hits"></td><td class="source">   * @param {POST} value The The search target.</td></tr><tr><td class="line">132</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">133</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">134</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">135</td><td class="hits"></td><td class="source">    name: 'element',</td></tr><tr><td class="line">136</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/element',</td></tr><tr><td class="line">137</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">138</td><td class="hits"></td><td class="source">    onRequest: function (req, res) {</td></tr><tr><td class="line">139</td><td class="hits"></td><td class="source">      // load the marionette connection id &amp; then request the session id</td></tr><tr class="miss"><td class="line">140</td><td class="hits">0</td><td class="source">      this.events.emit('marionette:cmd:element', {'sessionId': req.params.sessionId, 'selector': req.body.value});</td></tr><tr class="miss"><td class="line">141</td><td class="hits">0</td><td class="source">      this.events.on('marionette:cmd:element:response', Driver._helper.singleElementResponse.bind(this, req, res));</td></tr><tr><td class="line">142</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">143</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">144</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">145</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">146</td><td class="hits"></td><td class="source">   * Search for an element on the page, starting from the identified element.</td></tr><tr><td class="line">147</td><td class="hits"></td><td class="source">   * The located element will be returned as a WebElement JSON object.</td></tr><tr><td class="line">148</td><td class="hits"></td><td class="source">   * The table below lists the locator strategies that each server should support.</td></tr><tr><td class="line">149</td><td class="hits"></td><td class="source">   * Each locator must return the first matching element located in the DOM.</td></tr><tr><td class="line">150</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">151</td><td class="hits"></td><td class="source">   * @method childElement</td></tr><tr><td class="line">152</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#/session/:sessionId/:id/element</td></tr><tr><td class="line">153</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">154</td><td class="hits"></td><td class="source">   * @param {GET} elementId ID of the element to route the command to</td></tr><tr><td class="line">155</td><td class="hits"></td><td class="source">   * @param {POST} using The locator strategy to use. // Not yet supported</td></tr><tr><td class="line">156</td><td class="hits"></td><td class="source">   * @param {POST} value The The search target.</td></tr><tr><td class="line">157</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">158</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">159</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">160</td><td class="hits"></td><td class="source">    name: 'childElement',</td></tr><tr><td class="line">161</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/element/:elementId/element',</td></tr><tr><td class="line">162</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">163</td><td class="hits"></td><td class="source">    onRequest: function (req, res) {</td></tr><tr><td class="line">164</td><td class="hits"></td><td class="source">      // load the marionette connection id &amp; then request the session id</td></tr><tr class="miss"><td class="line">165</td><td class="hits">0</td><td class="source">      this.events.emit('marionette:cmd:childElement', {'sessionId': req.params.sessionId, 'elementId': req.params.elementId, 'selector': req.body.value});</td></tr><tr class="miss"><td class="line">166</td><td class="hits">0</td><td class="source">      this.events.on('marionette:cmd:childElement:response', Driver._helper.singleElementResponse.bind(this, req, res));</td></tr><tr><td class="line">167</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">168</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">169</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">170</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">171</td><td class="hits"></td><td class="source">   * Search for multiple elements on the page, starting from the document root.</td></tr><tr><td class="line">172</td><td class="hits"></td><td class="source">   * The located element will be returned as a WebElement JSON object.</td></tr><tr><td class="line">173</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">174</td><td class="hits"></td><td class="source">   * @method elements</td></tr><tr><td class="line">175</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#/session/:sessionId/elements</td></tr><tr><td class="line">176</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">177</td><td class="hits"></td><td class="source">   * @param {POST} using The locator strategy to use. // Not yet supported</td></tr><tr><td class="line">178</td><td class="hits"></td><td class="source">   * @param {POST} value The The search target.</td></tr><tr><td class="line">179</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">180</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">181</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">182</td><td class="hits"></td><td class="source">    name: 'elements',</td></tr><tr><td class="line">183</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/elements',</td></tr><tr><td class="line">184</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">185</td><td class="hits"></td><td class="source">    onRequest: function (req, res) {</td></tr><tr><td class="line">186</td><td class="hits"></td><td class="source">      // load the marionette connection id &amp; then request the session id</td></tr><tr class="miss"><td class="line">187</td><td class="hits">0</td><td class="source">      this.events.emit('marionette:cmd:elements', {'sessionId': req.params.sessionId, 'selector': req.body.value});</td></tr><tr class="miss"><td class="line">188</td><td class="hits">0</td><td class="source">      this.events.on('marionette:cmd:elements:response', Driver._helper.multiElementResponse.bind(this, req, res));</td></tr><tr><td class="line">189</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">190</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">191</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">192</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">193</td><td class="hits"></td><td class="source">   * Search for multiple elements on the page, starting from the identified element.</td></tr><tr><td class="line">194</td><td class="hits"></td><td class="source">   * The located elements will be returned as a WebElement JSON objects.</td></tr><tr><td class="line">195</td><td class="hits"></td><td class="source">   * The table below lists the locator strategies that each server should support.</td></tr><tr><td class="line">196</td><td class="hits"></td><td class="source">   * Elements should be returned in the order located in the DOM.</td></tr><tr><td class="line">197</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">198</td><td class="hits"></td><td class="source">   * @method childElements</td></tr><tr><td class="line">199</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#/session/:sessionId/elements/:id/elements</td></tr><tr><td class="line">200</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">201</td><td class="hits"></td><td class="source">   * @param {GET} elementId ID of the element to route the command to</td></tr><tr><td class="line">202</td><td class="hits"></td><td class="source">   * @param {POST} using The locator strategy to use. // Not yet supported</td></tr><tr><td class="line">203</td><td class="hits"></td><td class="source">   * @param {POST} value The The search target.</td></tr><tr><td class="line">204</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">205</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">206</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">207</td><td class="hits"></td><td class="source">    name: 'childElements',</td></tr><tr><td class="line">208</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/elements/:elementId/elements',</td></tr><tr><td class="line">209</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">210</td><td class="hits"></td><td class="source">    onRequest: function (req, res) {</td></tr><tr><td class="line">211</td><td class="hits"></td><td class="source">      // load the marionette connection id &amp; then request the session id</td></tr><tr class="miss"><td class="line">212</td><td class="hits">0</td><td class="source">      this.events.emit('marionette:cmd:childElements', {'sessionId': req.params.sessionId, 'elementId': req.params.elementId, 'selector': req.body.value});</td></tr><tr class="miss"><td class="line">213</td><td class="hits">0</td><td class="source">      this.events.on('marionette:cmd:childElements:response', Driver._helper.multiElementResponse.bind(this, req, res));</td></tr><tr><td class="line">214</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">215</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">216</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">217</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">218</td><td class="hits"></td><td class="source">   * Click on an element.</td></tr><tr><td class="line">219</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">220</td><td class="hits"></td><td class="source">   * @method click</td></tr><tr><td class="line">221</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#/session/:sessionId/element/:id/click</td></tr><tr><td class="line">222</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">223</td><td class="hits"></td><td class="source">   * @param {GET} elementId ID of the element to route the command to</td></tr><tr><td class="line">224</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">225</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">226</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">227</td><td class="hits"></td><td class="source">    name: 'click',</td></tr><tr><td class="line">228</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/element/:elementId/click',</td></tr><tr><td class="line">229</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">230</td><td class="hits"></td><td class="source">    timeout: 1500</td></tr><tr><td class="line">231</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">232</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">233</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">234</td><td class="hits"></td><td class="source">   * Submit a FORM element.</td></tr><tr><td class="line">235</td><td class="hits"></td><td class="source">   * The submit command may also be applied to any element that is a descendant of a FORM element.</td></tr><tr><td class="line">236</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">237</td><td class="hits"></td><td class="source">   * @method submit</td></tr><tr><td class="line">238</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#/session/:sessionId/element/:id/submit</td></tr><tr><td class="line">239</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">240</td><td class="hits"></td><td class="source">   * @param {GET} elementId ID of the element to route the command to</td></tr><tr><td class="line">241</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">242</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">243</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">244</td><td class="hits"></td><td class="source">    name: 'submit',</td></tr><tr><td class="line">245</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/element/:elementId/submit',</td></tr><tr><td class="line">246</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">247</td><td class="hits"></td><td class="source">    timeout: 1000</td></tr><tr><td class="line">248</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">249</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">250</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">251</td><td class="hits"></td><td class="source">   * Send a sequence of key strokes to an element</td></tr><tr><td class="line">252</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">253</td><td class="hits"></td><td class="source">   * @method value</td></tr><tr><td class="line">254</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#/session/:sessionId/element/:id/value</td></tr><tr><td class="line">255</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">256</td><td class="hits"></td><td class="source">   * @param {GET} elementId ID of the element to route the command to</td></tr><tr><td class="line">257</td><td class="hits"></td><td class="source">   * @param {POST} value The keys sequence to be sent</td></tr><tr><td class="line">258</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">259</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">260</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">261</td><td class="hits"></td><td class="source">    name: 'val',</td></tr><tr><td class="line">262</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/element/:elementId/value',</td></tr><tr><td class="line">263</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">264</td><td class="hits"></td><td class="source">    params: {value: 'value'}</td></tr><tr><td class="line">265</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">266</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">267</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">268</td><td class="hits"></td><td class="source">   * Clears the contents of an element</td></tr><tr><td class="line">269</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">270</td><td class="hits"></td><td class="source">   * @method value</td></tr><tr><td class="line">271</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#/session/:sessionId/element/:id/value</td></tr><tr><td class="line">272</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">273</td><td class="hits"></td><td class="source">   * @param {GET} elementId ID of the element to route the command to</td></tr><tr><td class="line">274</td><td class="hits"></td><td class="source">   * @param {POST} value The keys sequence to be sent</td></tr><tr><td class="line">275</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">276</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">277</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">278</td><td class="hits"></td><td class="source">    name: 'clear',</td></tr><tr><td class="line">279</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/element/:elementId/clear',</td></tr><tr><td class="line">280</td><td class="hits"></td><td class="source">    method: 'post'</td></tr><tr><td class="line">281</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">282</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">283</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">284</td><td class="hits"></td><td class="source">    name: 'submit',</td></tr><tr><td class="line">285</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/element/:elementId/submit',</td></tr><tr><td class="line">286</td><td class="hits"></td><td class="source">    method: 'post'</td></tr><tr><td class="line">287</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">288</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">289</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">290</td><td class="hits"></td><td class="source">   * Send a sequence of key strokes to the active element.</td></tr><tr><td class="line">291</td><td class="hits"></td><td class="source">   * This command is similar to the send keys command in every aspect except the implicit termination:</td></tr><tr><td class="line">292</td><td class="hits"></td><td class="source">   * The modifiers are not released at the end of the call.</td></tr><tr><td class="line">293</td><td class="hits"></td><td class="source">   * Rather, the state of the modifier keys is kept between calls,</td></tr><tr><td class="line">294</td><td class="hits"></td><td class="source">   * so mouse interactions can be performed while modifier keys are depressed.</td></tr><tr><td class="line">295</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">296</td><td class="hits"></td><td class="source">   * @method keys</td></tr><tr><td class="line">297</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#/session/:sessionId/keys</td></tr><tr><td class="line">298</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">299</td><td class="hits"></td><td class="source">   * @param {POST} value  The keys sequence to be sent</td></tr><tr><td class="line">300</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">301</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">302</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">303</td><td class="hits"></td><td class="source">    name: 'keys',</td></tr><tr><td class="line">304</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/keys',</td></tr><tr><td class="line">305</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">306</td><td class="hits"></td><td class="source">    params: {value: 'value'}</td></tr><tr><td class="line">307</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">308</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">309</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">310</td><td class="hits"></td><td class="source">   * Returns the visible text for the element.</td></tr><tr><td class="line">311</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">312</td><td class="hits"></td><td class="source">   * @method text</td></tr><tr><td class="line">313</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#/session/:sessionId/element/:id/text</td></tr><tr><td class="line">314</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">315</td><td class="hits"></td><td class="source">   * @param {GET} elementId ID of the element to route the command to</td></tr><tr><td class="line">316</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">317</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">318</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">319</td><td class="hits"></td><td class="source">    name: 'text',</td></tr><tr><td class="line">320</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/element/:elementId/text',</td></tr><tr><td class="line">321</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">322</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">323</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">324</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">325</td><td class="hits"></td><td class="source">   * Get the value of an element's attribute.</td></tr><tr><td class="line">326</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">327</td><td class="hits"></td><td class="source">   * @method attribute</td></tr><tr><td class="line">328</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#/session/:sessionId/element/:id/attribute/:name</td></tr><tr><td class="line">329</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">330</td><td class="hits"></td><td class="source">   * @param {GET} elementId ID of the element to route the command to</td></tr><tr><td class="line">331</td><td class="hits"></td><td class="source">   * @param {GET} attr Attribute that should be fetched</td></tr><tr><td class="line">332</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">333</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">334</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">335</td><td class="hits"></td><td class="source">    name: 'attribute',</td></tr><tr><td class="line">336</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/element/:elementId/attribute/:attr',</td></tr><tr><td class="line">337</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">338</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">339</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">340</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">341</td><td class="hits"></td><td class="source">   * Determine an element's location on the page.</td></tr><tr><td class="line">342</td><td class="hits"></td><td class="source">   * The point (0, 0) refers to the upper-left corner of the page.</td></tr><tr><td class="line">343</td><td class="hits"></td><td class="source">   * The element's coordinates are returned as a JSON object with x and y properties.</td></tr><tr><td class="line">344</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">345</td><td class="hits"></td><td class="source">   * @method displayed</td></tr><tr><td class="line">346</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#/session/:sessionId/element/:id/displayed</td></tr><tr><td class="line">347</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">348</td><td class="hits"></td><td class="source">   * @param {GET} elementId ID of the element to route the command to</td></tr><tr><td class="line">349</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">350</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">351</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">352</td><td class="hits"></td><td class="source">    name: 'displayed',</td></tr><tr><td class="line">353</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/element/:elementId/displayed',</td></tr><tr><td class="line">354</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">355</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">356</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">357</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">358</td><td class="hits"></td><td class="source">   * Query for an element's tag name</td></tr><tr><td class="line">359</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">360</td><td class="hits"></td><td class="source">   * @method tagName</td></tr><tr><td class="line">361</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/element/:id/name</td></tr><tr><td class="line">362</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">363</td><td class="hits"></td><td class="source">   * @param {GET} elementId ID of the element to route the command to</td></tr><tr><td class="line">364</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">365</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">366</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">367</td><td class="hits"></td><td class="source">    name: 'tagName',</td></tr><tr><td class="line">368</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/element/:elementId/name',</td></tr><tr><td class="line">369</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">370</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">371</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">372</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">373</td><td class="hits"></td><td class="source">   * Clear a TEXTAREA or text INPUT element's value</td></tr><tr><td class="line">374</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">375</td><td class="hits"></td><td class="source">   * @method clear</td></tr><tr><td class="line">376</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/element/:id/clear</td></tr><tr><td class="line">377</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">378</td><td class="hits"></td><td class="source">   * @param {GET} elementId ID of the element to route the command to</td></tr><tr><td class="line">379</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">380</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">381</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">382</td><td class="hits"></td><td class="source">    name: 'clear',</td></tr><tr><td class="line">383</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/element/:elementId/clear',</td></tr><tr><td class="line">384</td><td class="hits"></td><td class="source">    method: 'post'</td></tr><tr><td class="line">385</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">386</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">387</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">388</td><td class="hits"></td><td class="source">   * Determine if an OPTION element, or an INPUT element of type checkbox or radiobutton is currently selected</td></tr><tr><td class="line">389</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">390</td><td class="hits"></td><td class="source">   * @method selected</td></tr><tr><td class="line">391</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/element/:id/selected</td></tr><tr><td class="line">392</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">393</td><td class="hits"></td><td class="source">   * @param {GET} elementId ID of the element to route the command to</td></tr><tr><td class="line">394</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">395</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">396</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">397</td><td class="hits"></td><td class="source">    name: 'selected',</td></tr><tr><td class="line">398</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/element/:elementId/selected',</td></tr><tr><td class="line">399</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">400</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">401</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">402</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">403</td><td class="hits"></td><td class="source">   * Determine if an element is currently enabled</td></tr><tr><td class="line">404</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">405</td><td class="hits"></td><td class="source">   * @method enabled</td></tr><tr><td class="line">406</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/element/:id/enabled</td></tr><tr><td class="line">407</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">408</td><td class="hits"></td><td class="source">   * @param {GET} elementId ID of the element to route the command to</td></tr><tr><td class="line">409</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">410</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">411</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">412</td><td class="hits"></td><td class="source">    name: 'enabled',</td></tr><tr><td class="line">413</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/element/:elementId/enabled',</td></tr><tr><td class="line">414</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">415</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">416</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">417</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">418</td><td class="hits"></td><td class="source">   * Test if two element IDs refer to the same DOM element</td></tr><tr><td class="line">419</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">420</td><td class="hits"></td><td class="source">   * @method equals</td></tr><tr><td class="line">421</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/element/:id/equals/:other</td></tr><tr><td class="line">422</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">423</td><td class="hits"></td><td class="source">   * @param {GET} elementId ID of the element to route the command to</td></tr><tr><td class="line">424</td><td class="hits"></td><td class="source">   * @param {GET} other ID of the element to compare</td></tr><tr><td class="line">425</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">426</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">427</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">428</td><td class="hits"></td><td class="source">    name: 'equals',</td></tr><tr><td class="line">429</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/element/:elementId/equals/:other',</td></tr><tr><td class="line">430</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">431</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">432</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">433</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">434</td><td class="hits"></td><td class="source">   * Determine an element's location on the page. The point (0, 0) refers to the upper-left corner of the page.</td></tr><tr><td class="line">435</td><td class="hits"></td><td class="source">   * The element's coordinates are returned as a JSON object with x and y properties.</td></tr><tr><td class="line">436</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">437</td><td class="hits"></td><td class="source">   * @method location</td></tr><tr><td class="line">438</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/element/:id/location</td></tr><tr><td class="line">439</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">440</td><td class="hits"></td><td class="source">   * @param {GET} elementId ID of the element to route the command to</td></tr><tr><td class="line">441</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">442</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">443</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">444</td><td class="hits"></td><td class="source">    name: 'location',</td></tr><tr><td class="line">445</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/element/:elementId/location',</td></tr><tr><td class="line">446</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">447</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">448</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">449</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">450</td><td class="hits"></td><td class="source">   * Determine an element's location on the screen once it has been scrolled into view.</td></tr><tr><td class="line">451</td><td class="hits"></td><td class="source">   * Note: This is considered an internal command and should only be used to determine an element's location for correctly generating native events.</td></tr><tr><td class="line">452</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">453</td><td class="hits"></td><td class="source">   * @method locationInView</td></tr><tr><td class="line">454</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/element/:id/location_in_view</td></tr><tr><td class="line">455</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">456</td><td class="hits"></td><td class="source">   * @param {GET} elementId ID of the element to route the command to</td></tr><tr><td class="line">457</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">458</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">459</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">460</td><td class="hits"></td><td class="source">    name: 'locationInView',</td></tr><tr><td class="line">461</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/element/:elementId/location_in_view',</td></tr><tr><td class="line">462</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">463</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">464</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">465</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">466</td><td class="hits"></td><td class="source">   * Determine an element's size in pixels.</td></tr><tr><td class="line">467</td><td class="hits"></td><td class="source">   * The size will be returned as a JSON object with width and height properties.</td></tr><tr><td class="line">468</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">469</td><td class="hits"></td><td class="source">   * @method size</td></tr><tr><td class="line">470</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/element/:id/size</td></tr><tr><td class="line">471</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">472</td><td class="hits"></td><td class="source">   * @param {GET} elementId ID of the element to route the command to</td></tr><tr><td class="line">473</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">474</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">475</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">476</td><td class="hits"></td><td class="source">    name: 'size',</td></tr><tr><td class="line">477</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/element/:elementId/size',</td></tr><tr><td class="line">478</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">479</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">480</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">481</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">482</td><td class="hits"></td><td class="source">   * Get the element on the page that currently has focus.</td></tr><tr><td class="line">483</td><td class="hits"></td><td class="source">   * The element will be returned as a WebElement JSON object.</td></tr><tr><td class="line">484</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">485</td><td class="hits"></td><td class="source">   * @method active</td></tr><tr><td class="line">486</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/element/:id/active</td></tr><tr><td class="line">487</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">488</td><td class="hits"></td><td class="source">   * @param {GET} elementId ID of the element to route the command to</td></tr><tr><td class="line">489</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">490</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">491</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">492</td><td class="hits"></td><td class="source">    name: 'active',</td></tr><tr><td class="line">493</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/element/:elementId/active',</td></tr><tr><td class="line">494</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">495</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">496</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">497</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">498</td><td class="hits"></td><td class="source">   * Get the element on the page that currently has focus.</td></tr><tr><td class="line">499</td><td class="hits"></td><td class="source">   * The element will be returned as a WebElement JSON object.</td></tr><tr><td class="line">500</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">501</td><td class="hits"></td><td class="source">   * @method elementInfo</td></tr><tr><td class="line">502</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/element/:id</td></tr><tr><td class="line">503</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">504</td><td class="hits"></td><td class="source">   * @param {GET} elementId ID of the element to route the command to</td></tr><tr><td class="line">505</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">506</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">507</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">508</td><td class="hits"></td><td class="source">    name: 'elementInfo',</td></tr><tr><td class="line">509</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/element/:elementId',</td></tr><tr><td class="line">510</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">511</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">512</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">513</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">514</td><td class="hits"></td><td class="source">   * Query the value of an element's computed CSS property.</td></tr><tr><td class="line">515</td><td class="hits"></td><td class="source">   * The CSS property to query should be specified using the CSS property name,</td></tr><tr><td class="line">516</td><td class="hits"></td><td class="source">   * not the JavaScript property name (e.g. background-color instead of backgroundColor).</td></tr><tr><td class="line">517</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">518</td><td class="hits"></td><td class="source">   * @method cssProperty</td></tr><tr><td class="line">519</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/element/:id/size</td></tr><tr><td class="line">520</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">521</td><td class="hits"></td><td class="source">   * @param {GET} elementId ID of the element to route the command to</td></tr><tr><td class="line">522</td><td class="hits"></td><td class="source">   * @param {GET} propertyName Name of the css property to fetch</td></tr><tr><td class="line">523</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">524</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">525</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">526</td><td class="hits"></td><td class="source">    name: 'cssProperty',</td></tr><tr><td class="line">527</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/element/:elementId/css/:propertyName',</td></tr><tr><td class="line">528</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">529</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">530</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">531</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">532</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/execute.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/execute.js</h2><div id="stats" class="terrible"><div class="percentage">20%</div><div class="sloc">10</div><div class="hits">2</div><div class="misses">8</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">28</td><td class="hits"></td><td class="source"> * ScriptExecutor related WebDriver endpoints</td></tr><tr><td class="line">29</td><td class="hits"></td><td class="source"> * see [JsonWireProtocol](https://code.google.com/p/selenium/wiki/JsonWireProtocol)</td></tr><tr><td class="line">30</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">31</td><td class="hits"></td><td class="source"> * @module FirefoxDriver</td></tr><tr><td class="line">32</td><td class="hits"></td><td class="source"> * @class ScriptExecutor</td></tr><tr><td class="line">33</td><td class="hits"></td><td class="source"> * @namespace FirefoxDriver.Commands.WebDriver</td></tr><tr><td class="line">34</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">35</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">36</td><td class="hits">1</td><td class="source">module.exports = function (Driver) {</td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">38</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">39</td><td class="hits"></td><td class="source">   * Inject a snippet of JavaScript into the page for execution in the context of the currently selected frame.</td></tr><tr><td class="line">40</td><td class="hits"></td><td class="source">   * The executed script is assumed to be synchronous and the result of evaluating the script is returned to the client.</td></tr><tr><td class="line">41</td><td class="hits"></td><td class="source">   * The script argument defines the script to execute in the form of a function body.</td></tr><tr><td class="line">42</td><td class="hits"></td><td class="source">   * The value returned by that function will be returned to the client.</td></tr><tr><td class="line">43</td><td class="hits"></td><td class="source">   * The function will be invoked with the provided args array and the values may be accessed</td></tr><tr><td class="line">44</td><td class="hits"></td><td class="source">   * via the arguments object in the order specified.</td></tr><tr><td class="line">45</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">46</td><td class="hits"></td><td class="source">   * @method execute</td></tr><tr><td class="line">47</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/execute</td></tr><tr><td class="line">48</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">49</td><td class="hits"></td><td class="source">   * @param {POST} script The script to execute.</td></tr><tr><td class="line">50</td><td class="hits"></td><td class="source">   * @param {POST} args The script arguments.</td></tr><tr><td class="line">51</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">52</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">53</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">54</td><td class="hits"></td><td class="source">    name: 'execute',</td></tr><tr><td class="line">55</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/execute',</td></tr><tr><td class="line">56</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">57</td><td class="hits"></td><td class="source">    params: {value: 'script', args: 'args'},</td></tr><tr><td class="line">58</td><td class="hits"></td><td class="source">    onRequest: function (req, res) {</td></tr><tr><td class="line">59</td><td class="hits"></td><td class="source">      // load the marionette connection id &amp; then request the session id</td></tr><tr class="miss"><td class="line">60</td><td class="hits">0</td><td class="source">      this.events.emit('marionette:cmd:execute', {'sessionId': req.params.sessionId, 'value': req.body.script, 'args': req.body.args});</td></tr><tr class="miss"><td class="line">61</td><td class="hits">0</td><td class="source">      this.events.on('marionette:cmd:execute:response', function (data) {</td></tr><tr class="miss"><td class="line">62</td><td class="hits">0</td><td class="source">        data = JSON.parse(data);</td></tr><tr class="miss"><td class="line">63</td><td class="hits">0</td><td class="source">        var answer = {</td></tr><tr><td class="line">64</td><td class="hits"></td><td class="source">          sessionId: req.params.sessionId,</td></tr><tr><td class="line">65</td><td class="hits"></td><td class="source">          status: 0,</td></tr><tr><td class="line">66</td><td class="hits"></td><td class="source">          value: data.value</td></tr><tr><td class="line">67</td><td class="hits"></td><td class="source">        };</td></tr><tr><td class="line">68</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">69</td><td class="hits">0</td><td class="source">        res.status(200);</td></tr><tr class="miss"><td class="line">70</td><td class="hits">0</td><td class="source">        res.send(JSON.stringify(answer));</td></tr><tr><td class="line">71</td><td class="hits"></td><td class="source">      }.bind(this));</td></tr><tr><td class="line">72</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">73</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">74</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">75</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">76</td><td class="hits"></td><td class="source">   * Inject a snippet of JavaScript into the page for execution in the context of the currently selected frame.</td></tr><tr><td class="line">77</td><td class="hits"></td><td class="source">   * The executed script is assumed to be asynchronous and must signal that is done by invoking the provided callback,</td></tr><tr><td class="line">78</td><td class="hits"></td><td class="source">   * which is always provided as the final argument to the function. The value to this callback will be returned to the client.</td></tr><tr><td class="line">79</td><td class="hits"></td><td class="source">   * Asynchronous script commands may not span page loads.</td></tr><tr><td class="line">80</td><td class="hits"></td><td class="source">   * If an unload event is fired while waiting for a script result, an error should be returned to the client.</td></tr><tr><td class="line">81</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">82</td><td class="hits"></td><td class="source">   * The script argument defines the script to execute in teh form of a function body.</td></tr><tr><td class="line">83</td><td class="hits"></td><td class="source">   * The function will be invoked with the provided args array and the values may be accessed</td></tr><tr><td class="line">84</td><td class="hits"></td><td class="source">   * via the arguments object in the order specified.</td></tr><tr><td class="line">85</td><td class="hits"></td><td class="source">   * The final argument will always be a callback function that must be invoked to signal that the script has finished.</td></tr><tr><td class="line">86</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">87</td><td class="hits"></td><td class="source">   * @method executeAsync</td></tr><tr><td class="line">88</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/execute_async</td></tr><tr><td class="line">89</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">90</td><td class="hits"></td><td class="source">   * @param {POST} script The script to execute.</td></tr><tr><td class="line">91</td><td class="hits"></td><td class="source">   * @param {POST} args The script arguments.</td></tr><tr><td class="line">92</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">93</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">94</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">95</td><td class="hits"></td><td class="source">    name: 'executeAsync',</td></tr><tr><td class="line">96</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/execute_async',</td></tr><tr><td class="line">97</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">98</td><td class="hits"></td><td class="source">    params: {script: 'script', args: 'args'}</td></tr><tr><td class="line">99</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">100</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">101</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">102</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/frame.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/frame.js</h2><div id="stats" class="medium"><div class="percentage">66%</div><div class="sloc">3</div><div class="hits">2</div><div class="misses">1</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">28</td><td class="hits"></td><td class="source"> * Frame related WebDriver endpoints</td></tr><tr><td class="line">29</td><td class="hits"></td><td class="source"> * see [JsonWireProtocol](https://code.google.com/p/selenium/wiki/JsonWireProtocol)</td></tr><tr><td class="line">30</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">31</td><td class="hits"></td><td class="source"> * @module FirefoxDriver</td></tr><tr><td class="line">32</td><td class="hits"></td><td class="source"> * @class Frame</td></tr><tr><td class="line">33</td><td class="hits"></td><td class="source"> * @namespace FirefoxDriver.Commands.WebDriver</td></tr><tr><td class="line">34</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">35</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">36</td><td class="hits">1</td><td class="source">module.exports = function (Driver) {</td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">38</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">39</td><td class="hits"></td><td class="source">   * Change focus to another frame on the page.</td></tr><tr><td class="line">40</td><td class="hits"></td><td class="source">   * If the frame id is null, the server should switch to the page's default content.</td></tr><tr><td class="line">41</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">42</td><td class="hits"></td><td class="source">   * @method frame</td></tr><tr><td class="line">43</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/frame</td></tr><tr><td class="line">44</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">45</td><td class="hits"></td><td class="source">   * @param {POST} id Identifier for the frame to change focus to.</td></tr><tr><td class="line">46</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">47</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">48</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">49</td><td class="hits"></td><td class="source">    name: 'frame',</td></tr><tr><td class="line">50</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/frame',</td></tr><tr><td class="line">51</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">52</td><td class="hits"></td><td class="source">    params: {id: 'id'}</td></tr><tr><td class="line">53</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">54</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">55</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">56</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/ime.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/ime.js</h2><div id="stats" class="terrible"><div class="percentage">16%</div><div class="sloc">12</div><div class="hits">2</div><div class="misses">10</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">28</td><td class="hits"></td><td class="source"> * Ime related WebDriver endpoints</td></tr><tr><td class="line">29</td><td class="hits"></td><td class="source"> * see [JsonWireProtocol](https://code.google.com/p/selenium/wiki/JsonWireProtocol)</td></tr><tr><td class="line">30</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">31</td><td class="hits"></td><td class="source"> * @module FirefoxDriver</td></tr><tr><td class="line">32</td><td class="hits"></td><td class="source"> * @class Ime</td></tr><tr><td class="line">33</td><td class="hits"></td><td class="source"> * @namespace FirefoxDriver.Commands.WebDriver</td></tr><tr><td class="line">34</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">35</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">36</td><td class="hits">1</td><td class="source">module.exports = function (Driver) {</td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">38</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">39</td><td class="hits"></td><td class="source">   * Query the server's current status.</td></tr><tr><td class="line">40</td><td class="hits"></td><td class="source">   * The server should respond with a general &quot;HTTP 200 OK&quot; response if it is alive and accepting commands.</td></tr><tr><td class="line">41</td><td class="hits"></td><td class="source">   * The response body should be a JSON object describing the state of the server.</td></tr><tr><td class="line">42</td><td class="hits"></td><td class="source">   * All server implementations should return two basic objects describing the server's current platform</td></tr><tr><td class="line">43</td><td class="hits"></td><td class="source">   * and when the server was built. All fields are optional; if omitted, the client should assume the value is uknown.</td></tr><tr><td class="line">44</td><td class="hits"></td><td class="source">   * Furthermore, server implementations may include additional fields not listed here.</td></tr><tr><td class="line">45</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">46</td><td class="hits"></td><td class="source">   * @method status</td></tr><tr><td class="line">47</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/status</td></tr><tr><td class="line">48</td><td class="hits"></td><td class="source">   * @return {200} Always up</td></tr><tr><td class="line">49</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">50</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">51</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">52</td><td class="hits"></td><td class="source">    name: 'status',</td></tr><tr><td class="line">53</td><td class="hits"></td><td class="source">    url: '/status',</td></tr><tr><td class="line">54</td><td class="hits"></td><td class="source">    method: 'get',</td></tr><tr><td class="line">55</td><td class="hits"></td><td class="source">    onRequest: function (req, res) {</td></tr><tr><td class="line">56</td><td class="hits"></td><td class="source">      // load the status from marionette</td></tr><tr class="miss"><td class="line">57</td><td class="hits">0</td><td class="source">      this.events.emit('marionette:cmd:status');</td></tr><tr><td class="line">58</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">59</td><td class="hits"></td><td class="source">      // send out the raw status response</td></tr><tr class="miss"><td class="line">60</td><td class="hits">0</td><td class="source">      this.events.on('marionette:cmd:status:response', function (data) {</td></tr><tr class="miss"><td class="line">61</td><td class="hits">0</td><td class="source">        data = JSON.parse(data);</td></tr><tr class="miss"><td class="line">62</td><td class="hits">0</td><td class="source">        res.send(JSON.stringify(data));</td></tr><tr><td class="line">63</td><td class="hits"></td><td class="source">      }.bind(this));</td></tr><tr><td class="line">64</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">65</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">66</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">67</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">68</td><td class="hits"></td><td class="source">   * List all available engines on the machine.</td></tr><tr><td class="line">69</td><td class="hits"></td><td class="source">   * To use an engine, it has to be present in this list.</td></tr><tr><td class="line">70</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">71</td><td class="hits"></td><td class="source">   * @method availableEngines</td></tr><tr><td class="line">72</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/ime/available_engines</td></tr><tr><td class="line">73</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">74</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">75</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">76</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">77</td><td class="hits"></td><td class="source">    name: 'availableEngines',</td></tr><tr><td class="line">78</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/ime/available_engines',</td></tr><tr><td class="line">79</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">80</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">81</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">82</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">83</td><td class="hits"></td><td class="source">   * Get the name of the active IME engine.</td></tr><tr><td class="line">84</td><td class="hits"></td><td class="source">   * The name string is platform specific.</td></tr><tr><td class="line">85</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">86</td><td class="hits"></td><td class="source">   * @method activeEngine</td></tr><tr><td class="line">87</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/ime/active_engine</td></tr><tr><td class="line">88</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">89</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">90</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">91</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">92</td><td class="hits"></td><td class="source">    name: 'activeEngine',</td></tr><tr><td class="line">93</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/ime/active_engine',</td></tr><tr><td class="line">94</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">95</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">96</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">97</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">98</td><td class="hits"></td><td class="source">   * Indicates whether IME input is active at the moment</td></tr><tr><td class="line">99</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">100</td><td class="hits"></td><td class="source">   * @method activatedEngine</td></tr><tr><td class="line">101</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/ime/activated</td></tr><tr><td class="line">102</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">103</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">104</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">105</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">106</td><td class="hits"></td><td class="source">    name: 'activatedEngine',</td></tr><tr><td class="line">107</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/ime/activated',</td></tr><tr><td class="line">108</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">109</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">110</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">111</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">112</td><td class="hits"></td><td class="source">   * De-activates the currently-active IME engine</td></tr><tr><td class="line">113</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">114</td><td class="hits"></td><td class="source">   * @method deactivateEngine</td></tr><tr><td class="line">115</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/ime/deactivate</td></tr><tr><td class="line">116</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">117</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">118</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">119</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">120</td><td class="hits"></td><td class="source">    name: 'deactivateEngine',</td></tr><tr><td class="line">121</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/ime/deactivate',</td></tr><tr><td class="line">122</td><td class="hits"></td><td class="source">    method: 'post'</td></tr><tr><td class="line">123</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">124</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">125</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">126</td><td class="hits"></td><td class="source">   * Make an engines that is available (appears on the list returned by getAvailableEngines) active.</td></tr><tr><td class="line">127</td><td class="hits"></td><td class="source">   * After this call, the engine will be added to the list of engines loaded in the IME daemon</td></tr><tr><td class="line">128</td><td class="hits"></td><td class="source">   * and the input sent using sendKeys will be converted by the active engine.</td></tr><tr><td class="line">129</td><td class="hits"></td><td class="source">   * Note that this is a platform-independent method of activating IME</td></tr><tr><td class="line">130</td><td class="hits"></td><td class="source">   * (the platform-specific way being using keyboard shortcuts)</td></tr><tr><td class="line">131</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">132</td><td class="hits"></td><td class="source">   * @method activateEngine</td></tr><tr><td class="line">133</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/ime/activate</td></tr><tr><td class="line">134</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">135</td><td class="hits"></td><td class="source">   * @param {POST} engine Name of the engine to activate</td></tr><tr><td class="line">136</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">137</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">138</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">139</td><td class="hits"></td><td class="source">    name: 'activateEngine',</td></tr><tr><td class="line">140</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/ime/activate',</td></tr><tr><td class="line">141</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">142</td><td class="hits"></td><td class="source">    params: {engine: 'engine'}</td></tr><tr><td class="line">143</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">144</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">145</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">146</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">147</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/interaction.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/interaction.js</h2><div id="stats" class="terrible"><div class="percentage">13%</div><div class="sloc">15</div><div class="hits">2</div><div class="misses">13</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">28</td><td class="hits"></td><td class="source"> * Interaction related WebDriver endpoints</td></tr><tr><td class="line">29</td><td class="hits"></td><td class="source"> * see [JsonWireProtocol](https://code.google.com/p/selenium/wiki/JsonWireProtocol)</td></tr><tr><td class="line">30</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">31</td><td class="hits"></td><td class="source"> * @module FirefoxDriver</td></tr><tr><td class="line">32</td><td class="hits"></td><td class="source"> * @class Interaction</td></tr><tr><td class="line">33</td><td class="hits"></td><td class="source"> * @namespace FirefoxDriver.Commands.WebDriver</td></tr><tr><td class="line">34</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">35</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">36</td><td class="hits">1</td><td class="source">module.exports = function (Driver) {</td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">38</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">39</td><td class="hits"></td><td class="source">   * Move the mouse by an offset of the specificed element.</td></tr><tr><td class="line">40</td><td class="hits"></td><td class="source">   * If no element is specified, the move is relative to the current mouse cursor.</td></tr><tr><td class="line">41</td><td class="hits"></td><td class="source">   * If an element is provided but no offset, the mouse will be moved to the center of the element.</td></tr><tr><td class="line">42</td><td class="hits"></td><td class="source">   * If the element is not visible, it will be scrolled into view.</td></tr><tr><td class="line">43</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">44</td><td class="hits"></td><td class="source">   * @method moveto</td></tr><tr><td class="line">45</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/moveto</td></tr><tr><td class="line">46</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">47</td><td class="hits"></td><td class="source">   * @param {POST} element Opaque ID assigned to the element to move to, as described in the WebElement JSON Object. If not specified or is null, the offset is relative to current position of the mouse.</td></tr><tr><td class="line">48</td><td class="hits"></td><td class="source">   * @param {POST} xoffset X offset to move to, relative to the top-left corner of the element. If not specified, the mouse will move to the middle of the element.</td></tr><tr><td class="line">49</td><td class="hits"></td><td class="source">   * @param {POST} yoffset Y offset to move to, relative to the top-left corner of the element. If not specified, the mouse will move to the middle of the element.</td></tr><tr><td class="line">50</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">51</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">52</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">53</td><td class="hits"></td><td class="source">    name: 'moveto',</td></tr><tr><td class="line">54</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/moveto',</td></tr><tr><td class="line">55</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">56</td><td class="hits"></td><td class="source">    params: {element: 'element', xoffset: 'xoffset', yoffset: 'yoffset'}</td></tr><tr><td class="line">57</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">58</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">59</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">60</td><td class="hits"></td><td class="source">   * Click any mouse button (at the coordinates set by the last moveto command).</td></tr><tr><td class="line">61</td><td class="hits"></td><td class="source">   * Note that calling this command after calling buttondown and before calling button up</td></tr><tr><td class="line">62</td><td class="hits"></td><td class="source">   * (or any out-of-order interactions sequence) will yield undefined behaviour).</td></tr><tr><td class="line">63</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">64</td><td class="hits"></td><td class="source">   * @method clickPage</td></tr><tr><td class="line">65</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/click</td></tr><tr><td class="line">66</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">67</td><td class="hits"></td><td class="source">   * @param {POST} button Which button, enum: {LEFT = 0, MIDDLE = 1 , RIGHT = 2}. Defaults to the left mouse button if not specified.</td></tr><tr><td class="line">68</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">69</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">70</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">71</td><td class="hits"></td><td class="source">    name: 'clickPage',</td></tr><tr><td class="line">72</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/click',</td></tr><tr><td class="line">73</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">74</td><td class="hits"></td><td class="source">    params: {button: 'button'}</td></tr><tr><td class="line">75</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">76</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">77</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">78</td><td class="hits"></td><td class="source">   * Click and hold the left mouse button (at the coordinates set by the last moveto command).</td></tr><tr><td class="line">79</td><td class="hits"></td><td class="source">   * Note that the next mouse-related command that should follow is buttonup.</td></tr><tr><td class="line">80</td><td class="hits"></td><td class="source">   * Any other mouse command (such as click or another call to buttondown) will yield undefined behaviour.</td></tr><tr><td class="line">81</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">82</td><td class="hits"></td><td class="source">   * @method buttondown</td></tr><tr><td class="line">83</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/buttondown</td></tr><tr><td class="line">84</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">85</td><td class="hits"></td><td class="source">   * @param {POST} button Which button, enum: {LEFT = 0, MIDDLE = 1 , RIGHT = 2}. Defaults to the left mouse button if not specified.</td></tr><tr><td class="line">86</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">87</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">88</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">89</td><td class="hits"></td><td class="source">    name: 'buttondown',</td></tr><tr><td class="line">90</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/buttondown',</td></tr><tr><td class="line">91</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">92</td><td class="hits"></td><td class="source">    params: {button: 'button'}</td></tr><tr><td class="line">93</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">94</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">95</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">96</td><td class="hits"></td><td class="source">   * Releases the mouse button previously held (where the mouse is currently at).</td></tr><tr><td class="line">97</td><td class="hits"></td><td class="source">   * Must be called once for every buttondown command issued.</td></tr><tr><td class="line">98</td><td class="hits"></td><td class="source">   * See the note in click and buttondown about implications of out-of-order commands.</td></tr><tr><td class="line">99</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">100</td><td class="hits"></td><td class="source">   * @method buttonup</td></tr><tr><td class="line">101</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/buttonup</td></tr><tr><td class="line">102</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">103</td><td class="hits"></td><td class="source">   * @param {POST} button Which button, enum: {LEFT = 0, MIDDLE = 1 , RIGHT = 2}. Defaults to the left mouse button if not specified.</td></tr><tr><td class="line">104</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">105</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">106</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">107</td><td class="hits"></td><td class="source">    name: 'buttonup',</td></tr><tr><td class="line">108</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/buttonup',</td></tr><tr><td class="line">109</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">110</td><td class="hits"></td><td class="source">    params: {button: 'button'}</td></tr><tr><td class="line">111</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">112</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">113</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">114</td><td class="hits"></td><td class="source">   * Double-clicks at the current mouse coordinates (set by moveto).</td></tr><tr><td class="line">115</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">116</td><td class="hits"></td><td class="source">   * @method doubleclickPage</td></tr><tr><td class="line">117</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/doubleclick</td></tr><tr><td class="line">118</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">119</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">120</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">121</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">122</td><td class="hits"></td><td class="source">    name: 'doubleclickPage',</td></tr><tr><td class="line">123</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/doubleclick',</td></tr><tr><td class="line">124</td><td class="hits"></td><td class="source">    method: 'post'</td></tr><tr><td class="line">125</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">126</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">127</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">128</td><td class="hits"></td><td class="source">   * Single tap on the touch enabled device.</td></tr><tr><td class="line">129</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">130</td><td class="hits"></td><td class="source">   * @method tap</td></tr><tr><td class="line">131</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/touch/click</td></tr><tr><td class="line">132</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">133</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">134</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">135</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">136</td><td class="hits"></td><td class="source">    name: 'tap',</td></tr><tr><td class="line">137</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/touch/click',</td></tr><tr><td class="line">138</td><td class="hits"></td><td class="source">    method: 'post'</td></tr><tr><td class="line">139</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">140</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">141</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">142</td><td class="hits"></td><td class="source">   * Finger down on the screen.</td></tr><tr><td class="line">143</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">144</td><td class="hits"></td><td class="source">   * @method touchdown</td></tr><tr><td class="line">145</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/touch/down</td></tr><tr><td class="line">146</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">147</td><td class="hits"></td><td class="source">   * @param {POST} x X coordinate on the screen.</td></tr><tr><td class="line">148</td><td class="hits"></td><td class="source">   * @param {POST} y Y coordinate on the screen.</td></tr><tr><td class="line">149</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">150</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">151</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">152</td><td class="hits"></td><td class="source">    name: 'touchdown',</td></tr><tr><td class="line">153</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/touch/down',</td></tr><tr><td class="line">154</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">155</td><td class="hits"></td><td class="source">    params: {x: 'x', y: 'y'}</td></tr><tr><td class="line">156</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">157</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">158</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">159</td><td class="hits"></td><td class="source">   * Finger up on the screen.</td></tr><tr><td class="line">160</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">161</td><td class="hits"></td><td class="source">   * @method touchup</td></tr><tr><td class="line">162</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/touch/up</td></tr><tr><td class="line">163</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">164</td><td class="hits"></td><td class="source">   * @param {POST} x X coordinate on the screen.</td></tr><tr><td class="line">165</td><td class="hits"></td><td class="source">   * @param {POST} y Y coordinate on the screen.</td></tr><tr><td class="line">166</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">167</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">168</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">169</td><td class="hits"></td><td class="source">    name: 'touchup',</td></tr><tr><td class="line">170</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/touch/up',</td></tr><tr><td class="line">171</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">172</td><td class="hits"></td><td class="source">    params: {x: 'x', y: 'y'}</td></tr><tr><td class="line">173</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">174</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">175</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">176</td><td class="hits"></td><td class="source">   * Finger move on the screen.</td></tr><tr><td class="line">177</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">178</td><td class="hits"></td><td class="source">   * @method touchmove</td></tr><tr><td class="line">179</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/touch/move</td></tr><tr><td class="line">180</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">181</td><td class="hits"></td><td class="source">   * @param {POST} x X coordinate on the screen.</td></tr><tr><td class="line">182</td><td class="hits"></td><td class="source">   * @param {POST} y Y coordinate on the screen.</td></tr><tr><td class="line">183</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">184</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">185</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">186</td><td class="hits"></td><td class="source">    name: 'touchmove',</td></tr><tr><td class="line">187</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/touch/move',</td></tr><tr><td class="line">188</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">189</td><td class="hits"></td><td class="source">    params: {x: 'x', y: 'y'}</td></tr><tr><td class="line">190</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">191</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">192</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">193</td><td class="hits"></td><td class="source">   * Scroll on the touch screen using finger based motion events.</td></tr><tr><td class="line">194</td><td class="hits"></td><td class="source">   * Use this command if you don't care where the scroll starts on the screen.</td></tr><tr><td class="line">195</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">196</td><td class="hits"></td><td class="source">   * @method touchscroll</td></tr><tr><td class="line">197</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/touch/scroll</td></tr><tr><td class="line">198</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">199</td><td class="hits"></td><td class="source">   * @param {POST} x X coordinate on the screen.</td></tr><tr><td class="line">200</td><td class="hits"></td><td class="source">   * @param {POST} y Y coordinate on the screen.</td></tr><tr><td class="line">201</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">202</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">203</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">204</td><td class="hits"></td><td class="source">    name: 'touchscroll',</td></tr><tr><td class="line">205</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/touch/scroll',</td></tr><tr><td class="line">206</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">207</td><td class="hits"></td><td class="source">    params: {x: 'x', y: 'y'}</td></tr><tr><td class="line">208</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">209</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">210</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">211</td><td class="hits"></td><td class="source">   * Double tap on the touch screen using finger motion events.</td></tr><tr><td class="line">212</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">213</td><td class="hits"></td><td class="source">   * @method doubletap</td></tr><tr><td class="line">214</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/touch/doubleclick</td></tr><tr><td class="line">215</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">216</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">217</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">218</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">219</td><td class="hits"></td><td class="source">    name: 'doubletap',</td></tr><tr><td class="line">220</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/touch/doubleclick',</td></tr><tr><td class="line">221</td><td class="hits"></td><td class="source">    method: 'post'</td></tr><tr><td class="line">222</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">223</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">224</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">225</td><td class="hits"></td><td class="source">   * Long press on the touch screen using finger motion events.</td></tr><tr><td class="line">226</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">227</td><td class="hits"></td><td class="source">   * @method longpress</td></tr><tr><td class="line">228</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/touch/longclick</td></tr><tr><td class="line">229</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">230</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">231</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">232</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">233</td><td class="hits"></td><td class="source">    name: 'longpress',</td></tr><tr><td class="line">234</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/touch/longclick',</td></tr><tr><td class="line">235</td><td class="hits"></td><td class="source">    method: 'post'</td></tr><tr><td class="line">236</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">237</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">238</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">239</td><td class="hits"></td><td class="source">   * Flick on the touch screen using finger motion events.</td></tr><tr><td class="line">240</td><td class="hits"></td><td class="source">   * This flickcommand starts at a particulat screen location.</td></tr><tr><td class="line">241</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">242</td><td class="hits"></td><td class="source">   * @method flick</td></tr><tr><td class="line">243</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/touch/flick</td></tr><tr><td class="line">244</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">245</td><td class="hits"></td><td class="source">   * @param {POST} element ID of the element where the flick starts</td></tr><tr><td class="line">246</td><td class="hits"></td><td class="source">   * @param {POST} xoffset The x offset in pixels to flick by</td></tr><tr><td class="line">247</td><td class="hits"></td><td class="source">   * @param {POST} yoffset The y offset in pixels to flick by</td></tr><tr><td class="line">248</td><td class="hits"></td><td class="source">   * @param {POST} speed The speed in pixels per seconds</td></tr><tr><td class="line">249</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">250</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">251</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">252</td><td class="hits"></td><td class="source">    name: 'flick',</td></tr><tr><td class="line">253</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/touch/flick',</td></tr><tr><td class="line">254</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">255</td><td class="hits"></td><td class="source">    params: {element: 'element', xoffset: 'xoffset', yoffset: 'yoffset' , speed: 'speed'}</td></tr><tr><td class="line">256</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">257</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">258</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">259</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/page.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/page.js</h2><div id="stats" class="low"><div class="percentage">33%</div><div class="sloc">6</div><div class="hits">2</div><div class="misses">4</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">28</td><td class="hits"></td><td class="source"> * Page related WebDriver endpoints</td></tr><tr><td class="line">29</td><td class="hits"></td><td class="source"> * see [JsonWireProtocol](https://code.google.com/p/selenium/wiki/JsonWireProtocol)</td></tr><tr><td class="line">30</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">31</td><td class="hits"></td><td class="source"> * @module FirefoxDriver</td></tr><tr><td class="line">32</td><td class="hits"></td><td class="source"> * @class Page</td></tr><tr><td class="line">33</td><td class="hits"></td><td class="source"> * @namespace FirefoxDriver.Commands.WebDriver</td></tr><tr><td class="line">34</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">35</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">36</td><td class="hits">1</td><td class="source">module.exports = function (Driver) {</td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">38</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">39</td><td class="hits"></td><td class="source">   * Get the current page source</td></tr><tr><td class="line">40</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">41</td><td class="hits"></td><td class="source">   * @method source</td></tr><tr><td class="line">42</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/title</td></tr><tr><td class="line">43</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">44</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">45</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">46</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">47</td><td class="hits"></td><td class="source">    name: 'source',</td></tr><tr><td class="line">48</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/source',</td></tr><tr><td class="line">49</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">50</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">51</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">52</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">53</td><td class="hits"></td><td class="source">   * Get the current page title</td></tr><tr><td class="line">54</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">55</td><td class="hits"></td><td class="source">   * @method title</td></tr><tr><td class="line">56</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/title</td></tr><tr><td class="line">57</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">58</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">59</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">60</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">61</td><td class="hits"></td><td class="source">    name: 'title',</td></tr><tr><td class="line">62</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/title',</td></tr><tr><td class="line">63</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">64</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">65</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">66</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">67</td><td class="hits"></td><td class="source">   * Get the current geo location</td></tr><tr><td class="line">68</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">69</td><td class="hits"></td><td class="source">   * @method geoLocation</td></tr><tr><td class="line">70</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/location</td></tr><tr><td class="line">71</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">72</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">73</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">74</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">75</td><td class="hits"></td><td class="source">    name: 'geoLocation',</td></tr><tr><td class="line">76</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/location',</td></tr><tr><td class="line">77</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">78</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">79</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">80</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">81</td><td class="hits"></td><td class="source">   * Set the geo location</td></tr><tr><td class="line">82</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">83</td><td class="hits"></td><td class="source">   * @method setGeoLocation</td></tr><tr><td class="line">84</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/location</td></tr><tr><td class="line">85</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">86</td><td class="hits"></td><td class="source">   * @param {POST} latitude The new location</td></tr><tr><td class="line">87</td><td class="hits"></td><td class="source">   * @param {POST} longitude The new location</td></tr><tr><td class="line">88</td><td class="hits"></td><td class="source">   * @param {POST} altitude The new location</td></tr><tr><td class="line">89</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">90</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">91</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">92</td><td class="hits"></td><td class="source">    name: 'location',</td></tr><tr><td class="line">93</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/location',</td></tr><tr><td class="line">94</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">95</td><td class="hits"></td><td class="source">    params: {latitude: 'latitude', longitude: 'longitude', altitude: 'altitude'}</td></tr><tr><td class="line">96</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">97</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">98</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">99</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/screenshot.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/screenshot.js</h2><div id="stats" class="medium"><div class="percentage">66%</div><div class="sloc">3</div><div class="hits">2</div><div class="misses">1</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">28</td><td class="hits"></td><td class="source"> * Screenshot related WebDriver endpoints</td></tr><tr><td class="line">29</td><td class="hits"></td><td class="source"> * see [JsonWireProtocol](https://code.google.com/p/selenium/wiki/JsonWireProtocol)</td></tr><tr><td class="line">30</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">31</td><td class="hits"></td><td class="source"> * @module FirefoxDriver</td></tr><tr><td class="line">32</td><td class="hits"></td><td class="source"> * @class Screenshot</td></tr><tr><td class="line">33</td><td class="hits"></td><td class="source"> * @namespace FirefoxDriver.Commands.WebDriver</td></tr><tr><td class="line">34</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">35</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">36</td><td class="hits">1</td><td class="source">module.exports = function (Driver) {</td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">38</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">39</td><td class="hits"></td><td class="source">   * Take a screenshot of the current page.</td></tr><tr><td class="line">40</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">41</td><td class="hits"></td><td class="source">   * @method screenshot</td></tr><tr><td class="line">42</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#/session/:sessionId/screenshot</td></tr><tr><td class="line">43</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">44</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">45</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">46</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">47</td><td class="hits"></td><td class="source">    name: 'screenshot',</td></tr><tr><td class="line">48</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/screenshot',</td></tr><tr><td class="line">49</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">50</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">51</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">52</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">53</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/session.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/session.js</h2><div id="stats" class="terrible"><div class="percentage">13%</div><div class="sloc">15</div><div class="hits">2</div><div class="misses">13</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">28</td><td class="hits"></td><td class="source"> * Session related WebDriver endpoints</td></tr><tr><td class="line">29</td><td class="hits"></td><td class="source"> * see [JsonWireProtocol](https://code.google.com/p/selenium/wiki/JsonWireProtocol)</td></tr><tr><td class="line">30</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">31</td><td class="hits"></td><td class="source"> * @module FirefoxDriver</td></tr><tr><td class="line">32</td><td class="hits"></td><td class="source"> * @class Session</td></tr><tr><td class="line">33</td><td class="hits"></td><td class="source"> * @namespace FirefoxDriver.Commands.WebDriver</td></tr><tr><td class="line">34</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">35</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">36</td><td class="hits">1</td><td class="source">module.exports = function (Driver) {</td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">38</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">39</td><td class="hits"></td><td class="source">   * Create a new session. The server should attempt to create a session that most closely matches</td></tr><tr><td class="line">40</td><td class="hits"></td><td class="source">   * the desired and required capabilities. Required capabilities have higher priority than</td></tr><tr><td class="line">41</td><td class="hits"></td><td class="source">   * desired capabilities and must be set for the session to be created.</td></tr><tr><td class="line">42</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">43</td><td class="hits"></td><td class="source">   * @method createSession</td></tr><tr><td class="line">44</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session</td></tr><tr><td class="line">45</td><td class="hits"></td><td class="source">   * @param {POST} desiredCapabilities An object describing the session's desired capabilities.</td></tr><tr><td class="line">46</td><td class="hits"></td><td class="source">   * @param {POST} requiredCapabilities An object describing the session's required capabilities</td></tr><tr><td class="line">47</td><td class="hits"></td><td class="source">   * @return {303} See Other redirect to /session/:sessionId, where :sessionId is the ID of the newly created session.</td></tr><tr><td class="line">48</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">49</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">50</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">51</td><td class="hits"></td><td class="source">    name: 'createSession',</td></tr><tr><td class="line">52</td><td class="hits"></td><td class="source">    url: '/session',</td></tr><tr><td class="line">53</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">54</td><td class="hits"></td><td class="source">    onRequest: function (req, res) {</td></tr><tr><td class="line">55</td><td class="hits"></td><td class="source">      // load the marionette connection id &amp; then request the session id</td></tr><tr class="miss"><td class="line">56</td><td class="hits">0</td><td class="source">      this.events.emit('marionette:cmd:getMarionetteID');</td></tr><tr class="miss"><td class="line">57</td><td class="hits">0</td><td class="source">      this.events.on('marionette:cmd:getMarionetteID:response', function (connection) {</td></tr><tr class="miss"><td class="line">58</td><td class="hits">0</td><td class="source">        this.events.emit('marionette:setMarionetteID', connection.id);</td></tr><tr class="miss"><td class="line">59</td><td class="hits">0</td><td class="source">        this.events.emit('marionette:cmd:getSession');</td></tr><tr><td class="line">60</td><td class="hits"></td><td class="source">      }.bind(this));</td></tr><tr><td class="line">61</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">62</td><td class="hits"></td><td class="source">      // send out the webdriver session response</td></tr><tr class="miss"><td class="line">63</td><td class="hits">0</td><td class="source">      this.events.on('marionette:cmd:getSession:response', function (session) {</td></tr><tr class="miss"><td class="line">64</td><td class="hits">0</td><td class="source">        session = JSON.parse(session);</td></tr><tr class="miss"><td class="line">65</td><td class="hits">0</td><td class="source">        res.location('http://' + this.host + ':' + this.port + '/session/' + session.value);</td></tr><tr class="miss"><td class="line">66</td><td class="hits">0</td><td class="source">        res.end();</td></tr><tr><td class="line">67</td><td class="hits"></td><td class="source">      }.bind(this));</td></tr><tr><td class="line">68</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">69</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">70</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">71</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">72</td><td class="hits"></td><td class="source">   * Returns a list of the currently active sessions</td></tr><tr><td class="line">73</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">74</td><td class="hits"></td><td class="source">   * @method sessions</td></tr><tr><td class="line">75</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/sessions</td></tr><tr><td class="line">76</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">77</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">78</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">79</td><td class="hits"></td><td class="source">    name: 'sessions',</td></tr><tr><td class="line">80</td><td class="hits"></td><td class="source">    url: '/sessions',</td></tr><tr><td class="line">81</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">82</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">83</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">84</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">85</td><td class="hits"></td><td class="source">   * Returns a list of the currently active sessions</td></tr><tr><td class="line">86</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">87</td><td class="hits"></td><td class="source">   * @method sessions</td></tr><tr><td class="line">88</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/sessions</td></tr><tr><td class="line">89</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">90</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">91</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">92</td><td class="hits"></td><td class="source">    name: 'sessions',</td></tr><tr><td class="line">93</td><td class="hits"></td><td class="source">    url: '/sessions',</td></tr><tr><td class="line">94</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">95</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">96</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">97</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">98</td><td class="hits"></td><td class="source">   * Retrieve the capabilities of the specified session.</td></tr><tr><td class="line">99</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">100</td><td class="hits"></td><td class="source">   * @method session</td></tr><tr><td class="line">101</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId</td></tr><tr><td class="line">102</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">103</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">104</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">105</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">106</td><td class="hits"></td><td class="source">    name: 'session',</td></tr><tr><td class="line">107</td><td class="hits"></td><td class="source">    url: '/session/:sessionId',</td></tr><tr><td class="line">108</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">109</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">110</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">111</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">112</td><td class="hits"></td><td class="source">   * Delete the session.</td></tr><tr><td class="line">113</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">114</td><td class="hits"></td><td class="source">   * @method session</td></tr><tr><td class="line">115</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId</td></tr><tr><td class="line">116</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">117</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">118</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">119</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">120</td><td class="hits"></td><td class="source">    name: 'deleteSession',</td></tr><tr><td class="line">121</td><td class="hits"></td><td class="source">    url: '/session/:sessionId',</td></tr><tr><td class="line">122</td><td class="hits"></td><td class="source">    method: 'del'</td></tr><tr><td class="line">123</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">124</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">125</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">126</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/storage.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/storage.js</h2><div id="stats" class="terrible"><div class="percentage">13%</div><div class="sloc">15</div><div class="hits">2</div><div class="misses">13</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">28</td><td class="hits"></td><td class="source"> * Storage related WebDriver endpoints</td></tr><tr><td class="line">29</td><td class="hits"></td><td class="source"> * see [JsonWireProtocol](https://code.google.com/p/selenium/wiki/JsonWireProtocol)</td></tr><tr><td class="line">30</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">31</td><td class="hits"></td><td class="source"> * @module FirefoxDriver</td></tr><tr><td class="line">32</td><td class="hits"></td><td class="source"> * @class Storage</td></tr><tr><td class="line">33</td><td class="hits"></td><td class="source"> * @namespace FirefoxDriver.Commands.WebDriver</td></tr><tr><td class="line">34</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">35</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">36</td><td class="hits">1</td><td class="source">module.exports = function (Driver) {</td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">38</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">39</td><td class="hits"></td><td class="source">   * Get all keys of the browsers local storage</td></tr><tr><td class="line">40</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">41</td><td class="hits"></td><td class="source">   * @method getLocalStorage</td></tr><tr><td class="line">42</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/local_storage</td></tr><tr><td class="line">43</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">44</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">45</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">46</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">47</td><td class="hits"></td><td class="source">    name: 'getLocalStorage',</td></tr><tr><td class="line">48</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/local_storage',</td></tr><tr><td class="line">49</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">50</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">51</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">52</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">53</td><td class="hits"></td><td class="source">   * Set the storage item for the given key</td></tr><tr><td class="line">54</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">55</td><td class="hits"></td><td class="source">   * @method setLocalStorage</td></tr><tr><td class="line">56</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/local_storage</td></tr><tr><td class="line">57</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">58</td><td class="hits"></td><td class="source">   * @param {POST} key The key to set</td></tr><tr><td class="line">59</td><td class="hits"></td><td class="source">   * @param {POST} value The value to set</td></tr><tr><td class="line">60</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">61</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">62</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">63</td><td class="hits"></td><td class="source">    name: 'setLocalStorage',</td></tr><tr><td class="line">64</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/local_storage',</td></tr><tr><td class="line">65</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">66</td><td class="hits"></td><td class="source">    params: {key: 'key', value: 'value'}</td></tr><tr><td class="line">67</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">68</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">69</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">70</td><td class="hits"></td><td class="source">   * Clears the complete local storage</td></tr><tr><td class="line">71</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">72</td><td class="hits"></td><td class="source">   * @method clearLocalStorage</td></tr><tr><td class="line">73</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#DELETE_/session/:sessionId/local_storage</td></tr><tr><td class="line">74</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">75</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">76</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">77</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">78</td><td class="hits"></td><td class="source">    name: 'clearLocalStorage',</td></tr><tr><td class="line">79</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/local_storage',</td></tr><tr><td class="line">80</td><td class="hits"></td><td class="source">    method: 'del'</td></tr><tr><td class="line">81</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">82</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">83</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">84</td><td class="hits"></td><td class="source">   * Get the storage item for the given key</td></tr><tr><td class="line">85</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">86</td><td class="hits"></td><td class="source">   * @method getLocalStorageEntry</td></tr><tr><td class="line">87</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/local_storage/key/:key</td></tr><tr><td class="line">88</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">89</td><td class="hits"></td><td class="source">   * @param {GET} key  The key to get</td></tr><tr><td class="line">90</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">91</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">92</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">93</td><td class="hits"></td><td class="source">    name: 'getLocalStorageEntry',</td></tr><tr><td class="line">94</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/local_storage/key/:key',</td></tr><tr><td class="line">95</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">96</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">97</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">98</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">99</td><td class="hits"></td><td class="source">   * Remove the storage item for the given key</td></tr><tr><td class="line">100</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">101</td><td class="hits"></td><td class="source">   * @method deleteLocalStorageEntry</td></tr><tr><td class="line">102</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#DELETE_/session/:sessionId/local_storage/key/:key</td></tr><tr><td class="line">103</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">104</td><td class="hits"></td><td class="source">   * @param {GET} key  The key to get</td></tr><tr><td class="line">105</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">106</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">107</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">108</td><td class="hits"></td><td class="source">    name: 'deleteLocalStorageEntry',</td></tr><tr><td class="line">109</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/local_storage/key/:key',</td></tr><tr><td class="line">110</td><td class="hits"></td><td class="source">    method: 'del'</td></tr><tr><td class="line">111</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">112</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">113</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">114</td><td class="hits"></td><td class="source">   * Get the number of items in the storage</td></tr><tr><td class="line">115</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">116</td><td class="hits"></td><td class="source">   * @method getLocalStorageSize</td></tr><tr><td class="line">117</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/local_storage/size</td></tr><tr><td class="line">118</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">119</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">120</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">121</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">122</td><td class="hits"></td><td class="source">    name: 'getLocalStorageSize',</td></tr><tr><td class="line">123</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/local_storage/size',</td></tr><tr><td class="line">124</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">125</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">126</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">127</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">128</td><td class="hits"></td><td class="source">   * Get all keys of the browsers session storage</td></tr><tr><td class="line">129</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">130</td><td class="hits"></td><td class="source">   * @method getSessionStorage</td></tr><tr><td class="line">131</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/session_storage</td></tr><tr><td class="line">132</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">133</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">134</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">135</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">136</td><td class="hits"></td><td class="source">    name: 'getSessionStorage',</td></tr><tr><td class="line">137</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/session_storage',</td></tr><tr><td class="line">138</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">139</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">140</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">141</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">142</td><td class="hits"></td><td class="source">   * Set the storage item for the given key</td></tr><tr><td class="line">143</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">144</td><td class="hits"></td><td class="source">   * @method setSessionStorage</td></tr><tr><td class="line">145</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/session_storage</td></tr><tr><td class="line">146</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">147</td><td class="hits"></td><td class="source">   * @param {POST} key The key to set</td></tr><tr><td class="line">148</td><td class="hits"></td><td class="source">   * @param {POST} value The value to set</td></tr><tr><td class="line">149</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">150</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">151</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">152</td><td class="hits"></td><td class="source">    name: 'setSessionStorage',</td></tr><tr><td class="line">153</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/session_storage',</td></tr><tr><td class="line">154</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">155</td><td class="hits"></td><td class="source">    params: {key: 'key', value: 'value'}</td></tr><tr><td class="line">156</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">157</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">158</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">159</td><td class="hits"></td><td class="source">   * Clears the complete session storage</td></tr><tr><td class="line">160</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">161</td><td class="hits"></td><td class="source">   * @method clearSessionStorage</td></tr><tr><td class="line">162</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#DELETE_/session/:sessionId/session_storage</td></tr><tr><td class="line">163</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">164</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">165</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">166</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">167</td><td class="hits"></td><td class="source">    name: 'clearSessionStorage',</td></tr><tr><td class="line">168</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/session_storage',</td></tr><tr><td class="line">169</td><td class="hits"></td><td class="source">    method: 'del'</td></tr><tr><td class="line">170</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">171</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">172</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">173</td><td class="hits"></td><td class="source">   * Get the storage item for the given key</td></tr><tr><td class="line">174</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">175</td><td class="hits"></td><td class="source">   * @method getSessionStorageEntry</td></tr><tr><td class="line">176</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/session_storage/key/:key</td></tr><tr><td class="line">177</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">178</td><td class="hits"></td><td class="source">   * @param {GET} key  The key to get</td></tr><tr><td class="line">179</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">180</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">181</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">182</td><td class="hits"></td><td class="source">    name: 'getSessionStorageEntry',</td></tr><tr><td class="line">183</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/session_storage/key/:key',</td></tr><tr><td class="line">184</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">185</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">186</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">187</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">188</td><td class="hits"></td><td class="source">   * Remove the storage item for the given key</td></tr><tr><td class="line">189</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">190</td><td class="hits"></td><td class="source">   * @method deleteSessionStorageEntry</td></tr><tr><td class="line">191</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#DELETE_/session/:sessionId/session_storage/key/:key</td></tr><tr><td class="line">192</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">193</td><td class="hits"></td><td class="source">   * @param {GET} key  The key to get</td></tr><tr><td class="line">194</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">195</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">196</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">197</td><td class="hits"></td><td class="source">    name: 'deleteSessionStorageEntry',</td></tr><tr><td class="line">198</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/session_storage/key/:key',</td></tr><tr><td class="line">199</td><td class="hits"></td><td class="source">    method: 'del'</td></tr><tr><td class="line">200</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">201</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">202</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">203</td><td class="hits"></td><td class="source">   * Get the number of items in the storage</td></tr><tr><td class="line">204</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">205</td><td class="hits"></td><td class="source">   * @method getSessionStorageSize</td></tr><tr><td class="line">206</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/session_storage/size</td></tr><tr><td class="line">207</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">208</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">209</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">210</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">211</td><td class="hits"></td><td class="source">    name: 'getSessionStorageSize',</td></tr><tr><td class="line">212</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/session_storage/size',</td></tr><tr><td class="line">213</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">214</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">215</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">216</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">217</td><td class="hits"></td><td class="source">   * Get the status of the html5 application cache.</td></tr><tr><td class="line">218</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">219</td><td class="hits"></td><td class="source">   * @method applicationCacheStatus</td></tr><tr><td class="line">220</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/application_cache/status</td></tr><tr><td class="line">221</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">222</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">223</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">224</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">225</td><td class="hits"></td><td class="source">    name: 'applicationCacheStatus',</td></tr><tr><td class="line">226</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/application_cache/status',</td></tr><tr><td class="line">227</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">228</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">229</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">230</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">231</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/timeout.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/timeout.js</h2><div id="stats" class="low"><div class="percentage">40%</div><div class="sloc">5</div><div class="hits">2</div><div class="misses">3</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">28</td><td class="hits"></td><td class="source"> * Timeout related WebDriver endpoints</td></tr><tr><td class="line">29</td><td class="hits"></td><td class="source"> * see [JsonWireProtocol](https://code.google.com/p/selenium/wiki/JsonWireProtocol)</td></tr><tr><td class="line">30</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">31</td><td class="hits"></td><td class="source"> * @module FirefoxDriver</td></tr><tr><td class="line">32</td><td class="hits"></td><td class="source"> * @class Timeout</td></tr><tr><td class="line">33</td><td class="hits"></td><td class="source"> * @namespace FirefoxDriver.Commands.WebDriver</td></tr><tr><td class="line">34</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">35</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">36</td><td class="hits">1</td><td class="source">module.exports = function (Driver) {</td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">38</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">39</td><td class="hits"></td><td class="source">   * Configure the amount of time that a particular type of operation can execute for before</td></tr><tr><td class="line">40</td><td class="hits"></td><td class="source">   * they are aborted and a |Timeout| error is returned to the client.</td></tr><tr><td class="line">41</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">42</td><td class="hits"></td><td class="source">   * @method timeouts</td></tr><tr><td class="line">43</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/timeouts</td></tr><tr><td class="line">44</td><td class="hits"></td><td class="source">   * @param {GET} sessionId  ID of the session to route the command to</td></tr><tr><td class="line">45</td><td class="hits"></td><td class="source">   * @param {POST} type The type of operation to set the timeout for. Valid values are: &quot;script&quot; for script timeouts, &quot;implicit&quot; for modifying the implicit wait timeout and &quot;page load&quot; for setting a page load timeout</td></tr><tr><td class="line">46</td><td class="hits"></td><td class="source">   * @param {POST} ms The amount of time to wait, in milliseconds. This value has a lower bound of 0</td></tr><tr><td class="line">47</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">48</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">49</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">50</td><td class="hits"></td><td class="source">    name: 'timeouts',</td></tr><tr><td class="line">51</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/timeouts',</td></tr><tr><td class="line">52</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">53</td><td class="hits"></td><td class="source">    params: {type: 'type', timeout: 'ms'}</td></tr><tr><td class="line">54</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">55</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">56</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">57</td><td class="hits"></td><td class="source">   * Set the amount of time the driver should wait when searching for elements.</td></tr><tr><td class="line">58</td><td class="hits"></td><td class="source">   * When searching for a single element, the driver should poll the page until an element</td></tr><tr><td class="line">59</td><td class="hits"></td><td class="source">   * is found or the timeout expires, whichever occurs first. When searching for multiple elements,</td></tr><tr><td class="line">60</td><td class="hits"></td><td class="source">   * the driver should poll the page until at least one element is found or the timeout expires,</td></tr><tr><td class="line">61</td><td class="hits"></td><td class="source">   * at which point it should return an empty list.</td></tr><tr><td class="line">62</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">63</td><td class="hits"></td><td class="source">   * @method implicitWait</td></tr><tr><td class="line">64</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#/session/:sessionId/timeouts/implicit_wait</td></tr><tr><td class="line">65</td><td class="hits"></td><td class="source">   * @param {GET} sessionId  ID of the session to route the command to</td></tr><tr><td class="line">66</td><td class="hits"></td><td class="source">   * @param {POST} ms The amount of time to wait, in milliseconds. This value has a lower bound of 0</td></tr><tr><td class="line">67</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">68</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">69</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">70</td><td class="hits"></td><td class="source">    name: 'implicitWait',</td></tr><tr><td class="line">71</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/timeouts/implicit_wait',</td></tr><tr><td class="line">72</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">73</td><td class="hits"></td><td class="source">    params: {timeout: 'ms'}</td></tr><tr><td class="line">74</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">75</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">76</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">77</td><td class="hits"></td><td class="source">   * Set the amount of time, in milliseconds, that asynchronous scripts executed by</td></tr><tr><td class="line">78</td><td class="hits"></td><td class="source">   * /session/:sessionId/execute_async are permitted to run before they are aborted</td></tr><tr><td class="line">79</td><td class="hits"></td><td class="source">   * and a |Timeout| error is returned to the client.</td></tr><tr><td class="line">80</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">81</td><td class="hits"></td><td class="source">   * @method asyncScript</td></tr><tr><td class="line">82</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/timeouts/async_script</td></tr><tr><td class="line">83</td><td class="hits"></td><td class="source">   * @param {GET} sessionId  ID of the session to route the command to</td></tr><tr><td class="line">84</td><td class="hits"></td><td class="source">   * @param {POST} ms The amount of time to wait, in milliseconds. This value has a lower bound of 0</td></tr><tr><td class="line">85</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">86</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">87</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">88</td><td class="hits"></td><td class="source">    name: 'asyncScript',</td></tr><tr><td class="line">89</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/timeouts/async_script',</td></tr><tr><td class="line">90</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">91</td><td class="hits"></td><td class="source">    params: {timeout: 'ms'}</td></tr><tr><td class="line">92</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">93</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">94</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">95</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/url.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/url.js</h2><div id="stats" class="low"><div class="percentage">28%</div><div class="sloc">7</div><div class="hits">2</div><div class="misses">5</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">28</td><td class="hits"></td><td class="source"> * URL related WebDriver endpoints</td></tr><tr><td class="line">29</td><td class="hits"></td><td class="source"> * see [JsonWireProtocol](https://code.google.com/p/selenium/wiki/JsonWireProtocol)</td></tr><tr><td class="line">30</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">31</td><td class="hits"></td><td class="source"> * @module FirefoxDriver</td></tr><tr><td class="line">32</td><td class="hits"></td><td class="source"> * @class URL</td></tr><tr><td class="line">33</td><td class="hits"></td><td class="source"> * @namespace FirefoxDriver.Commands.WebDriver</td></tr><tr><td class="line">34</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">35</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">36</td><td class="hits">1</td><td class="source">module.exports = function (Driver) {</td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">38</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">39</td><td class="hits"></td><td class="source">   * Navigate to a new URL</td></tr><tr><td class="line">40</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">41</td><td class="hits"></td><td class="source">   * @method open</td></tr><tr><td class="line">42</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/url</td></tr><tr><td class="line">43</td><td class="hits"></td><td class="source">   * @param {GET} sessionId  ID of the session to route the command to</td></tr><tr><td class="line">44</td><td class="hits"></td><td class="source">   * @param {POST} url The URL to navigate to.</td></tr><tr><td class="line">45</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">46</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">47</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">48</td><td class="hits"></td><td class="source">    name: 'open',</td></tr><tr><td class="line">49</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/url',</td></tr><tr><td class="line">50</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">51</td><td class="hits"></td><td class="source">    params: {url: 'url'}</td></tr><tr><td class="line">52</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">53</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">54</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">55</td><td class="hits"></td><td class="source">   * Retrieve the URL of the current page</td></tr><tr><td class="line">56</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">57</td><td class="hits"></td><td class="source">   * @method url</td></tr><tr><td class="line">58</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/url</td></tr><tr><td class="line">59</td><td class="hits"></td><td class="source">   * @param {GET} sessionId  ID of the session to route the command to</td></tr><tr><td class="line">60</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">61</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">62</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">63</td><td class="hits"></td><td class="source">    name: 'url',</td></tr><tr><td class="line">64</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/url',</td></tr><tr><td class="line">65</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">66</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">67</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">68</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">69</td><td class="hits"></td><td class="source">   * Navigate forwards in the browser history, if possible.</td></tr><tr><td class="line">70</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">71</td><td class="hits"></td><td class="source">   * @method forward</td></tr><tr><td class="line">72</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#/session/:sessionId/forward</td></tr><tr><td class="line">73</td><td class="hits"></td><td class="source">   * @param {GET} sessionId  ID of the session to route the command to</td></tr><tr><td class="line">74</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">75</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">76</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">77</td><td class="hits"></td><td class="source">    name: 'forward',</td></tr><tr><td class="line">78</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/forward',</td></tr><tr><td class="line">79</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">80</td><td class="hits"></td><td class="source">    timeout: 1000</td></tr><tr><td class="line">81</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">82</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">83</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">84</td><td class="hits"></td><td class="source">   * Navigate backwards in the browser history, if possible</td></tr><tr><td class="line">85</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">86</td><td class="hits"></td><td class="source">   * @method back</td></tr><tr><td class="line">87</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#/session/:sessionId/back</td></tr><tr><td class="line">88</td><td class="hits"></td><td class="source">   * @param {GET} sessionId  ID of the session to route the command to</td></tr><tr><td class="line">89</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">90</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">91</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">92</td><td class="hits"></td><td class="source">    name: 'back',</td></tr><tr><td class="line">93</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/back',</td></tr><tr><td class="line">94</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">95</td><td class="hits"></td><td class="source">    timeout: 1000</td></tr><tr><td class="line">96</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">97</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">98</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">99</td><td class="hits"></td><td class="source">   * Refresh the current page</td></tr><tr><td class="line">100</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">101</td><td class="hits"></td><td class="source">   * @method refresh</td></tr><tr><td class="line">102</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#/session/:sessionId/back</td></tr><tr><td class="line">103</td><td class="hits"></td><td class="source">   * @param {GET} sessionId  ID of the session to route the command to</td></tr><tr><td class="line">104</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">105</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">106</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">107</td><td class="hits"></td><td class="source">    name: 'refresh',</td></tr><tr><td class="line">108</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/refresh',</td></tr><tr><td class="line">109</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">110</td><td class="hits"></td><td class="source">    timeout: 1000</td></tr><tr><td class="line">111</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">112</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">113</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">114</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/window.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/commands/webdriver/window.js</h2><div id="stats" class="terrible"><div class="percentage">9%</div><div class="sloc">22</div><div class="hits">2</div><div class="misses">20</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">28</td><td class="hits"></td><td class="source"> * Window related WebDriver endpoints</td></tr><tr><td class="line">29</td><td class="hits"></td><td class="source"> * see [JsonWireProtocol](https://code.google.com/p/selenium/wiki/JsonWireProtocol)</td></tr><tr><td class="line">30</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">31</td><td class="hits"></td><td class="source"> * @module FirefoxDriver</td></tr><tr><td class="line">32</td><td class="hits"></td><td class="source"> * @class Window</td></tr><tr><td class="line">33</td><td class="hits"></td><td class="source"> * @namespace FirefoxDriver.Commands.WebDriver</td></tr><tr><td class="line">34</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">35</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">36</td><td class="hits">1</td><td class="source">module.exports = function (Driver) {</td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">38</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">39</td><td class="hits"></td><td class="source">   * Retrieve the current window handle.</td></tr><tr><td class="line">40</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">41</td><td class="hits"></td><td class="source">   * @method windowHandle</td></tr><tr><td class="line">42</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/window_handle</td></tr><tr><td class="line">43</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">44</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">45</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">46</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">47</td><td class="hits"></td><td class="source">    name: 'windowHandle',</td></tr><tr><td class="line">48</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/window_handle',</td></tr><tr><td class="line">49</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">50</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">51</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">52</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">53</td><td class="hits"></td><td class="source">   * Retrieve the list of all window handles available to the session.</td></tr><tr><td class="line">54</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">55</td><td class="hits"></td><td class="source">   * @method windowHandles</td></tr><tr><td class="line">56</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/window_handles</td></tr><tr><td class="line">57</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">58</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">59</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">60</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">61</td><td class="hits"></td><td class="source">    name: 'windowHandles',</td></tr><tr><td class="line">62</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/window_handles',</td></tr><tr><td class="line">63</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">64</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">65</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">66</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">67</td><td class="hits"></td><td class="source">   * Change focus to another window.</td></tr><tr><td class="line">68</td><td class="hits"></td><td class="source">   * The window to change focus to may be specified by its server assigned window handle, or by the value of its name attribute.</td></tr><tr><td class="line">69</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">70</td><td class="hits"></td><td class="source">   * @method changeWindow</td></tr><tr><td class="line">71</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/window</td></tr><tr><td class="line">72</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">73</td><td class="hits"></td><td class="source">   * @param {POST} name Name of the window to switch to</td></tr><tr><td class="line">74</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">75</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">76</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">77</td><td class="hits"></td><td class="source">    name: 'changeWindow',</td></tr><tr><td class="line">78</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/window',</td></tr><tr><td class="line">79</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">80</td><td class="hits"></td><td class="source">    params: {name: 'name'}</td></tr><tr><td class="line">81</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">82</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">83</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">84</td><td class="hits"></td><td class="source">   * Close the current window.</td></tr><tr><td class="line">85</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">86</td><td class="hits"></td><td class="source">   * @method closeWindow</td></tr><tr><td class="line">87</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#DELETE_/session/:sessionId/window</td></tr><tr><td class="line">88</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">89</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">90</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">91</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">92</td><td class="hits"></td><td class="source">    name: 'closeWindow',</td></tr><tr><td class="line">93</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/window',</td></tr><tr><td class="line">94</td><td class="hits"></td><td class="source">    method: 'del'</td></tr><tr><td class="line">95</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">96</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">97</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">98</td><td class="hits"></td><td class="source">   * Change the size of the specified window.</td></tr><tr><td class="line">99</td><td class="hits"></td><td class="source">   * If the :windowHandle URL parameter is &quot;current&quot;, the currently active window will be resized.</td></tr><tr><td class="line">100</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">101</td><td class="hits"></td><td class="source">   * @method windowSize</td></tr><tr><td class="line">102</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/window/:windowHandle/size</td></tr><tr><td class="line">103</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">104</td><td class="hits"></td><td class="source">   * @param {GET} windowHandle ID of the window to route the command to</td></tr><tr><td class="line">105</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">106</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">107</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">108</td><td class="hits"></td><td class="source">    name: 'windowSize',</td></tr><tr><td class="line">109</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/window/:windowHandle/size',</td></tr><tr><td class="line">110</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">111</td><td class="hits"></td><td class="source">    params: {width: 'width', height: 'height'},</td></tr><tr><td class="line">112</td><td class="hits"></td><td class="source">    onRequest: function (req, res) {</td></tr><tr><td class="line">113</td><td class="hits"></td><td class="source">      // load the marionette connection id &amp; then request the session id</td></tr><tr class="miss"><td class="line">114</td><td class="hits">0</td><td class="source">      this.events.emit('marionette:cmd:windowSize', {'sessionId': req.params.sessionId, 'value': 'window.resizeTo(&quot;' + req.body.height + '&quot;, &quot;' + req.body.width + '&quot;)' });</td></tr><tr class="miss"><td class="line">115</td><td class="hits">0</td><td class="source">      this.events.on('marionette:cmd:windowSize:response', function () {</td></tr><tr class="miss"><td class="line">116</td><td class="hits">0</td><td class="source">        var answer = {</td></tr><tr><td class="line">117</td><td class="hits"></td><td class="source">          sessionId: req.params.sessionId,</td></tr><tr><td class="line">118</td><td class="hits"></td><td class="source">          status: 0,</td></tr><tr><td class="line">119</td><td class="hits"></td><td class="source">          value: true</td></tr><tr><td class="line">120</td><td class="hits"></td><td class="source">        };</td></tr><tr><td class="line">121</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">122</td><td class="hits">0</td><td class="source">        res.status(200);</td></tr><tr class="miss"><td class="line">123</td><td class="hits">0</td><td class="source">        res.send(JSON.stringify(answer));</td></tr><tr><td class="line">124</td><td class="hits"></td><td class="source">      }.bind(this));</td></tr><tr><td class="line">125</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">126</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">127</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">128</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">129</td><td class="hits"></td><td class="source">   * Get the size of the specified window.</td></tr><tr><td class="line">130</td><td class="hits"></td><td class="source">   * If the :windowHandle URL parameter is &quot;current&quot;, the size of the currently active window will be returned.</td></tr><tr><td class="line">131</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">132</td><td class="hits"></td><td class="source">   * @method getWindowSize</td></tr><tr><td class="line">133</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/window/:windowHandle/size</td></tr><tr><td class="line">134</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">135</td><td class="hits"></td><td class="source">   * @param {GET} windowHandle ID of the window to route the command to</td></tr><tr><td class="line">136</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">137</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">138</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">139</td><td class="hits"></td><td class="source">    name: 'getWindowSize',</td></tr><tr><td class="line">140</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/window/:windowHandle/size',</td></tr><tr><td class="line">141</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">142</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">143</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">144</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">145</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">146</td><td class="hits"></td><td class="source">   * Change the position of the specified window.</td></tr><tr><td class="line">147</td><td class="hits"></td><td class="source">   * If the :windowHandle URL parameter is &quot;current&quot;, the currently active window will be moved.</td></tr><tr><td class="line">148</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">149</td><td class="hits"></td><td class="source">   * @method windowPosition</td></tr><tr><td class="line">150</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/window/:windowHandle/position</td></tr><tr><td class="line">151</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">152</td><td class="hits"></td><td class="source">   * @param {GET} windowHandle ID of the window to route the command to</td></tr><tr><td class="line">153</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">154</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">155</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">156</td><td class="hits"></td><td class="source">    name: 'windowPosition',</td></tr><tr><td class="line">157</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/window/:windowHandle/position',</td></tr><tr><td class="line">158</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">159</td><td class="hits"></td><td class="source">    params: {x: 'x', y: 'y'}</td></tr><tr><td class="line">160</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">161</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">162</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">163</td><td class="hits"></td><td class="source">   * Get the position of the specified window.</td></tr><tr><td class="line">164</td><td class="hits"></td><td class="source">   * If the :windowHandle URL parameter is &quot;current&quot;, the position of the currently active window will be returned.</td></tr><tr><td class="line">165</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">166</td><td class="hits"></td><td class="source">   * @method getWindowPosition</td></tr><tr><td class="line">167</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/window/:windowHandle/position</td></tr><tr><td class="line">168</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">169</td><td class="hits"></td><td class="source">   * @param {GET} windowHandle ID of the window to route the command to</td></tr><tr><td class="line">170</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">171</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">172</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">173</td><td class="hits"></td><td class="source">    name: 'getWindowPosition',</td></tr><tr><td class="line">174</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/window/:windowHandle/position',</td></tr><tr><td class="line">175</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">176</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">177</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">178</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">179</td><td class="hits"></td><td class="source">   * Maximize the specified window if not already maximized.</td></tr><tr><td class="line">180</td><td class="hits"></td><td class="source">   * If the :windowHandle URL parameter is &quot;current&quot;, the currently active window will be maximized.</td></tr><tr><td class="line">181</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">182</td><td class="hits"></td><td class="source">   * @method windowMaximize</td></tr><tr><td class="line">183</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/window/:windowHandle/position</td></tr><tr><td class="line">184</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">185</td><td class="hits"></td><td class="source">   * @param {GET} windowHandle ID of the window to route the command to</td></tr><tr><td class="line">186</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">187</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">188</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">189</td><td class="hits"></td><td class="source">    name: 'windowMaximize',</td></tr><tr><td class="line">190</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/window/:windowHandle/maximize',</td></tr><tr><td class="line">191</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">192</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">193</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">194</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">195</td><td class="hits"></td><td class="source">   * Get the current browser orientation.</td></tr><tr><td class="line">196</td><td class="hits"></td><td class="source">   * The server should return a valid orientation value {LANDSCAPE|PORTRAIT}.</td></tr><tr><td class="line">197</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">198</td><td class="hits"></td><td class="source">   * @method getOrientation</td></tr><tr><td class="line">199</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/orientation</td></tr><tr><td class="line">200</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">201</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">202</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">203</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">204</td><td class="hits"></td><td class="source">    name: 'getOrientation',</td></tr><tr><td class="line">205</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/orientation',</td></tr><tr><td class="line">206</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">207</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">208</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">209</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">210</td><td class="hits"></td><td class="source">   * Set the browser orientation.</td></tr><tr><td class="line">211</td><td class="hits"></td><td class="source">   * Must be one of the two values {LANDSCAPE|PORTRAIT}.</td></tr><tr><td class="line">212</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">213</td><td class="hits"></td><td class="source">   * @method orientation</td></tr><tr><td class="line">214</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/orientation</td></tr><tr><td class="line">215</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">216</td><td class="hits"></td><td class="source">   * @param {POST} orientation The new browser orientation {LANDSCAPE|PORTRAIT}.</td></tr><tr><td class="line">217</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">218</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">219</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">220</td><td class="hits"></td><td class="source">    name: 'orientation',</td></tr><tr><td class="line">221</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/orientation',</td></tr><tr><td class="line">222</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">223</td><td class="hits"></td><td class="source">    params: {orientation: 'orientation'}</td></tr><tr><td class="line">224</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">225</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">226</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">227</td><td class="hits"></td><td class="source">   * Gets the text of the currently displayed JavaScript alert(), confirm(), or prompt() dialog.</td></tr><tr><td class="line">228</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">229</td><td class="hits"></td><td class="source">   * @method dialogText</td></tr><tr><td class="line">230</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/session/:sessionId/alert_text</td></tr><tr><td class="line">231</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">232</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">233</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">234</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">235</td><td class="hits"></td><td class="source">    name: 'dialogText',</td></tr><tr><td class="line">236</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/alert_text',</td></tr><tr><td class="line">237</td><td class="hits"></td><td class="source">    method: 'get'</td></tr><tr><td class="line">238</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">239</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">240</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">241</td><td class="hits"></td><td class="source">   * Sends keystrokes to a JavaScript prompt() dialog.</td></tr><tr><td class="line">242</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">243</td><td class="hits"></td><td class="source">   * @method alertText</td></tr><tr><td class="line">244</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/alert_text</td></tr><tr><td class="line">245</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">246</td><td class="hits"></td><td class="source">   * @param {POST} text Keystrokes to send to the prompt() dialog.</td></tr><tr><td class="line">247</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">248</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">249</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">250</td><td class="hits"></td><td class="source">    name: 'setDialogText',</td></tr><tr><td class="line">251</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/alert_text',</td></tr><tr><td class="line">252</td><td class="hits"></td><td class="source">    method: 'post',</td></tr><tr><td class="line">253</td><td class="hits"></td><td class="source">    params: {text: 'text'}</td></tr><tr><td class="line">254</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">255</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">256</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">257</td><td class="hits"></td><td class="source">   * Accepts the currently displayed alert dialog.</td></tr><tr><td class="line">258</td><td class="hits"></td><td class="source">   * Usually, this is equivalent to clicking on the 'OK' button in the dialog.</td></tr><tr><td class="line">259</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">260</td><td class="hits"></td><td class="source">   * @method acceptDialog</td></tr><tr><td class="line">261</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/accept_alert</td></tr><tr><td class="line">262</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">263</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">264</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">265</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">266</td><td class="hits"></td><td class="source">    name: 'acceptDialog',</td></tr><tr><td class="line">267</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/accept_alert',</td></tr><tr><td class="line">268</td><td class="hits"></td><td class="source">    method: 'post'</td></tr><tr><td class="line">269</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">270</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">271</td><td class="hits"></td><td class="source">  /**</td></tr><tr><td class="line">272</td><td class="hits"></td><td class="source">   * Dismisses the currently displayed alert dialog.</td></tr><tr><td class="line">273</td><td class="hits"></td><td class="source">   * For confirm() and prompt() dialogs, this is equivalent to clicking the 'Cancel' button.</td></tr><tr><td class="line">274</td><td class="hits"></td><td class="source">   * For alert() dialogs, this is equivalent to clicking the 'OK' button.</td></tr><tr><td class="line">275</td><td class="hits"></td><td class="source">   *</td></tr><tr><td class="line">276</td><td class="hits"></td><td class="source">   * @method dismissDialog</td></tr><tr><td class="line">277</td><td class="hits"></td><td class="source">   * @see https://code.google.com/p/selenium/wiki/JsonWireProtocol#POST_/session/:sessionId/dismiss_alert</td></tr><tr><td class="line">278</td><td class="hits"></td><td class="source">   * @param {GET} sessionId ID of the session to route the command to</td></tr><tr><td class="line">279</td><td class="hits"></td><td class="source">   */</td></tr><tr><td class="line">280</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">281</td><td class="hits">0</td><td class="source">  Driver.addCommand({</td></tr><tr><td class="line">282</td><td class="hits"></td><td class="source">    name: 'dismissDialog',</td></tr><tr><td class="line">283</td><td class="hits"></td><td class="source">    url: '/session/:sessionId/dismiss_alert',</td></tr><tr><td class="line">284</td><td class="hits"></td><td class="source">    method: 'post'</td></tr><tr><td class="line">285</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">286</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">287</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">288</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/marionette.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/marionette.js</h2><div id="stats" class="terrible"><div class="percentage">14%</div><div class="sloc">102</div><div class="hits">15</div><div class="misses">87</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">// ext. libs</td></tr><tr class="hit"><td class="line">28</td><td class="hits">1</td><td class="source">var fs = require('fs');</td></tr><tr class="hit"><td class="line">29</td><td class="hits">1</td><td class="source">var net = require('net');</td></tr><tr class="hit"><td class="line">30</td><td class="hits">1</td><td class="source">var Q = require('q');</td></tr><tr><td class="line">31</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">32</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">33</td><td class="hits"></td><td class="source"> * Firefox Autotest (Marionette)</td></tr><tr><td class="line">34</td><td class="hits"></td><td class="source"> * connection handler &amp; request executor</td></tr><tr><td class="line">35</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">36</td><td class="hits"></td><td class="source"> * @module FirefoxDriver</td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source"> * @class Marionette</td></tr><tr><td class="line">38</td><td class="hits"></td><td class="source"> * @namespace FirefoxDriver</td></tr><tr><td class="line">39</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">40</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">41</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">42</td><td class="hits"></td><td class="source"> * Configures the marionette socket</td></tr><tr><td class="line">43</td><td class="hits"></td><td class="source"> * Prepares the object properties</td></tr><tr><td class="line">44</td><td class="hits"></td><td class="source"> * Loads the marionette commands</td></tr><tr><td class="line">45</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">46</td><td class="hits"></td><td class="source"> * @constructor</td></tr><tr><td class="line">47</td><td class="hits"></td><td class="source"> * @param {EventEmitter} events</td></tr><tr><td class="line">48</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">49</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">50</td><td class="hits">1</td><td class="source">var Marionette = function (events) {</td></tr><tr><td class="line">51</td><td class="hits"></td><td class="source">  // configure the marionette socket</td></tr><tr class="miss"><td class="line">52</td><td class="hits">0</td><td class="source">  this.socket = new net.Socket();</td></tr><tr class="miss"><td class="line">53</td><td class="hits">0</td><td class="source">  this.socket.on('error', this._onError.bind(this));</td></tr><tr class="miss"><td class="line">54</td><td class="hits">0</td><td class="source">  this.socket.on('data', this._onData.bind(this));</td></tr><tr><td class="line">55</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">56</td><td class="hits"></td><td class="source">  // configure marionette session container</td></tr><tr class="miss"><td class="line">57</td><td class="hits">0</td><td class="source">  this._marionetteID = null;</td></tr><tr><td class="line">58</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">59</td><td class="hits"></td><td class="source">  // store events instance</td></tr><tr class="miss"><td class="line">60</td><td class="hits">0</td><td class="source">  this.events = events;</td></tr><tr><td class="line">61</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">62</td><td class="hits"></td><td class="source">  // register marionette id setter</td></tr><tr class="miss"><td class="line">63</td><td class="hits">0</td><td class="source">  this.events.on('marionette:setMarionetteID', function (id) {</td></tr><tr class="miss"><td class="line">64</td><td class="hits">0</td><td class="source">    this._marionetteID = id;</td></tr><tr><td class="line">65</td><td class="hits"></td><td class="source">  }.bind(this));</td></tr><tr><td class="line">66</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">67</td><td class="hits"></td><td class="source">  // prepare the commands property</td></tr><tr class="miss"><td class="line">68</td><td class="hits">0</td><td class="source">  this.commands = {};</td></tr><tr><td class="line">69</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">70</td><td class="hits"></td><td class="source">  // prepare the last send command property</td></tr><tr class="miss"><td class="line">71</td><td class="hits">0</td><td class="source">  this._lastCommand = null;</td></tr><tr><td class="line">72</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">73</td><td class="hits"></td><td class="source">  // prepare the last message length property</td></tr><tr class="miss"><td class="line">74</td><td class="hits">0</td><td class="source">  this._lastMessageLength = null;</td></tr><tr><td class="line">75</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">76</td><td class="hits"></td><td class="source">  // load the commands</td></tr><tr class="miss"><td class="line">77</td><td class="hits">0</td><td class="source">  this._loadCommands();</td></tr><tr><td class="line">78</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">79</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">80</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">81</td><td class="hits"></td><td class="source"> * Opens the marionette socket</td></tr><tr><td class="line">82</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">83</td><td class="hits"></td><td class="source"> * @method connect</td></tr><tr><td class="line">84</td><td class="hits"></td><td class="source"> * @param {integer} marionettePort</td></tr><tr><td class="line">85</td><td class="hits"></td><td class="source"> * @return {Q.promise} promise</td></tr><tr><td class="line">86</td><td class="hits"></td><td class="source"> * @public</td></tr><tr><td class="line">87</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">88</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">89</td><td class="hits">1</td><td class="source">Marionette.prototype.connect = function (marionettePort) {</td></tr><tr class="miss"><td class="line">90</td><td class="hits">0</td><td class="source">  var deferred = Q.defer();</td></tr><tr class="miss"><td class="line">91</td><td class="hits">0</td><td class="source">  this.socket.on('connect', deferred.resolve);</td></tr><tr class="miss"><td class="line">92</td><td class="hits">0</td><td class="source">  this.socket.connect(marionettePort);</td></tr><tr class="miss"><td class="line">93</td><td class="hits">0</td><td class="source">  return deferred.promise;</td></tr><tr><td class="line">94</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">95</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">96</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">97</td><td class="hits"></td><td class="source"> * Closes the marionette socket &amp; cleans up</td></tr><tr><td class="line">98</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">99</td><td class="hits"></td><td class="source"> * @method kill</td></tr><tr><td class="line">100</td><td class="hits"></td><td class="source"> * @return {Q.promise} promise</td></tr><tr><td class="line">101</td><td class="hits"></td><td class="source"> * @public</td></tr><tr><td class="line">102</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">103</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">104</td><td class="hits">1</td><td class="source">Marionette.prototype.kill = function () {</td></tr><tr class="miss"><td class="line">105</td><td class="hits">0</td><td class="source">  var deferred = Q.defer();</td></tr><tr class="miss"><td class="line">106</td><td class="hits">0</td><td class="source">  this.socket.on('end', deferred.makeNodeResolver());</td></tr><tr class="miss"><td class="line">107</td><td class="hits">0</td><td class="source">  this.socket.end();</td></tr><tr class="miss"><td class="line">108</td><td class="hits">0</td><td class="source">  return deferred.promise;</td></tr><tr><td class="line">109</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">110</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">111</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">112</td><td class="hits"></td><td class="source"> * Generates a function &amp; an event listener for every marionette command</td></tr><tr><td class="line">113</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">114</td><td class="hits"></td><td class="source"> * @method addCommand</td></tr><tr><td class="line">115</td><td class="hits"></td><td class="source"> * @param {object} command</td></tr><tr><td class="line">116</td><td class="hits"></td><td class="source"> * @return {object} command</td></tr><tr><td class="line">117</td><td class="hits"></td><td class="source"> * @public</td></tr><tr><td class="line">118</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">119</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">120</td><td class="hits">1</td><td class="source">Marionette.prototype.addCommand = function (command) {</td></tr><tr><td class="line">121</td><td class="hits"></td><td class="source">  // generate the command function</td></tr><tr class="miss"><td class="line">122</td><td class="hits">0</td><td class="source">  this.commands[command.name] = function (params) {</td></tr><tr class="miss"><td class="line">123</td><td class="hits">0</td><td class="source">    var req = {};</td></tr><tr class="miss"><td class="line">124</td><td class="hits">0</td><td class="source">    var deferred = Q.defer();</td></tr><tr><td class="line">125</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">126</td><td class="hits">0</td><td class="source">    deferred.promise.then(function (data) {</td></tr><tr class="miss"><td class="line">127</td><td class="hits">0</td><td class="source">      this.events.emit('marionette:cmd:' + command.name + ':response', JSON.stringify(data));</td></tr><tr><td class="line">128</td><td class="hits"></td><td class="source">    }.bind(this));</td></tr><tr><td class="line">129</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">130</td><td class="hits"></td><td class="source">    // parse the command skeleton &amp; create a message with values</td></tr><tr class="miss"><td class="line">131</td><td class="hits">0</td><td class="source">    Object.keys(command.request).forEach(function (key){</td></tr><tr><td class="line">132</td><td class="hits"></td><td class="source">      // cookie related hack</td></tr><tr class="miss"><td class="line">133</td><td class="hits">0</td><td class="source">      if (command.name === 'cookies' &amp;&amp; this._parseRequestKey(command.request[key], params) === '') {</td></tr><tr><td class="line">134</td><td class="hits"></td><td class="source">      } else {</td></tr><tr class="miss"><td class="line">135</td><td class="hits">0</td><td class="source">        req[key] = this._parseRequestKey(command.request[key], params);</td></tr><tr><td class="line">136</td><td class="hits"></td><td class="source">      }</td></tr><tr><td class="line">137</td><td class="hits"></td><td class="source">    }.bind(this));</td></tr><tr><td class="line">138</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">139</td><td class="hits"></td><td class="source">    // issue the command</td></tr><tr class="miss"><td class="line">140</td><td class="hits">0</td><td class="source">    this._sendCommand(req, deferred);</td></tr><tr><td class="line">141</td><td class="hits"></td><td class="source">  }.bind(this);</td></tr><tr><td class="line">142</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">143</td><td class="hits"></td><td class="source">  // generate event listener for every marionette command</td></tr><tr class="miss"><td class="line">144</td><td class="hits">0</td><td class="source">  this.events.on('marionette:cmd:' + command.name, this.commands[command.name].bind(this));</td></tr><tr class="miss"><td class="line">145</td><td class="hits">0</td><td class="source">  return command;</td></tr><tr><td class="line">146</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">147</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">148</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">149</td><td class="hits"></td><td class="source"> * Loads the marionette commands from the commands library</td></tr><tr><td class="line">150</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">151</td><td class="hits"></td><td class="source"> * @method _loadCommands</td></tr><tr><td class="line">152</td><td class="hits"></td><td class="source"> * @chainable</td></tr><tr><td class="line">153</td><td class="hits"></td><td class="source"> * @private</td></tr><tr><td class="line">154</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">155</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">156</td><td class="hits">1</td><td class="source">Marionette.prototype._loadCommands = function () {</td></tr><tr class="miss"><td class="line">157</td><td class="hits">0</td><td class="source">  var dir = __dirname + '/commands/marionette/';</td></tr><tr class="miss"><td class="line">158</td><td class="hits">0</td><td class="source">  fs.readdirSync(dir).forEach(function (file) {</td></tr><tr class="miss"><td class="line">159</td><td class="hits">0</td><td class="source">    require(dir + file)(this);</td></tr><tr><td class="line">160</td><td class="hits"></td><td class="source">  }.bind(this));</td></tr><tr class="miss"><td class="line">161</td><td class="hits">0</td><td class="source">  return this;</td></tr><tr><td class="line">162</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">163</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">164</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">165</td><td class="hits"></td><td class="source"> * Templating function that replaces placeholders in commands</td></tr><tr><td class="line">166</td><td class="hits"></td><td class="source"> * with their actual values</td></tr><tr><td class="line">167</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">168</td><td class="hits"></td><td class="source"> * @method _parseRequestKey</td></tr><tr><td class="line">169</td><td class="hits"></td><td class="source"> * @param {string} placeholder</td></tr><tr><td class="line">170</td><td class="hits"></td><td class="source"> * @param {object} params</td></tr><tr><td class="line">171</td><td class="hits"></td><td class="source"> * @return {string} content</td></tr><tr><td class="line">172</td><td class="hits"></td><td class="source"> * @private</td></tr><tr><td class="line">173</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">174</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">175</td><td class="hits">1</td><td class="source">Marionette.prototype._parseRequestKey = function (placeholder, params) {</td></tr><tr class="miss"><td class="line">176</td><td class="hits">0</td><td class="source">  if (typeof placeholder !== 'object' &amp;&amp; placeholder[0] !== ':') {</td></tr><tr class="miss"><td class="line">177</td><td class="hits">0</td><td class="source">    return placeholder;</td></tr><tr><td class="line">178</td><td class="hits"></td><td class="source">  }</td></tr><tr><td class="line">179</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">180</td><td class="hits"></td><td class="source">  // check the params</td></tr><tr class="miss"><td class="line">181</td><td class="hits">0</td><td class="source">  if (!params) {</td></tr><tr class="miss"><td class="line">182</td><td class="hits">0</td><td class="source">    params = {};</td></tr><tr><td class="line">183</td><td class="hits"></td><td class="source">  }</td></tr><tr><td class="line">184</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">185</td><td class="hits"></td><td class="source">  // add the marionetteID to the params</td></tr><tr class="miss"><td class="line">186</td><td class="hits">0</td><td class="source">  if (typeof placeholder !== 'object') {</td></tr><tr class="miss"><td class="line">187</td><td class="hits">0</td><td class="source">    params.marionetteId = this._marionetteID;</td></tr><tr><td class="line">188</td><td class="hits"></td><td class="source">  }</td></tr><tr><td class="line">189</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">190</td><td class="hits">0</td><td class="source">  var content = '';</td></tr><tr class="miss"><td class="line">191</td><td class="hits">0</td><td class="source">  if (typeof placeholder !== 'object') {</td></tr><tr class="miss"><td class="line">192</td><td class="hits">0</td><td class="source">    Object.keys(params).forEach(function (key){</td></tr><tr class="miss"><td class="line">193</td><td class="hits">0</td><td class="source">      if (key === placeholder.substr(1)) {</td></tr><tr class="miss"><td class="line">194</td><td class="hits">0</td><td class="source">        content = params[key];</td></tr><tr><td class="line">195</td><td class="hits"></td><td class="source">      }</td></tr><tr><td class="line">196</td><td class="hits"></td><td class="source">    }.bind(this));</td></tr><tr><td class="line">197</td><td class="hits"></td><td class="source">  }</td></tr><tr><td class="line">198</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">199</td><td class="hits"></td><td class="source">  // check if we have a params object (and replace also there)</td></tr><tr class="miss"><td class="line">200</td><td class="hits">0</td><td class="source">  if (typeof placeholder === 'object') {</td></tr><tr class="miss"><td class="line">201</td><td class="hits">0</td><td class="source">    content = {};</td></tr><tr><td class="line">202</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">203</td><td class="hits">0</td><td class="source">    Object.keys(params).forEach(function (key) {</td></tr><tr class="miss"><td class="line">204</td><td class="hits">0</td><td class="source">      Object.keys(placeholder).forEach(function (name) {</td></tr><tr class="miss"><td class="line">205</td><td class="hits">0</td><td class="source">        if (placeholder[name] &amp;&amp; placeholder[name].substring(1) === key) {</td></tr><tr class="miss"><td class="line">206</td><td class="hits">0</td><td class="source">          content[name] = params[key];</td></tr><tr><td class="line">207</td><td class="hits"></td><td class="source">        }</td></tr><tr><td class="line">208</td><td class="hits"></td><td class="source">      }.bind(this));</td></tr><tr><td class="line">209</td><td class="hits"></td><td class="source">    }.bind(this));</td></tr><tr><td class="line">210</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">211</td><td class="hits">0</td><td class="source">    Object.keys(placeholder).forEach(function (name) {</td></tr><tr class="miss"><td class="line">212</td><td class="hits">0</td><td class="source">      if (placeholder[name].substr(0, 1) !== ':') {</td></tr><tr class="miss"><td class="line">213</td><td class="hits">0</td><td class="source">        content[name] = placeholder[name];</td></tr><tr><td class="line">214</td><td class="hits"></td><td class="source">      }</td></tr><tr><td class="line">215</td><td class="hits"></td><td class="source">    }.bind(this));</td></tr><tr><td class="line">216</td><td class="hits"></td><td class="source">  }</td></tr><tr><td class="line">217</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">218</td><td class="hits">0</td><td class="source">  return content;</td></tr><tr><td class="line">219</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">220</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">221</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">222</td><td class="hits"></td><td class="source"> * Will be called if a socket error occurs</td></tr><tr><td class="line">223</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">224</td><td class="hits"></td><td class="source"> * @method _onError</td></tr><tr><td class="line">225</td><td class="hits"></td><td class="source"> * @param {buffer} err</td></tr><tr><td class="line">226</td><td class="hits"></td><td class="source"> * @chainable</td></tr><tr><td class="line">227</td><td class="hits"></td><td class="source"> * @private</td></tr><tr><td class="line">228</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">229</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">230</td><td class="hits">1</td><td class="source">Marionette.prototype._onError = function (err) {</td></tr><tr><td class="line">231</td><td class="hits"></td><td class="source">  // TODO: Use the super not yet implemented dalek error handler</td></tr><tr class="miss"><td class="line">232</td><td class="hits">0</td><td class="source">  console.log('ERR', String(err));</td></tr><tr class="miss"><td class="line">233</td><td class="hits">0</td><td class="source">  process.exit();</td></tr><tr class="miss"><td class="line">234</td><td class="hits">0</td><td class="source">  return this;</td></tr><tr><td class="line">235</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">236</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">237</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">238</td><td class="hits"></td><td class="source"> * Handles the incoming data from the marionette sockets</td></tr><tr><td class="line">239</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">240</td><td class="hits"></td><td class="source"> * @method _onData</td></tr><tr><td class="line">241</td><td class="hits"></td><td class="source"> * @param {buffer} data</td></tr><tr><td class="line">242</td><td class="hits"></td><td class="source"> * @chainable</td></tr><tr><td class="line">243</td><td class="hits"></td><td class="source"> * @private</td></tr><tr><td class="line">244</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">245</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">246</td><td class="hits">1</td><td class="source">Marionette.prototype._onData = function (data) {</td></tr><tr class="miss"><td class="line">247</td><td class="hits">0</td><td class="source">  var def = Q.defer();</td></tr><tr class="miss"><td class="line">248</td><td class="hits">0</td><td class="source">  var raw = String(data);</td></tr><tr><td class="line">249</td><td class="hits"></td><td class="source">  // extract the header out of the raw message</td></tr><tr class="miss"><td class="line">250</td><td class="hits">0</td><td class="source">  var colon = raw.indexOf(':');</td></tr><tr class="miss"><td class="line">251</td><td class="hits">0</td><td class="source">  var length = raw.substr(0, colon);</td></tr><tr class="miss"><td class="line">252</td><td class="hits">0</td><td class="source">  var msg = raw.substring(colon + 1);</td></tr><tr><td class="line">253</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">254</td><td class="hits"></td><td class="source">  // check if this is incoming data is a sibling</td></tr><tr><td class="line">255</td><td class="hits"></td><td class="source">  // to a previous received message</td></tr><tr class="miss"><td class="line">256</td><td class="hits">0</td><td class="source">  if (isNaN(parseInt(length, 10))) {</td></tr><tr class="miss"><td class="line">257</td><td class="hits">0</td><td class="source">    length = this._lastResponseLength;</td></tr><tr><td class="line">258</td><td class="hits"></td><td class="source">  }</td></tr><tr><td class="line">259</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">260</td><td class="hits"></td><td class="source">  // store message data</td></tr><tr class="miss"><td class="line">261</td><td class="hits">0</td><td class="source">  this._lastResponseLength = length;</td></tr><tr class="miss"><td class="line">262</td><td class="hits">0</td><td class="source">  this._lastResponse += msg;</td></tr><tr class="miss"><td class="line">263</td><td class="hits">0</td><td class="source">  this._lastRawResponse += raw;</td></tr><tr><td class="line">264</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">265</td><td class="hits"></td><td class="source">  // check if the message is complete</td></tr><tr class="miss"><td class="line">266</td><td class="hits">0</td><td class="source">  if((this._lastResponse.length + 1) &gt;= parseInt(length, 10)) {</td></tr><tr><td class="line">267</td><td class="hits"></td><td class="source">    // resolve the message</td></tr><tr class="miss"><td class="line">268</td><td class="hits">0</td><td class="source">    def.resolve(this._lastRawResponse);</td></tr><tr><td class="line">269</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">270</td><td class="hits"></td><td class="source">    // reset our message storage</td></tr><tr class="miss"><td class="line">271</td><td class="hits">0</td><td class="source">    this._lastRawResponse = '';</td></tr><tr class="miss"><td class="line">272</td><td class="hits">0</td><td class="source">    this._lastResponse = '';</td></tr><tr class="miss"><td class="line">273</td><td class="hits">0</td><td class="source">    this._lastResponseLength = null;</td></tr><tr><td class="line">274</td><td class="hits"></td><td class="source">  }</td></tr><tr><td class="line">275</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">276</td><td class="hits"></td><td class="source">  // release the message when it is completely received</td></tr><tr class="miss"><td class="line">277</td><td class="hits">0</td><td class="source">  Q.when(def.promise).then(function(data) {</td></tr><tr><td class="line">278</td><td class="hits"></td><td class="source">    // parse the message &amp; call the resolving function</td></tr><tr class="miss"><td class="line">279</td><td class="hits">0</td><td class="source">    var parsedMessage = this._parseMessage(data);</td></tr><tr><td class="line">280</td><td class="hits"></td><td class="source">    // avoid resolving the initial handshake command</td></tr><tr class="miss"><td class="line">281</td><td class="hits">0</td><td class="source">    if (!parsedMessage.applicationType) {</td></tr><tr class="miss"><td class="line">282</td><td class="hits">0</td><td class="source">      this._lastCommand.resolve(parsedMessage);</td></tr><tr><td class="line">283</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">284</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">285</td><td class="hits"></td><td class="source">  }.bind(this));</td></tr><tr><td class="line">286</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">287</td><td class="hits">0</td><td class="source">  return this;</td></tr><tr><td class="line">288</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">289</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">290</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">291</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">292</td><td class="hits"></td><td class="source"> * Parses a marionette response message</td></tr><tr><td class="line">293</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">294</td><td class="hits"></td><td class="source"> * @method _parseMessage</td></tr><tr><td class="line">295</td><td class="hits"></td><td class="source"> * @param {buffer} data</td></tr><tr><td class="line">296</td><td class="hits"></td><td class="source"> * @return {object} message</td></tr><tr><td class="line">297</td><td class="hits"></td><td class="source"> * @private</td></tr><tr><td class="line">298</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">299</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">300</td><td class="hits">1</td><td class="source">Marionette.prototype._parseMessage = function (data) {</td></tr><tr class="miss"><td class="line">301</td><td class="hits">0</td><td class="source">  var raw = String(data);</td></tr><tr class="miss"><td class="line">302</td><td class="hits">0</td><td class="source">  var colon = raw.indexOf(':');</td></tr><tr class="miss"><td class="line">303</td><td class="hits">0</td><td class="source">  var message = JSON.parse(raw.substring(colon + 1));</td></tr><tr class="miss"><td class="line">304</td><td class="hits">0</td><td class="source">  return message;</td></tr><tr><td class="line">305</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">306</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">307</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">308</td><td class="hits"></td><td class="source"> * Issues a command to the marionette server</td></tr><tr><td class="line">309</td><td class="hits"></td><td class="source"> * Generates a reference to the last called command,</td></tr><tr><td class="line">310</td><td class="hits"></td><td class="source"> * so that we are able to call the right receiver function for</td></tr><tr><td class="line">311</td><td class="hits"></td><td class="source"> * the response from marionette</td></tr><tr><td class="line">312</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">313</td><td class="hits"></td><td class="source"> * @method _sendCommand</td></tr><tr><td class="line">314</td><td class="hits"></td><td class="source"> * @param {object} command</td></tr><tr><td class="line">315</td><td class="hits"></td><td class="source"> * @param {Q.promise} deferred</td></tr><tr><td class="line">316</td><td class="hits"></td><td class="source"> * @chainable</td></tr><tr><td class="line">317</td><td class="hits"></td><td class="source"> * @private</td></tr><tr><td class="line">318</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">319</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">320</td><td class="hits">1</td><td class="source">Marionette.prototype._sendCommand = function (command, deferred) {</td></tr><tr><td class="line">321</td><td class="hits"></td><td class="source">  // serialize message</td></tr><tr class="miss"><td class="line">322</td><td class="hits">0</td><td class="source">  var commandSerialized = JSON.stringify(command);</td></tr><tr class="miss"><td class="line">323</td><td class="hits">0</td><td class="source">  var msg = commandSerialized.length + ':' + commandSerialized;</td></tr><tr><td class="line">324</td><td class="hits"></td><td class="source">  // reference promise</td></tr><tr class="miss"><td class="line">325</td><td class="hits">0</td><td class="source">  this._lastCommand = deferred;</td></tr><tr><td class="line">326</td><td class="hits"></td><td class="source">  // send command</td></tr><tr class="miss"><td class="line">327</td><td class="hits">0</td><td class="source">  this.socket.write(msg);</td></tr><tr><td class="line">328</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">329</td><td class="hits">0</td><td class="source">  return this;</td></tr><tr><td class="line">330</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">331</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">332</td><td class="hits">1</td><td class="source">module.exports = Marionette;</td></tr><tr><td class="line">333</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div><div class="file"><h2 id="/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/webdriver.js">/home/ubuntu/src/github.com/dalekjs/dalek-browser-firefox/lib/webdriver.js</h2><div id="stats" class="terrible"><div class="percentage">22%</div><div class="sloc">53</div><div class="hits">12</div><div class="misses">41</div></div><table id="source"><thead><tr><th>Line</th><th>Hits</th><th>Source</th></tr></thead><tbody><tr><td class="line">1</td><td class="hits"></td><td class="source">/*!</td></tr><tr><td class="line">2</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">3</td><td class="hits"></td><td class="source"> * Copyright (c) 2013 Sebastian Golasch</td></tr><tr><td class="line">4</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">5</td><td class="hits"></td><td class="source"> * Permission is hereby granted, free of charge, to any person obtaining a</td></tr><tr><td class="line">6</td><td class="hits"></td><td class="source"> * copy of this software and associated documentation files (the &quot;Software&quot;),</td></tr><tr><td class="line">7</td><td class="hits"></td><td class="source"> * to deal in the Software without restriction, including without limitation</td></tr><tr><td class="line">8</td><td class="hits"></td><td class="source"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</td></tr><tr><td class="line">9</td><td class="hits"></td><td class="source"> * and/or sell copies of the Software, and to permit persons to whom the</td></tr><tr><td class="line">10</td><td class="hits"></td><td class="source"> * Software is furnished to do so, subject to the following conditions:</td></tr><tr><td class="line">11</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">12</td><td class="hits"></td><td class="source"> * The above copyright notice and this permission notice shall be included</td></tr><tr><td class="line">13</td><td class="hits"></td><td class="source"> * in all copies or substantial portions of the Software.</td></tr><tr><td class="line">14</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">15</td><td class="hits"></td><td class="source"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</td></tr><tr><td class="line">16</td><td class="hits"></td><td class="source"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</td></tr><tr><td class="line">17</td><td class="hits"></td><td class="source"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</td></tr><tr><td class="line">18</td><td class="hits"></td><td class="source"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</td></tr><tr><td class="line">19</td><td class="hits"></td><td class="source"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</td></tr><tr><td class="line">20</td><td class="hits"></td><td class="source"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</td></tr><tr><td class="line">21</td><td class="hits"></td><td class="source"> * DEALINGS IN THE SOFTWARE.</td></tr><tr><td class="line">22</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">23</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">24</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">25</td><td class="hits">1</td><td class="source">'use strict';</td></tr><tr><td class="line">26</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">27</td><td class="hits"></td><td class="source">// ext. libs</td></tr><tr class="hit"><td class="line">28</td><td class="hits">1</td><td class="source">var fs = require('fs');</td></tr><tr class="hit"><td class="line">29</td><td class="hits">1</td><td class="source">var Q = require('q');</td></tr><tr class="hit"><td class="line">30</td><td class="hits">1</td><td class="source">var express = require('express');</td></tr><tr class="hit"><td class="line">31</td><td class="hits">1</td><td class="source">var connect = require('connect');</td></tr><tr><td class="line">32</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">33</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">34</td><td class="hits"></td><td class="source"> * Firefox Autotest (Marionette)</td></tr><tr><td class="line">35</td><td class="hits"></td><td class="source"> * WebDriver handler &amp; request executor</td></tr><tr><td class="line">36</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">37</td><td class="hits"></td><td class="source"> * @module FirefoxDriver</td></tr><tr><td class="line">38</td><td class="hits"></td><td class="source"> * @class WebDriverServer</td></tr><tr><td class="line">39</td><td class="hits"></td><td class="source"> * @namespace FirefoxDriver</td></tr><tr><td class="line">40</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">41</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">42</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">43</td><td class="hits"></td><td class="source"> * Configures the express server</td></tr><tr><td class="line">44</td><td class="hits"></td><td class="source"> * Prepares the object properties</td></tr><tr><td class="line">45</td><td class="hits"></td><td class="source"> * Loads the webdriver commands</td></tr><tr><td class="line">46</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">47</td><td class="hits"></td><td class="source"> * @constructor</td></tr><tr><td class="line">48</td><td class="hits"></td><td class="source"> * @param {EventEmitter} events</td></tr><tr><td class="line">49</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">50</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">51</td><td class="hits">1</td><td class="source">var WebDriverServer = function (events) {</td></tr><tr><td class="line">52</td><td class="hits"></td><td class="source">  // store events</td></tr><tr class="miss"><td class="line">53</td><td class="hits">0</td><td class="source">  this.events = events;</td></tr><tr><td class="line">54</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">55</td><td class="hits"></td><td class="source">  // placeholder for the webdriver server port &amp; host</td></tr><tr class="miss"><td class="line">56</td><td class="hits">0</td><td class="source">  this.port = null;</td></tr><tr class="miss"><td class="line">57</td><td class="hits">0</td><td class="source">  this.host = null;</td></tr><tr><td class="line">58</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">59</td><td class="hits"></td><td class="source">  // configure express</td></tr><tr class="miss"><td class="line">60</td><td class="hits">0</td><td class="source">  this.app = express();</td></tr><tr><td class="line">61</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">62</td><td class="hits">0</td><td class="source">  this.app.use(connect.json());</td></tr><tr class="miss"><td class="line">63</td><td class="hits">0</td><td class="source">  this.app.use(connect.urlencoded());</td></tr><tr><td class="line">64</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">65</td><td class="hits"></td><td class="source">  // load the commands</td></tr><tr class="miss"><td class="line">66</td><td class="hits">0</td><td class="source">  this._loadCommands();</td></tr><tr><td class="line">67</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">68</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">69</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">70</td><td class="hits"></td><td class="source"> * Opens the WebDriverServer port</td></tr><tr><td class="line">71</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">72</td><td class="hits"></td><td class="source"> * @method connect</td></tr><tr><td class="line">73</td><td class="hits"></td><td class="source"> * @param {integer} webdriverPort</td></tr><tr><td class="line">74</td><td class="hits"></td><td class="source"> * @return {Q.promise} promise</td></tr><tr><td class="line">75</td><td class="hits"></td><td class="source"> * @public</td></tr><tr><td class="line">76</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">77</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">78</td><td class="hits">1</td><td class="source">WebDriverServer.prototype.connect = function (webdriverPort, webdriverHost) {</td></tr><tr class="miss"><td class="line">79</td><td class="hits">0</td><td class="source">  var deferred = Q.defer();</td></tr><tr><td class="line">80</td><td class="hits"></td><td class="source">  // store host &amp; port</td></tr><tr class="miss"><td class="line">81</td><td class="hits">0</td><td class="source">  this.port = webdriverPort;</td></tr><tr class="miss"><td class="line">82</td><td class="hits">0</td><td class="source">  this.host = webdriverHost;</td></tr><tr><td class="line">83</td><td class="hits"></td><td class="source">  // start the webdriver server</td></tr><tr class="miss"><td class="line">84</td><td class="hits">0</td><td class="source">  this.listener = this.app.listen(webdriverPort, deferred.resolve);</td></tr><tr class="miss"><td class="line">85</td><td class="hits">0</td><td class="source">  return deferred.promise;</td></tr><tr><td class="line">86</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">87</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">88</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">89</td><td class="hits"></td><td class="source"> * Closes the webdriver server port &amp; cleans up</td></tr><tr><td class="line">90</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">91</td><td class="hits"></td><td class="source"> * @method kill</td></tr><tr><td class="line">92</td><td class="hits"></td><td class="source"> * @return {Q.promise} promise</td></tr><tr><td class="line">93</td><td class="hits"></td><td class="source"> * @public</td></tr><tr><td class="line">94</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">95</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">96</td><td class="hits">1</td><td class="source">WebDriverServer.prototype.kill = function () {</td></tr><tr class="miss"><td class="line">97</td><td class="hits">0</td><td class="source">  var deferred = Q.defer();</td></tr><tr class="miss"><td class="line">98</td><td class="hits">0</td><td class="source">  this.listener.close(deferred.resolve);</td></tr><tr class="miss"><td class="line">99</td><td class="hits">0</td><td class="source">  return deferred.promise;</td></tr><tr><td class="line">100</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">101</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">102</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">103</td><td class="hits"></td><td class="source"> * Generates a function for every webdriver command</td></tr><tr><td class="line">104</td><td class="hits"></td><td class="source"> * and an express route endpoint</td></tr><tr><td class="line">105</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">106</td><td class="hits"></td><td class="source"> * @method addCommand</td></tr><tr><td class="line">107</td><td class="hits"></td><td class="source"> * @param {object} command</td></tr><tr><td class="line">108</td><td class="hits"></td><td class="source"> * @return {object} command</td></tr><tr><td class="line">109</td><td class="hits"></td><td class="source"> * @public</td></tr><tr><td class="line">110</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">111</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">112</td><td class="hits">1</td><td class="source">WebDriverServer.prototype.addCommand = function (command) {</td></tr><tr><td class="line">113</td><td class="hits"></td><td class="source">  // bind the command callback (on request)</td></tr><tr class="miss"><td class="line">114</td><td class="hits">0</td><td class="source">  var cb = command.onRequest ? command.onRequest.bind(this) : this._onRequest.bind(this, command);</td></tr><tr><td class="line">115</td><td class="hits"></td><td class="source">  // register the REST endpoint</td></tr><tr class="miss"><td class="line">116</td><td class="hits">0</td><td class="source">  this.app[command.method](command.url, cb);</td></tr><tr class="miss"><td class="line">117</td><td class="hits">0</td><td class="source">  return command;</td></tr><tr><td class="line">118</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">119</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">120</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">121</td><td class="hits"></td><td class="source"> * Loads the webdriver commands (aka. REST endpoints) from the commands library</td></tr><tr><td class="line">122</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">123</td><td class="hits"></td><td class="source"> * @method _loadCommands</td></tr><tr><td class="line">124</td><td class="hits"></td><td class="source"> * @chainable</td></tr><tr><td class="line">125</td><td class="hits"></td><td class="source"> * @private</td></tr><tr><td class="line">126</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">127</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">128</td><td class="hits">1</td><td class="source">WebDriverServer.prototype._loadCommands = function () {</td></tr><tr class="miss"><td class="line">129</td><td class="hits">0</td><td class="source">  var dir = __dirname + '/commands/webdriver/';</td></tr><tr class="miss"><td class="line">130</td><td class="hits">0</td><td class="source">  fs.readdirSync(dir).forEach(function (file) {</td></tr><tr class="miss"><td class="line">131</td><td class="hits">0</td><td class="source">    require(dir + file)(this);</td></tr><tr><td class="line">132</td><td class="hits"></td><td class="source">  }.bind(this));</td></tr><tr class="miss"><td class="line">133</td><td class="hits">0</td><td class="source">  return this;</td></tr><tr><td class="line">134</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">135</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">136</td><td class="hits"></td><td class="source">/**</td></tr><tr><td class="line">137</td><td class="hits"></td><td class="source"> * Default webdriver request handler,</td></tr><tr><td class="line">138</td><td class="hits"></td><td class="source"> * will be used if no `onRequest` method is given in the</td></tr><tr><td class="line">139</td><td class="hits"></td><td class="source"> * webdriver command</td></tr><tr><td class="line">140</td><td class="hits"></td><td class="source"> *</td></tr><tr><td class="line">141</td><td class="hits"></td><td class="source"> * @method _onRequest</td></tr><tr><td class="line">142</td><td class="hits"></td><td class="source"> * @param {object} command</td></tr><tr><td class="line">143</td><td class="hits"></td><td class="source"> * @param {object} req</td></tr><tr><td class="line">144</td><td class="hits"></td><td class="source"> * @param {object} res</td></tr><tr><td class="line">145</td><td class="hits"></td><td class="source"> * @chainable</td></tr><tr><td class="line">146</td><td class="hits"></td><td class="source"> * @private</td></tr><tr><td class="line">147</td><td class="hits"></td><td class="source"> */</td></tr><tr><td class="line">148</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">149</td><td class="hits">1</td><td class="source">WebDriverServer.prototype._onRequest = function (command, req, res) {</td></tr><tr><td class="line">150</td><td class="hits"></td><td class="source">  // extract the request paramters</td></tr><tr class="miss"><td class="line">151</td><td class="hits">0</td><td class="source">  var parameters = {};</td></tr><tr class="miss"><td class="line">152</td><td class="hits">0</td><td class="source">  Object.keys(req.params).forEach(function (key) {</td></tr><tr class="miss"><td class="line">153</td><td class="hits">0</td><td class="source">    parameters[key] = req.params[key];</td></tr><tr><td class="line">154</td><td class="hits"></td><td class="source">  });</td></tr><tr><td class="line">155</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">156</td><td class="hits"></td><td class="source">  // add paramters extracted from the post body if necessary</td></tr><tr class="miss"><td class="line">157</td><td class="hits">0</td><td class="source">  if (command.params) {</td></tr><tr class="miss"><td class="line">158</td><td class="hits">0</td><td class="source">    Object.keys(command.params).forEach(function (key) {</td></tr><tr class="miss"><td class="line">159</td><td class="hits">0</td><td class="source">      parameters[key] = req.body[command.params[key]];</td></tr><tr><td class="line">160</td><td class="hits"></td><td class="source">    });</td></tr><tr><td class="line">161</td><td class="hits"></td><td class="source">  }</td></tr><tr><td class="line">162</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">163</td><td class="hits"></td><td class="source">  // trigger the marionette command</td></tr><tr class="miss"><td class="line">164</td><td class="hits">0</td><td class="source">  this.events.emit('marionette:cmd:' + command.name, parameters);</td></tr><tr><td class="line">165</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">166</td><td class="hits"></td><td class="source">  // generate &amp; send the webdriver response when the command has been executed by marionette</td></tr><tr class="miss"><td class="line">167</td><td class="hits">0</td><td class="source">  this.events.on('marionette:cmd:' + command.name + ':response', function (data) {</td></tr><tr class="miss"><td class="line">168</td><td class="hits">0</td><td class="source">    var parsedData = {};</td></tr><tr><td class="line">169</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">170</td><td class="hits">0</td><td class="source">    try {</td></tr><tr class="miss"><td class="line">171</td><td class="hits">0</td><td class="source">      parsedData = JSON.parse(data);</td></tr><tr><td class="line">172</td><td class="hits"></td><td class="source">    } catch (e) {</td></tr><tr class="miss"><td class="line">173</td><td class="hits">0</td><td class="source">      parsedData = data;</td></tr><tr><td class="line">174</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">175</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">176</td><td class="hits">0</td><td class="source">    data = parsedData;</td></tr><tr class="miss"><td class="line">177</td><td class="hits">0</td><td class="source">    var answer = { sessionId: parameters.sessionId, status: 0};</td></tr><tr><td class="line">178</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">179</td><td class="hits"></td><td class="source">    // check if we need to send a value with the response</td></tr><tr class="miss"><td class="line">180</td><td class="hits">0</td><td class="source">    if (data.value || data.value === false) {</td></tr><tr class="miss"><td class="line">181</td><td class="hits">0</td><td class="source">      answer.value = data.value;</td></tr><tr><td class="line">182</td><td class="hits"></td><td class="source">    }</td></tr><tr><td class="line">183</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">184</td><td class="hits">0</td><td class="source">    res.status(200);</td></tr><tr class="miss"><td class="line">185</td><td class="hits">0</td><td class="source">    res.send(JSON.stringify(answer));</td></tr><tr><td class="line">186</td><td class="hits"></td><td class="source"> </td></tr><tr><td class="line">187</td><td class="hits"></td><td class="source">  }.bind(this));</td></tr><tr><td class="line">188</td><td class="hits"></td><td class="source"> </td></tr><tr class="miss"><td class="line">189</td><td class="hits">0</td><td class="source">  return this;</td></tr><tr><td class="line">190</td><td class="hits"></td><td class="source">};</td></tr><tr><td class="line">191</td><td class="hits"></td><td class="source"> </td></tr><tr class="hit"><td class="line">192</td><td class="hits">1</td><td class="source">module.exports = WebDriverServer;</td></tr><tr><td class="line">193</td><td class="hits"></td><td class="source"> </td></tr></tbody></table></div></div></div></body></html>